/*!
 * Authentic Theme (https://github.com/authentic-theme/authentic-theme)
 * Copyright Ilia Rostovtsev <ilia@virtualmin.com>
 * Licensed under MIT (https://github.com/authentic-theme/authentic-theme/blob/master/LICENSE)
 */
function __f___globals(){$____loader_block__=1,$____loader_block__manual=0,$g__v__home_base=Math.random(),$v__fm__container_fluid=".container-fluid",$v__fm__container_fluid_form=".container-fluid #list_form",$v__fm__container_fluid_modal_in=".container-fluid .modal.in",$v__fm__global_error=0,$v__fm__global_last_row=0,$v__fm__global_last_row_active=0,$v__fm__tree_node_prog=0,$v__fm__tree_node_sp=1,$v__fm__tr_hover_active=1,fm_stored_listing.data={},fm_previous_path_used="",fm_stored_sorting={},getflists=[],getflists_loaded=[],fm_deletion_type=config_portable_module_filemanager_move_to_trash,fm_deletion_to_trash=fm_deletion_type,fm_deletion_empty_trash=0,fm_deletion_empty_trash_previous=0,fm_overwrite_files=!config_portable_module_filemanager_files_safe_mode,fm_follow_symlinks=config_portable_module_filemanager_follow_symlinks,fm_overwrite_files_mode_reset=function(){fm_overwrite_files=!config_portable_module_filemanager_files_safe_mode},fm_curr_search_ajax=null,fm_bookmark_searched_str=null,"undefined"==typeof fm_user_data&&(fm_user_data=[]),fm_users_data_dynamic=null,fm_goto_previous=0,fm_refreshing_current=0,$v__fm__tree=0,initial_fm_load=1,$($v__fm__container_fluid).addClass("fmx"),$v__fm__container_fluid+=".fmx",tab___to______create=1}const fm_stored_listing={previous:{set:function(){this.value=parseInt($($v__fm__container_fluid+" .dataTables_paginate:visible .active a").text())||1},value:1},data:{},var:function(){var e=v___server_username;return{tab:"tab"+get_active_tab_id(),cpath:fm_get_current_path(),ppath:fm_previous_path_used,user:e}},test:function(){if(this.data[this.var().user]&&this.data[this.var().user][this.var().tab]&&this.data[this.var().user][this.var().tab][this.var().cpath]){var e=this.data[this.var().user][this.var().tab][this.var().cpath];return e||0}},delete:function(){try{this.var().ppath&&this.data[this.var().user]&&this.data[this.var().user][this.var().tab]&&delete this.data[this.var().user][this.var().tab]}catch(e){}},store:function(e){try{var a=e||this.var().ppath,t=this.var().user,_=this.var().tab;a&&(this.data[t]?this.data[t][_]?this.data[t][_][a]=this.previous.value:this.data[t][_]={[a]:this.previous.value}:this.data[t]={[_]:{[a]:this.previous.value}})}catch(e){}}};function _f__table(){var e=$(".container-fluid .tab-pane.active").attr("id");if(e&&e.length){var a=parseInt(e.replace(/^\D+/g,""));return window["_f__table"+a]}return!1}function fm_store_last_visited_dir(e){initial_fm_load||(e=fm_process_path(e=e||"%2F","decode"),e=fm_process_path(e,"encode"),localStorage.setItem(v___server_hostname+"-"+v___server_username+"-fm-last-visited-dir",e))}function fm_root_dir_spinner_remove(){$($v__fm__container_fluid_form).find(".cspinner-folder-btl").remove()}function fm_root_dir_spinner_add(){fm_root_dir_spinner_remove(),$($v__fm__container_fluid+" .active i.fa-folder-btl").after('<span class="cspinner cspinner-folder-btl"><span class="cspinner-icon smaller"></span></span>')}function fm_target_spinner_remove(){$($v__fm__container_fluid_form).find(".cspinner-target").remove()}function fm_target_spinner_add(e){fm_target_spinner_remove(),e&&e.first().find("img").before('<span class="cspinner cspinner-target"><span class="cspinner-icon smaller"></span></span>')}function __f__refresh__dir_and_tree(){var e=fm_get_current_path();fm_refreshing_current=1,__f____r("get","index.cgi?path="+(e?e+extra_query():""),!1,0),fm_root_dir_spinner_add()}function deselectAllRows(){var e=_f__table();if(e)for(rows=e.dataTable().$("tr.hl-aw",{filter:"applied"}),i=0;i<rows.length;i++){rows[i].getElementsByTagName("input")[0].checked&&rowClick(rows[i])}}function selectAllRows(){var e=_f__table();if(e)for(rows=e.dataTable().$("tr"),i=0;i<rows.length;i++){rows[i].getElementsByTagName("input")[0].checked||rowClick(rows[i])}}function __f__cnt___total(e){e=e?":visible":String();var a,t=_f__table();return t&&(a=t.dataTable().$("tr"+e).length),a}function __f__cnt___selected(e){e=e?":visible":String();var a,t=_f__table();return t&&(a=t.dataTable().$("tr"+e+".hl-aw",{filter:"applied"}).length),a}function fm_get_selected_rows(e){e=e?":visible":String();var a,t=_f__table();return t&&(a=t.dataTable().$("tr"+e+".hl-aw",{filter:"applied"})),a}function total_selected_count_update(e,a,t){e||(e=t?0:__f__cnt___selected());var _="data-all",n="["+_+'="1"]',i=":not("+n+")";a&&(i=String(),$(n).removeAttr(_)),$($v__fm__container_fluid+" .total_selected"+i).html(1==e?theme_language("filemanager_selected_entry").replace("%value","<span>1</span>"):theme_language("filemanager_selected_entries").replace("%value","<span>"+e+"</span>"))}function __r____changed(){if($("body").attr("class")&&$("body").attr("class").indexOf(v___module_file_manager)>-1){$(".total_size_data").parent("span").addClass("hidden");var e=__f__cnt___selected();e?__f___ub():__f___lb(),total_selected_count_update(e),__f__cnt___selected(1)!=__f__cnt___total(1)&&select_all_entries("remove")}}function file_manager_table_rows_control(){var e=this;this.p_a=void 0;var a="ui_checked_columns",t="click.ranged",_="input.iawobject",n="td:first-child",i=$($v__fm__container_fluid);i.off(t),i.on(t,".active ."+a+":visible:not(.directory_go_up) "+n+" "+_,function(t){var i=$(this).parents("tr."+a);if(document.activeElement.blur(),t.stopPropagation(),setTimeout(function(){e.p_a=i},50),$(t.target).is(_)&&vars.events.keypressed.shift&&vars.events.keypressed.shift&&e.p_a&&!e.p_a.is(i)&&t.originalEvent&&!0===t.originalEvent.isTrusted){var r=e.p_a.index(),o=i.index()>r?i.prevUntil(e.p_a):i.nextUntil(e.p_a),s=n+" "+_,l=e.p_a.find(s).is(":checked");o.find(s).each(function(a,t){$(t).add(e.p_a.find(s)).prop("checked",l),$(t).trigger("change")})}})}function check_pagination_option(){-1===$.inArray(parseInt(config_portable_module_filemanager_records_per_page),[5,10,15,20,25,30,35,40,45,50,55,60,70,80,90,100,250,500])&&(config_portable_module_filemanager_records_per_page=30)}function get_current_list_stats(){var e=$($v__fm__container_fluid+" .panel-body .total:visible").contents().filter(function(){return 3==this.nodeType})[0].data.match(/[0-9]+(,[0-9]+)*/g),a=e.length>2?1:0;return[a?e[2]:parseInt(e[0])+parseInt(e[1]),a?e[3]:$($v__fm__container_fluid+" .dataTables_paginate:visible a").length-2]}function select_all_entries(e){var a='data-select-all-entries="affirmative"',t="["+a+"]",_='data-yes="1"',n='data-no="1"',i='data-alert-text="1"',r='data-clear="1"';if(e)if("remove"===e)$(t).remove(),total_selected_count_update(__f__cnt___selected(),1);else{if("test"===e)return $(t).find("["+r+"]").length;if("test_unconf"===e)return $(t).find("["+_+"]").length}else{var o=get_current_list_stats(),s=o[0],l=o[1];if(-2!==l&&1!=l){var f=theme_language("filemanager_mass_select").replace("%1","<b>"+s+"</b>").replace("%2","<b>"+l+"</b>"),c=theme_language("filemanager_mass_selected").replace("%1","<b>"+s+"</b>"),d="<button "+r+' class="btn btn-xxs btn-warning-l">'+theme_language("filemanager_mass_select_clear")+"</button>",m="<div "+a+' class="alert alert-warning text-center"><span '+i+">"+f+'</span>&nbsp;&nbsp;<div class="btn-group btn-group-xs"><button '+_+' class="btn btn-xxs btn-warning-l">'+theme_language("global_yes")+"</button><button "+n+' class="btn btn-xxs btn-warning-l">'+theme_language("global_no")+"</button></div></div>",u=$($v__fm__container_fluid+" .data-content-container");$(t).length||(u.prepend(m),$(t).find("["+_+"]").one("click",function(e){$(this).parent().html(d).parent().find("["+i+"]").html(c),$($v__fm__container_fluid+" .total_selected").attr("data-all",1).find("span").text(s),selectAllRows()}),$(t).find("["+n+"]").one("click",function(e){select_all_entries("remove")}),$(t).one("click","["+r+"]",function(e){select_all_entries("remove"),deselectAllRows(),total_selected_count_update(0,0,1),__f___lb()}))}}}function f__ck_init_err(e){var a=!$($v__fm__container_fluid_form).length&&$('a.page_footer_submit[href*="index.cgi?path="]').length||core.error.get(),t=$(".container-fluid-loading").find(".cspinner-icon").length;if(e)return a;a&&($v__fm__global_error=1,$(".data-content-container").addClass("hidden"),t&&page.handle.content.preloader.show(),__f_____undel())}function get_link(e,a){String();var t=fm_get_current_path();extra_params=extra_query(e),__f____r("get","index.cgi?path="+t+extra_params,!1,0)}function fm_check_chroot(){var e=fm_user_data&&fm_user_data.home?fm_user_data.home:session.server.data("user-home");return!(!e||!e.includes("/./"))}function __f___b_dr(e){var a=fm_get_current_path();if("%2F"!==a){var t="";if((t=$($v__fm__container_fluid+" .breadcrumb li:first-child i").hasClass("fa-search")?"index.cgi?path="+a:$($v__fm__container_fluid+" .breadcrumb > li:eq(-2) > a").attr("href"))||(t="index.cgi?path=%2F"),fm_goto_previous=1,a){var _=a.split("%2F").pop();_&&(fm_goto_previous="name="+_)}__f____r("get",t,"",0,!1,void 0!==e.originalEvent),fm_root_dir_spinner_add()}}function __f___o_dr(e,a,t,_,n){(t||n)&&(fm_target_spinner_add(e),__f____r("get",t,!1,0,!1,_))}function f__insert_dir_up(){var e=fm_get_current_path();e&&"/"!=e&&"%2F"!=e&&!$($v__fm__container_fluid+" .active table tbody tr.directory_go_up").length&&$($v__fm__container_fluid+" .active table tbody").prepend('<tr class="ui_checked_columns directory_go_up" style="height: 23px;"><td colspan="'+$($v__fm__container_fluid+" .active thead tr th:visible").length+'"><input class="hidden" type="hidden">&nbsp;<i class="fa fa-fw fa-folder-btl"></i>&nbsp;..</td></tr>')}function __f___um(){var e=fm_get_current_home_username();return e||config_portable_module_filemanager_switch_users||fm_user_data&&fm_user_data.user&&(e=fm_user_data.user),e?"&username="+e:""}function f__act_tab_name(e){$($v__fm__container_fluid+" [data-tab-path]").filter(function(a,t){(e.endsWith($(t).text())||$(t).text()===e||"/"===$(t).text()&&""===e)&&$(t).parent("a").trigger("click")})}function f__chk_loading(){if(v___module==v___module_file_manager)if(f__ck_init_err(1))f__ck_init_err();else{$("[data-tab-path]");$(".container-fluid.fmx .dataTable").length?(setTimeout(function(){__f__c__m(),file_manager_table_rows_control()},2),setTimeout(function(){var e="file-manager";$.getScript(v___server_extensions_path+"/"+e+"/"+e+"-reinit."+v___source_type+".js?"+theme.version(!0)).fail(function(e){"canceled"!==e.statusText&&"abort"!==e.statusText&&connection_error(e,1)})},401)):setTimeout(f__chk_loading,10)}}function __f___gd(){var e=$(_f__table().fnGetNodes()).find("input").add($($v__fm__container_fluid+" .active form > input:not([name='path'])")).serialize();return e=e+"&path="+fm_get_current_path()}function __f___gdArr(){return $(_f__table().fnGetNodes()).find("input").add($($v__fm__container_fluid+" .active form > input:not([name='path'])")).serializeArray()}function _f__gr(e){return e?$(_f__table().fnGetNodes()).find("input:checked"):$(_f__table().fnGetNodes()).find("input")}function __f__ld__bg(){theme_modal_dismiss(),__f_____ul()}function __f__upd_____tl(e){var a=$($v__fm__container_fluid+" div.total").children().clone();$($v__fm__container_fluid+" div.total").empty().html(e+".&nbsp;").append(a)}function __f__ck_lock(){return $("body.file-manager").find($v__fm__container_fluid_form+" table tbody").hasClass("o__f_m-updating")}function __f___ub(){fm_path_inside_trash()||$($v__fm__container_fluid+" div button.o__f_m-button-delete").removeClass("disabled").attr("onclick","removeDialog()"),$($v__fm__container_fluid+" .o__f_m-button-chmod").removeClass("disabled").find("a").attr("onclick","chmodDialog()"),$($v__fm__container_fluid+" .o__f_m-button-chown").removeClass("disabled").find("a").attr("onclick","chownDialog()"),$($v__fm__container_fluid+" .o__f_m-button-chattr").removeClass("disabled").find("a").attr("onclick","chattrDialog()"),$($v__fm__container_fluid+" .o__f_m-button-chcon").removeClass("disabled").find("a").attr("onclick","chconDialog()"),$($v__fm__container_fluid+" .o__f_m-button-acls").removeClass("disabled").find("a").attr("onclick","aclsDialog()"),$($v__fm__container_fluid+" .o__f_m-button-compress").removeClass("disabled").find("a").attr("onclick","compressDialog()"),$($v__fm__container_fluid+" .o__f_m-button-copy").removeClass("disabled"),$($v__fm__container_fluid+" .o__f_m-button-cut").removeClass("disabled"),__f__cond_l()}function __f___lb(){$($v__fm__container_fluid+" div button.o__f_m-button-delete").addClass("disabled").removeAttr("onclick"),$($v__fm__container_fluid+" .o__f_m-button-chmod").addClass("disabled").find("a").removeAttr("onclick"),$($v__fm__container_fluid+" .o__f_m-button-chown").addClass("disabled").find("a").removeAttr("onclick"),$($v__fm__container_fluid+" .o__f_m-button-chattr").addClass("disabled").find("a").removeAttr("onclick"),$($v__fm__container_fluid+" .o__f_m-button-chcon").addClass("disabled").find("a").removeAttr("onclick"),$($v__fm__container_fluid+" .o__f_m-button-acls").addClass("disabled").find("a").removeAttr("onclick"),$($v__fm__container_fluid+" .o__f_m-button-compress").addClass("disabled").find("a").removeAttr("onclick"),$($v__fm__container_fluid+" .o__f_m-button-copy").addClass("disabled").find("a").removeAttr("onclick"),$($v__fm__container_fluid+" .o__f_m-button-cut").addClass("disabled").find("a").removeAttr("onclick"),__f__cond_l()}function __f__cond_l(){var e=$($v__fm__container_fluid+" .o__f_m-button-symlink"),a=$("#__f__c__m a[data-context-newsymlink]").parent("li");__f__cnt___selected()>=1?(e.removeClass("disabled"),a.removeClass("disabled")):(e.addClass("disabled"),a.addClass("disabled"))}function __f_____undel(){var e="body",a=$(e),t='.breadcrumb:visible [data-toggle="popover-path"]';a.undelegate(t,"inserted.bs.popover shown.bs.popover hide.bs.popover");t=$v__fm__container_fluid+' [data-toggle="popover-path"]';a.undelegate(t,"hide.bs.popover");t=$v__fm__container_fluid+' a[data-toggle="tab"]';a.undelegate(t,"hide.bs.tab show.bs.tab shown.bs.tab");t="click.fm dblclick.fm click.ranged click.fmcmenu contextmenu.fm submit.fm change.fm changed.fm input.fm mouseleave.fm mouseenter.fm mouseup.fm mouseout.fm mouseover.fm mousemove.fm input.fm keyup.fm keydown.fm keypress.fm sortupdate.fm resize.fm";a.off(t),$(e+" *").undelegate(t).unbind(t).off(t)}function __f__dw__dir(e){var a=fm_get_current_path(),t=fm_get_current_home_username(),_=t||v___server_username,n=0==config_portable_module_filemanager_force_tar?1:0,i=id=parseInt(1e3*Math.random()),r="preparing_download_"+i,o=new Date,s="download-"+(o.getFullYear()+"."+(o.getMonth()+1)+"."+o.getDate()+"_"+o.getHours()+"."+o.getMinutes()+"."+o.getSeconds())+"-"+_+"-("+v___server_hostname+")";plugins.messenger.post('<i class="fa fa-lg fa-fw fa-file-archive-o"></i>'+theme_language("filemanager_preparing_download").replace("%number",e).replace("%dots",'...&nbsp;&nbsp;&nbsp;<span class="cspinner"><span class="cspinner-icon white smallest margined-top-4"></span></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-cancel-preparing-download-'+i+' class="cancel-preparing-download fa fa-fw fa-lg fa-times-circle pull-right cursor-pointer margined-top--7 margined-right--20"></span>'),0,"info",r,0,["bottom","right"]),$("[data-cancel-preparing-download-"+i+"]").one("click",function(){window[r].abort(),plugins.messenger.toast.hide(r),plugins.messenger.post({type:"error",icon:"times-circle",id:r,message:theme_language("filemanager_canceled_download"),position:"bottomRight",cancel:!1}),$.ajax({type:"GET",url:v___server_extensions_path+"/file-manager/download.cgi?cancel=1&filename="+s+"&path="+a+"&do_zip="+n+"&module="+v___module_file_manager+extra_query()})}),window[r]=$.ajax({xhr:function(){return new window.XMLHttpRequest},type:"POST",url:v___server_extensions_path+"/file-manager/download.cgi?filename="+s+"&do_zip="+n+"&module="+v___module_file_manager+extra_query(),data:__f___gd(),dataType:"text",success:function(t){session.status(t)&&(window.location.replace(v___server_extensions_path+"/file-manager/download.cgi?download=1&filename="+s+"&path="+a+"&do_zip="+n+"&module="+v___module_file_manager+extra_query()),plugins.messenger.toast.hide(r),plugins.messenger.post({type:"success",icon:"download-cloud",id:r,message:theme_language("filemanager_prepared_download").replace("%number",e).replace("%dots","..."),position:"bottomRight",cancel:!1,timeout:2e3}))},error:function(e){}})}function context_menu_toggle_delete_trash(e){var a=$("#__f__c__m");if(a.is(":visible")){var t="context-delete-trash",_=theme_language("filemanager_context_delete"),n=theme_language("filemanager_context_move_to_trash"),i=a.find("[data-"+t+"]"),r=e?!config_portable_module_filemanager_move_to_trash:config_portable_module_filemanager_move_to_trash;$context_menu_selector_delete_text_target=i.find("span"),$context_menu_selector_delete_icon_target=i.find(".fa"),context_menu_selector_delete_icon_delete="fa-trash-o",context_menu_selector_delete_icon_trash="fa-trash",i.data(t,~~!r),i.attr("data-"+t,~~!r),$context_menu_selector_delete_icon_target.addClass(r?context_menu_selector_delete_icon_delete:context_menu_selector_delete_icon_trash).removeClass(r?context_menu_selector_delete_icon_trash:context_menu_selector_delete_icon_delete),$context_menu_selector_delete_text_target.text(r?_:n)}}function __f_____lo(e,a){!0===a&&($("body.file-manager").find("#list_form table tbody").addClass(e?" o__f_m-updating":""),$("body.file-manager").find("ul.pagination").addClass("pointer-events-none"),$($v__fm__container_fluid+" .nav.nav-tabs li").addClass("disabled"),$("#file-manager-new-instance").addClass("disabled_no_styling cursor-na"))}function __f_____ul(e){initial_fm_load||($("body.file-manager").find("#list_form table tbody").css("opacity","1").removeClass("o__f_m-updating"),$("body.file-manager").find("ul.pagination").css("opacity","1").removeClass("pointer-events-none"),$($v__fm__container_fluid+" .nav.nav-tabs li").removeClass("disabled"),!e&&$($v__fm__container_fluid+" .btn-group.pull-right > .btn-group > button").removeClass("disabled"),$("#file-manager-new-instance").removeClass("disabled_no_styling cursor-na"))}function __init__dt_ck__e(){$($v__fm__container_fluid+" .active td.dataTables_empty").length?($($v__fm__container_fluid+" .active td.dataTables_empty").css({padding:"4px","border-top-color":"#eaeaea"}),$($v__fm__container_fluid+" .dataTables_paginate").addClass("hidden"),$($v__fm__container_fluid+" .active td.dataTables_empty").attr("colspan",parseInt($(".active thead tr th:visible").length)),setTimeout(function(){$($v__fm__container_fluid+" .__o__f_m-search-results").length&&$($v__fm__container_fluid+" td.dataTables_empty").html(theme_language("datatable_no_search_results"))},0)):($($v__fm__container_fluid+" .active table, .active td.dataTables_empty").removeAttr("style"),$($v__fm__container_fluid+" .dataTables_paginate").removeClass("hidden"))}function __f____success(e,a,t,_,n,i,r,o,s,l,f,c,d,m,u,p){var g=e[0].error&&e[0].error.length,h=e[0].error_fatal&&e[0].error_fatal.length,v=void 0!==u&&u,b=fm_get_current_path(),w=1,x=1,y=1;function k(e){e=e.replace(/\\n/g," ").replace(/\\/g,"");var a=JSON.parse(e);if("object"==typeof a&&a){if(Object.keys(a).length>1){var t='<div class="margined-left-20">';return $.each(a,function(e,a){t+="<strong>• "+Convert.htmlEscape(e)+"</strong> - "+Convert.htmlEscape(a)+"<br>",t=Convert.htmlUnEscapeSafe(t)}),[1,error_replace_tags(t+="</div>")]}return[0,error_replace_tags(Convert.htmlUnEscapeSafe(Convert.htmlEscape(Convert.json_to_string(a))))]}}if(setTimeout(function(){theme_message_dismiss(m+"_info"),theme_message_dismiss(m+"_warning")},564),v&&"compress"==v[0]){var C=fm_process_path(v[1]),T=fm_process_path(v[2],"escape/decode");b!=C&&(w=0,x=0,y=0,C||(C="/"),setTimeout(function(){g?plugins.messenger.post('<i class="fa fa-lg fa-fw '+(h?"fa-exclamation-circle":i)+'"></i>'+(theme_language("filemanager_successful_compression_bg_with_errors").replace("%file",T).replace("%path",fm_process_path(C,"escape/decode"))+k(e[0].error)[1]),o,s,m+"_"+s,1,["bottom","right"]):plugins.messenger.post('<i class="fa fa-lg fa-fw '+l+'"></i>'+theme_language("filemanager_successful_compression_bg").replace("%file",T).replace("%path",fm_process_path(C,"escape/decode")),c,"info",m+"_"+d,1,["bottom","right"])},564))}if(g&&w){var D=k(e[0].error),S=D[0],j=D[1],F=(S?theme_language(r+(h?"_fatal":"")):"")+j;setTimeout(function(){plugins.messenger.post('<i class="fa fa-lg fa-fw '+(h?"fa-exclamation-circle":i)+'"></i>'+F,o,h||!s?"error":s,m+"_"+s,1,["bottom","right"])},564)}else if(x){var P=theme_language(f);if("delete"===m){var E="";if(fm_deletion_to_trash&&fm_deletion_to_trash.home||fm_deletion_empty_trash_previous){var I=fm_deletion_to_trash.home||fm_deletion_empty_trash_previous;E=!0===I?".Trash":I&&I.includes(session.server.data("user-home"))?"~/.Trash":Convert.htmlEscape(I)+"/.Trash",c=2}e[0].etrashed&&(P=theme_language("filemanager_successful_emptying_trash")),P=P.replace("$1",E)}setTimeout(function(){plugins.messenger.post('<i class="fa fa-lg fa-fw '+l+'"></i>'+P,c,d,m+"_"+d,1,["bottom","right"])},564)}n&&$("."+n).remove(),h||(a&&__f_____ul(),t&&theme_modal_dismiss(),_&&y&&setTimeout(function(){__f___u("upd",e[0],1,m,!1,p),tree_update_node()},123))}function __f____a(e,a){block_events();var t,_=fm_get_current_path();if("bookmark"!=e&&__f_____lo(!1,!0),"copy"!==e&&"cut"!==e||$.ajax({type:"POST",url:v___server_extensions_path+"/file-manager/"+e+".cgi?module="+v___module+extra_query(),data:__f___gd(),dataType:"text",success:function(a){session.status(a)&&(localStorage.removeItem(v___server_hostname+"-cut"),localStorage.removeItem(v___server_hostname+"-copy"),localStorage.setItem(v___server_hostname+"-"+e,1),$($v__fm__container_fluid+" .o__f_m-button-paste").removeClass("disabled"),setTimeout(function(){"copy"===e?plugins.messenger.post('<i class="fa fa-lg fa-fw fa-clone"></i>'+theme_language("filemanager_copying_successful"),1.5,"info",e+"_info",1,["bottom","right"]):"cut"===e&&plugins.messenger.post('<i class="fa fa-lg fa-fw fa-scissors"></i>'+theme_language("filemanager_cutting_successful"),1.5,"warning",e+"_warning",1,["bottom","right"])},246),__f_____ul())},error:function(a){plugins.messenger.post('<i class="fa fa-lg fa-fw fa-exclamation-triangle"></i>'+theme_language("filemanager_buffer_error"),10,"error",e+"_error",1,["bottom","right"])}}),"paste"===e){var n={count:"file-manager-response_count",type:"file-manager-response"},i=function(e){for(var a in e)document.cookie=n[a]+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; path=/;"},r=__f___um();r&&(r=r.replace("username=","fownergroup=")),$.ajax({type:"POST",url:v___server_extensions_path+"/file-manager/paste.cgi?path="+fm_process_path(_)+"&module="+v___module_file_manager+r+extra_query(),data:!1,dataType:"json",success:function(a){setTimeout(function(){theme_message_dismiss(e+"_info"),theme_message_dismiss(e+"_warning")},566);var t="1"==get_cookie(n.count)?1:2,o=get_cookie(n.type);i(n),(!o||o&&o.length&&-1===o.indexOf("err"))&&(localStorage.removeItem(v___server_hostname+"-cut"),localStorage.getItem(v___server_hostname+"-copy")||$($v__fm__container_fluid+" .o__f_m-button-paste").addClass("disabled")),"err"==o?(alert_json_errors(a[0].error,e,"filemanager_paste_warning",!0,!0),setTimeout(function(){__f___u("upd",a[0],1,e,!1),tree_update_node()},567)):"merr"==o?(plugins.messenger.post('<i class="fa fa-lg fa-fw fa-exclamation-triangle"></i>'+theme_language("filemanager_move_into_self"),15,"error",e+"_error",1,["bottom","right"]),__f_____ul()):"ep"==o?bootbox.dialog({message:theme_language("filemanager_target_conflict_message_"+t),title:'<i class="fa fa-fw fa-exclamation-circle font-size-80p bootbox-o__f_m-paste-prompt">&nbsp;&nbsp;</i> <strong class="font-size-90p">'+theme_language("filemanager_target_conflict_"+t)+"</strong>",buttons:{success:{label:'&nbsp;<i class="fa fa-fw fa-clipboard">&nbsp;&nbsp;</i>'+theme_language("filemanager_target_conflict_paste")+"&nbsp;&nbsp;",className:"btn-primary vertical-align-top ",callback:function(){$.ajax({type:"POST",url:v___server_extensions_path+"/file-manager/paste.cgi?path="+fm_process_path(_)+"&module="+v___module_file_manager+"&ua=2"+r+extra_query(),data:!1,dataType:"json",success:function(a){a[0].error.length>1?plugins.messenger.post('<i class="fa fa-lg fa-fw fa-question-circle"></i>'+error_replace_tags(a[0].error),10,"warning",e+"_warning",1,["bottom","right"]):plugins.messenger.post('<i class="fa fa-lg fa-fw fa-clipboard"></i>'+theme_language("filemanager_pasting_and_copying_"+t),2,"success",e+"_success",1,["bottom","right"]),setTimeout(function(){__f___u("upd",a[0],1,e,!1),tree_update_node(),i(n)},567)},error:function(e){session.status(e.responseText),i(n)}})}},danger:{label:'&nbsp;<i class="fa fa-fw fa-times-circle-o">&nbsp;&nbsp;</i>'+theme_language("filemanager_target_conflict_replace")+"&nbsp;&nbsp;",className:"btn-danger vertical-align-top margined-left--2",callback:function(){$.ajax({type:"POST",url:v___server_extensions_path+"/file-manager/paste.cgi?path="+fm_process_path(_)+"&module="+v___module_file_manager+"&ua=1"+r+extra_query(),data:!1,dataType:"json",success:function(a){a[0].error.length>1?plugins.messenger.post('<i class="fa fa-lg fa-fw fa-question-circle"></i>'+error_replace_tags(a[0].error),10,"warning",e+"_warning",1,["bottom","right"]):plugins.messenger.post('<i class="fa fa-lg fa-fw fa-clipboard"></i>'+theme_language("filemanager_pasting_and_replacing_"+t),2,"success",e+"_success",1,["bottom","right"]),setTimeout(function(){__f___u("upd",a[0],1,e,!1),tree_update_node(),i(n)},567)},error:function(e){session.status(e.responseText),i(n)}})}}},onEscape:function(){__f_____ul()}}):"cc"==o?(plugins.messenger.post('<i class="fa fa-lg fa-fw fa-clipboard"></i>'+theme_language("filemanager_pasting_and_copying_"+t),2,"success",e+"_success",1,["bottom","right"]),setTimeout(function(){__f___u("upd",a[0],1,e,!1),tree_update_node()},567)):(plugins.messenger.post('<i class="fa fa-lg fa-fw fa-clipboard"></i>'+theme_language("filemanager_pasting_successful"),2,"success",e+"_success",1,["bottom","right"]),setTimeout(function(){__f___u("upd",a[0],1,e,!1),tree_update_node()},567))},error:function(e){session.status(e.responseText),i(n)}})}if("extract"===e){var o=String(),s=String();a&&a[0]&&(o="&password="+a[0]),a&&a[1]&&(s="&delete="+(a[1]?1:0));var l=fm_get_current_path();theme_message_dismiss(e+"_warning"),tree_update_node(),$.ajax({type:"POST",url:v___server_extensions_path+"/file-manager/extract.cgi?module="+v___module+s+__f___um()+extra_query(),data:__f___gd()+o,dataType:"json",success:function(a){setTimeout(function(){theme_message_dismiss(e+"_info"),theme_message_dismiss(e+"_warning")},566),a[0].error&&a[0].error.length&&alert_json_errors(a[0].error,e,"filemanager_errors_extraction"),setTimeout(function(){fm_get_current_path()===l&&(__f___u("upd",a[0],1,e,!1),tree_update_node())},567)},error:function(e){session.status(e.responseText)}})}"bookmark"===e&&((t=$.isArray(a)?a[0]:_)&&t.endsWith("/")?t=t.slice(0,-1):t&&t.endsWith("%2F")&&(t=t.slice(0,-3)),$.ajax({type:"POST",url:v___server_extensions_path+"/file-manager/bookmark.cgi?module="+v___module_file_manager,data:{path:t},dataType:"text",success:function(a){setTimeout(function(){theme_message_dismiss(e+"_info"),theme_message_dismiss(e+"_warning")},566),session.status(a)&&(exiting_book_mark=f_m__bm__u(),exiting_book_mark.length?plugins.messenger.post('<i class="fa fa-lg fa-fw fa-star-o"></i>'+theme_language("filemanager_unbookmark_success").replace("%value",t?fm_process_path(t,"escape/decode"):"/"),5,"warning","bookmarkAddRemove",1,["bottom","right"]):plugins.messenger.post('<i class="fa fa-lg fa-fw fa-star"></i>'+theme_language("filemanager_bookmark_success").replace("%value",t?fm_process_path(t,"escape/decode"):"/"),5,"info","bookmarkAddRemove",1,["bottom","right"]),fm_bookmark_searched_str=null)},error:function(e){}}));if("delete"===e){fm_deletion_empty_trash_previous=1===fm_deletion_empty_trash;var f=__f___gd();(async()=>{!function(a){var t=a[fm_get_current_home_username()],_=t?"&"+Convert.json_to_query(t):"&"+Convert.json_to_query(fm_user_data);extra_details=fm_deletion_to_trash?_:"",fm_deletion_to_trash&&(fm_deletion_to_trash=t||fm_user_data),fm_deletion_to_trash&&fm_deletion_to_trash.home&&fm_deletion_to_trash.home.includes("/./")&&(fm_deletion_to_trash.home="/"+fm_deletion_to_trash.home.split("/./")[1]),$.ajax({type:"POST",url:v___server_extensions_path+"/file-manager/delete.cgi?module="+v___module+extra_query()+"&etrash="+(fm_deletion_empty_trash_previous?1:0)+"&trash="+(fm_deletion_to_trash?1:0)+extra_details,data:f,dataType:"json",success:function(a){__f____success(a,1,1,1,!1,"fa-exclamation-triangle","filemanager_"+(fm_deletion_to_trash?"remove":"delete")+"_warning",30,"error",fm_deletion_empty_trash_previous?"fa2 fa2-trash-empty-o":fm_deletion_to_trash?"fa-trash-o":"fa-trash","filemanager_successful_"+(fm_deletion_empty_trash_previous?"emptying_trash":fm_deletion_to_trash?"removal":"deletion"),2,"success",e,!1,f)},error:function(e){session.status(e.responseText)}})}(await fm_get_current_home_user_details())})()}if("rename"===e){fm_get_current_path();var c=$($v__fm__container_fluid+" #renameForm").serialize();theme_modal_dismiss(),$.ajax({type:"POST",url:v___server_extensions_path+"/file-manager/rename.cgi?module="+v___module+extra_query(),data:c,dataType:"json",success:function(a){if(setTimeout(function(){theme_message_dismiss(e+"_warning")},566),a[0].error&&a[0].error.length)return plugins.messenger.post('<i class="fa fa-lg fa-fw fa-exclamation-triangle"></i>'+error_replace_tags(a[0].error),10,"error",e+"_error",1,["bottom","right"]),setTimeout(function(){theme_message_dismiss(e+"_info")},566),void __f_____ul();setTimeout(function(){__f___u("upd",a[0],1,e,!1,c),tree_update_node()},567)},error:function(e){session.status(e.responseText)}})}if("create_folder"===e){fm_get_current_path();var d=$($v__fm__container_fluid+" #createFolderForm").serialize();theme_modal_dismiss(),$.ajax({type:"POST",url:v___server_extensions_path+"/file-manager/create_folder.cgi?module="+v___module+__f___um()+extra_query(),data:d,dataType:"json",success:function(a){if(setTimeout(function(){theme_message_dismiss(e+"_warning")},566),a[0].error&&a[0].error.length)return plugins.messenger.post('<i class="fa fa-lg fa-fw fa-exclamation-triangle"></i>'+error_replace_tags(a[0].error),10,"error",e+"_error",1,["bottom","right"]),setTimeout(function(){theme_message_dismiss(e+"_info")},566),void __f_____ul();setTimeout(function(){__f___u("upd",a[0],1,e,!1,d),tree_update_node()},567)},error:function(e){session.status(e.responseText)}})}if("create_file"===e){fm_get_current_path();var m=$($v__fm__container_fluid+" #createFileForm").serialize();theme_modal_dismiss(),$.ajax({type:"POST",url:v___server_extensions_path+"/file-manager/create_file.cgi?module="+v___module+__f___um()+extra_query(),data:m,dataType:"json",success:function(a){if(setTimeout(function(){theme_message_dismiss(e+"_warning")},566),a[0].error&&a[0].error.length)return plugins.messenger.post('<i class="fa fa-lg fa-fw fa-exclamation-triangle"></i>'+error_replace_tags(a[0].error),10,"error",e+"_error",1,["bottom","right"]),setTimeout(function(){theme_message_dismiss(e+"_info")},566),void __f_____ul();setTimeout(function(){__f___u("upd",a[0],1,e,!1,m)},567)},error:function(e){session.status(e.responseText)}})}if("url_download"===e){fm_get_current_path();theme_modal_dismiss();var u=$($v__fm__container_fluid+" #downFromUrlForm input:not([name='path'])").serialize();u=u+"&path="+fm_get_current_path(),$.ajax({type:"POST",url:v___server_extensions_path+"/file-manager/http_download.cgi?module="+v___module+__f___um()+extra_query(),data:u,dataType:"json",success:function(a){if(setTimeout(function(){theme_message_dismiss(e+"_info"),theme_message_dismiss(e+"_warning")},566),a[0].error&&a[0].error.length)return plugins.messenger.post('<i class="fa fa-lg fa-fw fa-exclamation-triangle"></i>'+error_replace_tags(a[0].error),10,"error",e+"_error",1,["bottom","right"]),void __f_____ul();plugins.messenger.post('<i class="fa fa-lg fa-fw fa-download"></i>'+a[0].success,2,"success",e+"_success",1,["bottom","right"]),setTimeout(function(){__f___u("upd",a[0],1,e,!1)},567)},error:function(e){const a=xhr_response_text_to_html(e).find("[data-fatal-error-text]");if(a.length){const e=a.html();plugins.messenger.post('<i class="fa fa-lg fa-fw fa-download"></i>'+theme_language("filemanager_download_status_err")+" "+e,15,"error","url_download_info",1,["bottom","right"])}session.status(e.responseText)}})}if("search"===e){fm_get_current_path(),s=$($v__fm__container_fluid+" #searchForm").find('input[name="query"]').val();var p=$($v__fm__container_fluid+" #searchForm").find('input[name="grepstring"]').val(),g=$($v__fm__container_fluid+" #searchForm").find('input[name="grepreplace"]').val(),h=p&&!g?" fa-1_50x fa-file-find":p&&g?" fa-1_50x fa-find-replace":" fa-lg fa-search";s&&s.length&&(s=Convert.htmlEscape(s)),p&&p.length&&(p=Convert.htmlEscape(p)),g&&g.length&&(g=Convert.htmlEscape(g));const a=function(){fm_curr_search_ajax&&4!==fm_curr_search_ajax.readyState&&"function"==typeof fm_curr_search_ajax.abort&&fm_curr_search_ajax.abort()};theme_modal_dismiss(),p&&!g?plugins.messenger.post('<i class="fa fa-1_50x fa-fw fa-file-find"></i>'+theme_language("filemanager_searching_matching").replace("%value",s).replace("%text",p)+"<br>"+theme_language("global_please_wait"),0,"info",e+"_preMe",1,["bottom","right"],a):p&&g?plugins.messenger.post('<i class="fa fa-1_50x fa-fw fa-find-replace"></i>'+theme_language("filemanager_searching_replacing").replace("%value",s).replace("%text",p).replace("%replace",g)+"<br>"+theme_language("global_please_wait"),0,"warning",e+"_preMe",1,["bottom","right"],a):plugins.messenger.post('<i class="fa fa-lg fa-fw fa-search"></i>'+theme_language("filemanager_searching").replace("%value",s)+"<br>"+theme_language("global_please_wait"),0,"info",e+"_preMe",1,["bottom","right"],a);var v=$($v__fm__container_fluid+" .active .dataTables_length select").val();theme_message_dismiss("search_success"),theme_message_dismiss("search_error"),a(),fm_curr_search_ajax=$.ajax({type:"POST",url:v___server_extensions_path+"/file-manager/search.cgi?paginate="+v+"&fsid="+Date.now()+"&module="+v___module,data:$($v__fm__container_fluid+" #searchForm").serialize(),dataType:"json",success:function(a){!function(a){__f___ds_a(),setTimeout(function(){__f___u("upd",a[0],0,"search",!1)},567),theme_message_dismiss("search_preMe");var t=5e3;a[0].totals>1?p&&g?(plugins.messenger.post('<i class="fa fa-fw '+h+'"></i>'+theme_language("filemanager_search_replaced_multi").replace("%value",a[0].totals),4,"success",e+"_success",1,["bottom","right"]),t=9e3):plugins.messenger.post('<i class="fa fa-fw '+h+'"></i>'+theme_language("filemanager_search_founds").replace("%value",a[0].totals),2,"success",e+"_success",1,["bottom","right"]):1==a[0].totals?p&&g?plugins.messenger.post('<i class="fa fa-fw '+h+'"></i>'+theme_language("filemanager_search_replaced"),6,"success",e+"_success",1,["bottom","right"]):plugins.messenger.post('<i class="fa fa-fw '+h+'"></i>'+theme_language("filemanager_search_found"),6,"success",e+"_success",1,["bottom","right"]):plugins.messenger.post('<i class="fa fa-fw '+h+'"></i>'+theme_language("filemanager_search_no_matches"),4,"error",e+"_error",1,["bottom","right"]),setTimeout(function(){theme_message_dismiss("search_preMe")},t)}(a)},error:function(e){session.status(e.responseText)}})}"chmod"===e&&($($v__fm__container_fluid_form).append('<input type="hidden" name="perms" value="'+a[0]+'" class="_o__f_m-tmp-chmod-inputs">'),$($v__fm__container_fluid_form).append('<input type="hidden" name="applyto" value="'+a[1]+'" class="_o__f_m-tmp-chmod-inputs">'),$.ajax({type:"POST",url:v___server_extensions_path+"/file-manager/chmod.cgi?module="+v___module+extra_query(),data:__f___gd(),dataType:"json",success:function(a){__f____success(a,1,1,1,"_o__f_m-tmp-chmod-inputs","fa-exclamation-triangle","filemanager_successful_permissions_with_errors",15,"warning","fa-cogs","filemanager_successful_permissions",2,"success",e)},error:function(e){session.status(e.responseText)}})),"chown"===e&&($($v__fm__container_fluid_form).append('<input type="hidden" name="owner" value="'+a[0]+'" class="_o__f_m-tmp-chown-inputs">'),$($v__fm__container_fluid_form).append('<input type="hidden" name="group" value="'+a[1]+'" class="_o__f_m-tmp-chown-inputs">'),$($v__fm__container_fluid_form).append('<input type="hidden" name="recursive" value="'+a[2]+'" class="_o__f_m-tmp-chown-inputs">'),$.ajax({type:"POST",url:v___server_extensions_path+"/file-manager/chown.cgi?module="+v___module+extra_query(),data:__f___gd(),dataType:"json",success:function(a){__f____success(a,1,1,1,"_o__f_m-tmp-chown-inputs","fa-exclamation-triangle","filemanager_successful_ownership_with_errors",15,"warning","fa-users","filemanager_successful_ownership",2,"success",e)},error:function(e){session.status(e.responseText)}})),"chattr"===e&&($($v__fm__container_fluid_form).append('<input type="hidden" name="label" value="'+a[0]+'" class="_o__f_m-tmp-chattr-inputs">'),$($v__fm__container_fluid_form).append('<input type="hidden" name="recursive" value="'+a[1]+'" class="_o__f_m-tmp-chattr-inputs">'),$.ajax({type:"POST",url:v___server_extensions_path+"/file-manager/chattr.cgi?module="+v___module+extra_query(),data:__f___gd(),dataType:"json",success:function(a){__f____success(a,1,1,1,"_o__f_m-tmp-chattr-inputs","fa-exclamation-triangle","filemanager_successful_attributes_with_errors",15,"warning","fa-tags","filemanager_successful_attributes",2,"success",e)},error:function(e){session.status(e.responseText)}})),"chcon"===e&&($($v__fm__container_fluid_form).append('<input type="hidden" name="label" value="'+a[0]+'" class="_o__f_m-tmp-chcon-inputs">'),$($v__fm__container_fluid_form).append('<input type="hidden" name="recursive" value="'+a[1]+'" class="_o__f_m-tmp-chcon-inputs">'),$.ajax({type:"POST",url:v___server_extensions_path+"/file-manager/chcon.cgi?module="+v___module+extra_query(),data:__f___gd(),dataType:"json",success:function(a){__f____success(a,1,1,1,"_o__f_m-tmp-chcon-inputs","fa-exclamation-triangle","filemanager_successful_secontext_with_errors",15,"warning","fa-tags","filemanager_successful_secontext",2,"success",e)},error:function(e){session.status(e.responseText)}})),"acls"===e&&$.ajax({type:"POST",url:v___server_extensions_path+"/file-manager/acls.cgi?module="+v___module+extra_query()+"&"+a[0],data:__f___gd(),dataType:"json",success:function(a){__f____success(a,1,1,1,"_o__f_m-tmp-acls-inputs","fa-exclamation-triangle","filemanager_successful_acls_with_errors",15,"warning"," fa2 fa-1_15x fa-fw fa2-account-key","filemanager_successful_acls",2,"success",e)},error:function(e){session.status(e.responseText)}}),"compress"===e&&($($v__fm__container_fluid_form).append('<input type="hidden" name="arch" value="'+a[0]+'" class="_o__f_m-tmp-compress-inputs">'),$($v__fm__container_fluid_form).append('<input type="hidden" name="method" value="'+a[1]+'" class="_o__f_m-tmp-compress-inputs">'),$($v__fm__container_fluid_form).append('<input type="hidden" name="arcmove" value="'+(a[2]?1:0)+'" class="_o__f_m-tmp-compress-inputs">'),$($v__fm__container_fluid_form).append('<input type="hidden" name="arcencr" value="'+(a[3]?1:0)+'" class="_o__f_m-tmp-compress-inputs">'),$($v__fm__container_fluid_form).append('<input type="hidden" name="arcencr_val" value="'+a[4]+'" class="_o__f_m-tmp-compress-inputs">'),$($v__fm__container_fluid_form).append('<input type="hidden" name="arkkey" value="'+a[5]+'" class="_o__f_m-tmp-compress-inputs">'),$($v__fm__container_fluid_form).append('<input type="hidden" name="arcencr_pass" value="'+a[6]+'" class="_o__f_m-tmp-compress-inputs">'),$($v__fm__container_fluid_form).append('<input type="hidden" name="gpgpath" value="'+a[7]+'" class="_o__f_m-tmp-compress-inputs">'),__f__ld__bg(),$.ajax({type:"POST",url:v___server_extensions_path+"/file-manager/compress.cgi?module="+v___module+__f___um()+extra_query(),data:__f___gd(),dataType:"json",success:function(t){$($v__fm__container_fluid).find('[name="arcencr_val"]').val(String()).trigger("keyup"),__f____success(t,1,0,1,"_o__f_m-tmp-compress-inputs","fa-exclamation-circle","filemanager_successful_compression_with_errors",15,"warning","fa-file-archive-o","filemanager_successful_compression",2,"success",e,[e,_,a[0]+$('#compressDialog select option[value="'+a[1]+'"]').text()])},error:function(e){session.status(e.responseText)}}))}function format_search_breadcrum(e){var a=extra_query(!1,1);if(e)return a.query?1:0;var t=$('body[class*="'+v___module_file_manager+'"]'),_=(fm_get_current_path(),$($v__fm__container_fluid+" #searchForm").find('input[name="query"]').val()),n=$($v__fm__container_fluid+" #searchForm").find('input[name="grepstring"]').val(),i=$($v__fm__container_fluid+" #searchForm").find('input[name="grepreplace"]').val();a.query&&(_=a.query),n=a.grepstring,t.find(".breadcrumb .fa-folder-root").length?t.find(".breadcrumb .fa-folder-root").removeClass("fa-folder-root").addClass("fa-search text-light fa-sm").parent("a").removeAttr("href").replaceTagName("span"):t.find(".breadcrumb li:first-child a").html('<i class="fa fa-fw fa-sm fa-search text-light"></i>'),t.find(".breadcrumb li:not(:first-child) a").replaceWith(function(){return $("<span>",{html:$(this).html()})}),t.find(".breadcrumb").addClass("searching-a"),t.find(".breadcrumb li").addClass("text-light"),t.find(".breadcrumb li span i.fa-caret-right").remove(),$($v__fm__container_fluid+" .__o__f_m-search-results").remove(),$($v__fm__container_fluid+" .ui_checked_columns.directory_go_up").addClass("hidden"),tree_view_draw(_f__table()),$_br=$($v__fm__container_fluid+" .breadcrumb > li:last-child"),$_br.html($_br.html()+'<span class="__o__f_m-search-results">'+($(".breadcrumb > li:last-child a i").hasClass("fa-search")?"&nbsp;&nbsp;&nbsp;/&nbsp;":"")+'&nbsp;&nbsp;:&nbsp;&nbsp;<span class="text-primary __o__f_m-search-results-data cursor-pointer">`<em><strong class="small">'+Convert.htmlEscape(_)+"</strong>"+(n&&!i?' <strong class="small">['+Convert.htmlEscape(n)+"]</strong>":Convert.htmlEscape(i)?' <strong class="small">['+Convert.htmlEscape(n)+'<span class="smaller"> -> </span>'+Convert.htmlEscape(i)+"]</strong>":"")+'</em>`&nbsp;&nbsp;<i class="fa fa-times-circle fa-0_90x text-danger text-semi-dark text-dark-hoverd"></i></span></span>')}function error_replace_tags(e){return"string"==typeof e?e.replaceAll("[tt]","<tt>").replaceAll("[/tt]","</tt>"):e}function extra_query(e,a,t){var _=String(),n=e||$($v__fm__container_fluid+" .spaginates:visible .active a").attr("href")||$($v__fm__container_fluid+" .dataTables_paginate:visible .active a").text(),i=_,r=_,o=_,s=_,l=_,f=_,c=_,d=_,m=_;if(n){if(n=Convert.uriDecodeComponent(n),i=Convert.htmlUnEscape(URI.parseQuery(URI(n).query()).page)||n,r=Convert.htmlUnEscape(URI.parseQuery(URI(n).query()).query),o=URI.parseQuery(URI(n).query()).regex,s=URI.parseQuery(URI(n).query()).follow,l=URI.parseQuery(URI(n).query()).caseins,f=URI.parseQuery(URI(n).query()).grepstring,c=config_portable_module_filemanager_auto_per_page?fm_adjust_auto_rows_length(null,!1,!0):$($v__fm__container_fluid+" .active .dataTables_length select").val(),d=URI.parseQuery(URI(n).query()).fsid,m=URI.parseQuery(URI(n).query()).exclude,i){i=isNaN(i)?1:i;var u=$($v__fm__container_fluid+" .tab-pane.active").data("previousPageNumber"),p=isNaN(u)?1:parseInt(u);fm_goto_previous&&p>=1&&(i=p),_+="&page="+i}r&&(_+="&query="+r),o&&(_+="&regex="+o),s&&(_+="&follow="+s),l&&(_+="&caseins="+l),f&&(_+="&grepstring="+f),_&&c&&(_+="&paginate="+c),_&&d&&(_+="&fsid="+d),_&&m&&(_+="&exclude="+m),select_all_entries("test")&&"list"!==t&&(_+="&all_items=3")}return _+="&overwrite_efiles="+(fm_overwrite_files?"true":"false"),fm_overwrite_files_mode_reset(),_+="&follow_symlinks="+(fm_follow_symlinks?"true":"false"),a?{page:i,query:r,regex:o,follow:s,caseins:l,grepstring:f,pagnate_number:c,fsid:d,exclude:m}:_}function set_last_tabs(e){localStorage.setItem(v___server_hostname+"-settings_thirdparty_filemanager_last_tab",JSON.stringify(e))}function get_last_tabs(){return JSON.parse(localStorage.getItem(v___server_hostname+"-settings_thirdparty_filemanager_last_tab"))}function no_loading_tabs(){return!$("[data-tab-path]").find(".cspinner-icon").length}function store_last_tab(e){if(no_loading_tabs()&&!initial_fm_load){var a=v___server_username,t=get_last_tabs();$t_uri_virtualmin&&(a+="_"+$('aside [name="dom"]').val());var _={};e||(e=$($v__fm__container_fluid+" .nav.nav-tabs li.active")),_[a]=e.find("[data-tab-path]").attr("data-original-title"),set_last_tabs($.extend({},t,_))}}function table_resize(e){var a=content_page_calc_width()-6-($("[data-tree-view]").is(":visible")?e||$("[data-tree-view]").outerWidth():0),t="data-table-wrap";browser.detect.safari()&&(a-=2),config_portable_module_filemanager_hide_tree_view&&(a+=5),$("["+t+"]").css({"max-width":a,width:a});var _=$("["+t+"]:visible");_&&_.length&&(_.removeClass(),_.hasScrollBar(1)&&_.addClass("margined-bottom-10"))}function tree_resize(e,a){var t=$("[data-tree-view]"),_=t.next(".tree-view-filter"),n=$("form .row + .tree-view + .row"),i=parseInt(localStorage.getItem(v___server_hostname+"-settings_thirdparty_filemanager_tree_width"));!e&&!isNaN(i)&&i>=200&&i<=parseInt(vhTOpx(70))?e=i:e||(e=t.outerWidth()),t.css("width",e),n.css("margin-left",parseInt(e)-10),_.css("width",parseInt(e)),a?setTimeout(table_resize,1):table_resize(parseInt(e))}function tree_view_set(e){var a=$("[data-tree-view]"),t=a.next().find("input"),_=t.parent();a.find(".cspinner.centered-initial").removeClass("centered-initial").find(".cspinner-icon").addClass("smaller"),_.removeClass("hidden-content").append('<span class="fa fa-times-circle vertical-align-middle filter_fancytree_clear text-lighter"><span class="clear_delimiter">|</span></span><span class="fa fa-folder vertical-align-middle filter_fancytree_toggle text-lighter"><span class="clear_delimiter">|</span></span>'),a.find(".cspinner").remove(),$.ui.fancytree.debugLevel=0,$.ui.fancytree.activeVisible=!0,$.ui.fancytree.autoScroll=!0,a.fancytree({source:e,debugLevel:0,scrollParent:a,escapeTitles:!1,extensions:["filter"],quicksearch:!0,filter:{autoApply:!0,autoExpand:config_portable_module_filemanager_tree_expand_search,counter:!0,fuzzy:!1,hideExpandedCounter:!0,hideExpanders:!1,highlight:!0,leavesOnly:!1,nodata:!0,mode:"hide"},autoActivate:!1,activeVisible:!0,autoScroll:!0,keyboard:!0,strings:{loading:"",loadError:"",moreData:"",noData:theme_language("datatable_szerorecords")},toggleEffect:!1,click:function(e,a){$v__fm__tree_node_prog&&($v__fm__tree_node_prog=0,$v__fm__tree_node_sp=0,tree_action(e,a))},icon:function(e,a){if(a.node&&1===a.node.data.link)return"fancytree-icon fancytree-icon-symlink"},dblclick:function(e,a){return tree_action(e,a,1),!1},activate:function(e,a){tree_action(e,a)},init:function(){setTimeout(function(){tree_gset_node()},2)}}),$("body").on("click.fm",".filter_fancytree_clear",function(){$(this).parent().find("input").val("").trigger("keyup"),setTimeout(function(){var e=_f__table();e&&(e.DataTable().draw(!1),tree_view_adjust())},100)}),$("body").on("click.fm",".filter_fancytree_toggle",function(){a.fancytree("getRootNode").visit(function(e){e.setExpanded(!1)}),a.find(".mCSB_container").css("left",0),a.mCustomScrollbar("scrollTo",0,{scrollInertia:100})}),t.keyup(function(e){var a=$(this);"undefined"!=typeof $tree_view_search_timer&&clearTimeout($tree_view_search_timer),$tree_view_search_timer=setTimeout(function(){var t=$.ui.fancytree.getTree(),_=a.val(),n=$(e.target).parent().find(".filter_fancytree_clear");t.filterNodes.call(t,_),_?n.removeClass("text-lighter"):n.addClass("text-lighter")},null!=e.originalEvent?600:0)}),1===e.length&&a.fancytree("getRootNode").visit(function(e){1===e.getLevel()&&e.setExpanded(!0)}),a.mCustomScrollbar({axis:"xy",theme:"minimal-dark",keyboard:!1,scrollButtons:!0,autoHideScrollbar:!1,scrollInertia:100,advanced:{updateOnContentResize:!0}});var n=a.find("[data-resizer]").detach();a.prepend(n),function(){var e=$("[data-tree-view]"),a=e.find("[data-resizer]")[0],t=$("body"),_=$(".panel-heading, .jsPanel, .jsPanel-replacement-container, aside, .mobile-menu-toggler, #right-side-tabs, .right-side-tabs-toggler, .breadcrumb, .btn-group, .ui-fancytree, .tree-view-filter, .data-table"),n="user-select-none cursor-w-resize",i="pointer-events-none-forced",r=function(a){var r=a.pageX-e[0].getBoundingClientRect().left+"px";t.addClass(n),_.addClass(i);var o=parseInt(vhTOpx(70));parseInt(r)<200||parseInt(r)>o||(localStorage.setItem(v___server_hostname+"-settings_thirdparty_filemanager_tree_width",r),tree_resize(r))},o=function(){t.removeClass(n),_.removeClass(i),window.removeEventListener("mousemove",r,!1),window.removeEventListener("mouseup",o,!1)};a&&a.addEventListener("mousedown",function(){window.addEventListener("mousemove",r,!1),window.addEventListener("mouseup",o,!1)},!1)}()}function get_jailed_user(e){var a=fm_user_data;return e?a[e]:0===get_access_level()&&(session.server.data("user")!==a.user&&a.access||session.server.data("user")===a.user&&"0"==a.access&&parseInt(a.access)!==a.uid)}function tree_action(e,a,t){var _=$("[data-tree-view]"),n=0;e.originalEvent&&"object"==typeof e.originalEvent.originalEvent&&(n=1);var i=a.node.key,r="fancytree-loading-node",o=_.next().find("input").val(),s=0===get_access_level(),l=2===get_access_level(),f=3===get_access_level(),c=$($v__fm__container_fluid).find(".fancytree-active"),d=fm_path_check_jailed(i=fm_process_path(i,"decode/unescape"));if(s&&fm_user_data&&fm_user_data.base&&"/"!==fm_user_data.base||(l||f)&&fm_check_chroot()){var m=new RegExp("^"+fm_user_data.base,"");d=d.replace(m,String())}if(n&&(__f____r("get","index.cgi?path="+d,!1,0,!1,n),$("."+r).remove()),($v__fm__tree_node_sp||t)&&n&&c.find(".fancytree-icon").before('<span class="cspinner '+r+'"><span class="cspinner-icon smaller"></span></span>'),$v__fm__tree_node_sp=1,!config_portable_module_filemanager_hide_tree_view&&!o){var u=config_portable_module_filemanager_tree_view_depth;u=0==config_portable_module_filemanager_tree_view_depth?0:parseInt(u),$.ajax({type:"POST",url:v___server_extensions_path+"/file-manager/tree.cgi?module="+v___module+"&d="+u,data:{cpt:i},dataType:"JSON",success:function(e){!e||e.length?(a.node.removeChildren(),a.node.addChildren(e),a.node.toggleExpanded(),tree_view_adjust()):tree_view_adjust()},error:function(e){}})}!a.node.isExpanded()&&a.node.toggleExpanded();var p=a.node.getChildren();p&&p.map(function(e,a){e.isExpanded()&&e.toggleExpanded()})}function tree_get_depth(){var e=parseInt(config_portable_module_filemanager_tree_view_depth),a=session.server.data("user-home"),t=Test.occurrences(fm_process_path(a,"decode"),"/")||1,_=get_access_level();return e+=t,2!==_&&3!==_||!fm_check_chroot()||(e--,2===_&&(e--,e--,e--)),0===_&&e--,e}function tree_view_get(){if(1!=config_portable_module_filemanager_hide_tree_view&&1!==$v__fm__tree){$v__fm__tree=1;var e=tree_get_depth();$.ajax({type:"POST",url:v___server_extensions_path+"/file-manager/tree.cgi?module="+v___module+"&d="+e+"&y=1&e="+(config_portable_module_filemanager_tree_exclude_on_first_load?1:0),data:!1,dataType:"JSON",success:function(e){$($v__fm__container_fluid_form).data("tree",e),load.bundle("jquery.fancytree",1,{tree_view_set:e,tree_view_draw:_f__table()},3)},error:function(e){}})}}function tree_view_draw(e){if(e&&(!e||e.length)){var a=e.parent("div").parent(".row").prev(".tree-view").add("[data-tree-view]"),t=$(".tree-view-filter"),_=a.find(".fancytree-loading-node"),n=e.outerHeight(),i=$("[data-tree-view] .fancytree-container").height(),r=parseInt(vhTOpx(47.52))-8,o=(r=r>320?r:320)-39,s=r+11;_.remove(),(!i||i>n||n<o)&&n<s||t.find("input").val()?(a.css("height",r-0),t.css("margin-top",r+8+-2+0)):(a.css("height",n-0),t.css("margin-top",n+8+-2))}}function tree_view_adjust(){$("[data-tree-view]").height(),$("[data-tree-view]").height();var e=$(".fancytree-active").parent("li"),a=$(".tree-view-filter"),t=e.prev(),_=t.length?t:e,n=fm_process_path(fm_get_current_path(),"decode/unescape"),i=n&&"/"!=n?0:1;if((_.length||i)&&!a.find("input").val()){i&&(_=-2);var r=$("[data-tree-view]");r&&r.length&&_&&_.length&&r.mCustomScrollbar("scrollTo",_,{scrollInertia:100})}}function tree_gset_node(e){var a=$("[data-tree-view]"),t=a.data("ui-fancytree"),_=$(".tree-view-filter");if(!config_portable_module_filemanager_hide_tree_view&&t&&!_.find("input").val()){var n=config_portable_module_filemanager_tree_view_depth,i=fm_get_current_path(),r=fm_process_path(i,"decode/escape"),o=(n=0==config_portable_module_filemanager_tree_view_depth?0:parseInt(n),t=t.getTree(),get_jailed_user()),s=get_jailed_user("home"),l=0===get_access_level(),f=2===get_access_level(),c=3===get_access_level(),d=4===get_access_level();if((fm_user_data&&fm_user_data.allowed_paths&&1===fm_user_data.allowed_paths.length&&(f||c||d)||o)&&(r=(o?s:get_user_home())+r,c&&fm_check_chroot())){var m=new RegExp("/."+get_user_home(),"gi");r=fm_user_data.home.replace(m,"")+r}l&&fm_user_data&&fm_user_data.base&&"/"!==fm_user_data.base&&(r=fm_user_data.base+r);var u=t.getNodeByKey(r);if(e)return[u,t,i];u?u.setActive():a.find(".fancytree-active, .fancytree-selected").removeClass("fancytree-active fancytree-selected"),tree_view_adjust()}}function tree_update_node(){if($v__fm__tree){$(".filter_fancytree_clear").trigger("click");var e=tree_gset_node(1);$v__fm__tree_node_prog=1,e&&e[0]?$(e[0].li).trigger("click"):tree_update_root(1)}}function tree_update_root(e,a){var t=fm_get_current_path(),_=$("[data-tree-view]"),n="ui-fancytree",i=_.data(n),r=_.find("."+n);if(i&&e&&(a||!t||"%2F"==t||t===fm_process_path(get_user_home()))){i=i.getTree(),r.addClass("pointer-events-none");var o=tree_get_depth();$.ajax({type:"POST",url:v___server_extensions_path+"/file-manager/tree.cgi?module="+v___module+"&e="+(config_portable_module_filemanager_tree_exclude_on_first_load?1:0)+"&d="+o,data:!1,dataType:"JSON",success:function(e){if($("[data-tree-view]").length){var a=_.fancytree("getRootNode");a.removeChildren(),a.addChildren(e),r.removeClass("pointer-events-none")}},error:function(e){}})}}function __f___cs(){$($v__fm__container_fluid_form+" table tbody tr").removeClass("m-active")}function __f___ds_a(){select_all_entries("remove"),deselectAllRows(),total_selected_count_update(0,0,1),__f___lb()}function __f__get_fs(e,a){e&&!e.is(":visible")||($($v__fm__container_fluid+" .total_size_data").parent("span").addClass("hidden"),$($v__fm__container_fluid+" .total_size_data").data("total",0),$.each(e||_f__table().dataTable().$("tr.hl-aw",{filter:"applied"}),function(){var e=$(this),t=fm_get_current_path().replace(/%2F$/g,"")+"%2F"+fm_process_escaped_link(e.find("td:nth-child(3) a").attr("data-filemin-link")),_=e.find("td.col-size").html("<label></label>").find("label"),n=_f__table().dataTable().$("tr.hl-aw",{filter:"applied"});_.html('<span class="cspinner csp-size" style="margin-top: 2px; margin-left: 20px;"><span class="cspinner-icon smaller"></span></span>');var i="fm_get_size_"+t;void 0!==window[i]&&"function"==typeof window[i].abort&&window[i].abort(),window[i]=$.ajax({type:"POST",url:v___location_prefix+"/xhr.cgi",data:{"xhr-get_size":1,"xhr-get_size_path":fm_process_path(t,"decode/unescape"),"xhr-get_size_cmodule":v___module_file_manager},dataType:"text",success:function(t){if(session.status(t)){var _=t.split("|"),i=_f__table().DataTable(),r='<span data-toggle="tooltip" data-html="true" data-title="'+theme_language("filemanager_global_size_in_bytes")+"<br>"+_[1]+'">'+_[0]+"</span>";_[1]&&(_[1]=parseInt(_[1].toString().replace(/\s/g,String())));var o,s=e.find("td.col-size");if(s.attr("data-order",_[1]||0),s&&s[0]){var l=i.cell(s[0]);l.length&&l.data(r).invalidate()}o=isNaN(parseInt(_[1]))?0:parseInt(_[1]),$($v__fm__container_fluid+" .total_size_data").data("total",parseInt($(".total_size_data").data("total"))+o),n.find("td.col-size").find("label").find(".cspinner").length||$.ajax({type:"POST",url:v___location_prefix+"/xhr.cgi",data:{"xhr-get_nice_size":1,"xhr-get_nice_size_sum":parseInt($(".total_size_data").data("total"))},dataType:"text",success:function(e){session.status(e)&&($($v__fm__container_fluid+" .total_size_data").text(e),!a&&$($v__fm__container_fluid+" .total_size_data").parent("span").removeClass("hidden"),_f__table()&&_f__table().DataTable().draw(!1))},error:function(e){}})}},error:function(e){}})}))}function __f__c__m(){var e=$($v__fm__container_fluid+" .tab-pane.active form table");$($v__fm__container_fluid+" .tab-pane table").unbind("contextmenu"),e.contextMenu({menuSelector:"#__f__c__m",menuSelectorTriggered:function(e,a){var t=$(e).parents("tr"),_=t.find('td.ui_checked_checkbox input[type="checkbox"]');if(_.length&&!_.is(":checked")&&(__f___ds_a(),_[0].checked=!0,t.addClass("m-active hl-aw"),__r____changed()),$($v__fm__container_fluid+" .tab-pane.active table tbody tr input").length&&0===e.parents("tr").find("input:checked").length){__f___ds_a();var n=e.parents("tr").find("td:first-child input"),i=n.is(":checked");n[0]&&(n[0].checked=!i,n.trigger("change"))}var r="context-o__f_m-dependent",o="data-filemin-link",s="hidden";t.find('td[data-xfile="1"]').length&&fm_is_search_results()?$("."+r+"-goto").removeClass(s):$("."+r+"-goto").addClass(s),t.find('td[data-xfile="0"]').length||fm_is_search_results()?$("."+r+"-open-new-tab").removeClass(s):$("."+r+"-open-new-tab").addClass(s),t.find('td[data-xfile="1"]').length?$("."+r+"-view").removeClass(s):$("."+r+"-view").addClass(s),e.parents("tr").find("i.fa-pencil-square-o").length?$("."+r+"-edit").removeClass(s):$("."+r+"-edit").addClass(s),e.parents("tr").find("a["+o+'$=".acgi"]').length||e.parents("tr").find("a["+o+'$=".htm"]').length||e.parents("tr").find("a["+o+'$=".html"]').length||e.parents("tr").find("a["+o+'$=".htmls"]').length||e.parents("tr").find("a["+o+'$=".htx"]').length||e.parents("tr").find("a["+o+'$=".shtml"]').length||e.parents("tr").find("a["+o+'$=".ssi"]').length?($("li."+r+"-edit").addClass("dropdown-submenu"),$("["+r+'-htmledit="1"]').removeClass(s)):($("li."+r+"-edit").removeClass("dropdown-submenu"),$("["+r+'-htmledit="1"]').addClass(s)),e.parents("tr").find('a[href*="download.cgi"]').length&&$("."+r+"-download").removeClass(s);var l=e.parents("tr").find("td[data-xarchive]").data("xarchive"),f=e.parents("tr").find("td[data-xfile]").data("xfile"),c=e.parents("tr").find("td[data-gpg]").data("gpg"),d=e.parents("tr").find("td[data-img]").data("img"),m=$("."+r+"-preview");d?m.removeClass(s):m.addClass(s);var u=$("."+r+"-encrypt");f?(encryptDecryptModalA(c),u.removeClass(s)):u.addClass(s);var p=$("."+r+"-extract");l?p.removeClass(s):p.addClass(s);var g=function(e){return"#__f__c__m a[data-context-"+e+"]"},h=$($v__fm__container_fluid+' #headln2l  div.btn-group > a[href*="'+v___module_file_manager+'"][href*="index.cgi"]'),v=$(g("back"));h.is(":visible")?v.parent().removeClass("disabled"):v.parent().addClass("disabled");var b=$("#__f__c__m"),w=b.find("li:not([data-go_up-target]):not([data-context-always-keep])"),x=b.find("li.hidden-force");e.hasClass("directory_go_up")?w.addClass("hidden-force"):x.removeClass("hidden-force"),$($v__fm__container_fluid+" .o__f_m-button-compress").hasClass("disabled")?$(g("newarchive")).addClass("disabled").parent("li").addClass("disabled"):$(g("newarchive")).removeClass("disabled").parent("li").removeClass("disabled"),$($v__fm__container_fluid+" .o__f_m-button-copy").hasClass("disabled")?$(g("copy")+", "+g("clipboard")+", "+g("clipboard-selection")).addClass("disabled").parent("li").addClass("disabled"):$(g("copy")+", "+g("clipboard")+", "+g("clipboard-selection")).removeClass("disabled").parent("li").removeClass("disabled"),$($v__fm__container_fluid+" .o__f_m-button-cut").hasClass("disabled")?$(g("cut")).addClass("disabled").parent("li").addClass("disabled"):$(g("cut")).removeClass("disabled").parent("li").removeClass("disabled"),$($v__fm__container_fluid+" .o__f_m-button-paste").hasClass("disabled")?$(g("paste")).addClass("disabled").parent("li").addClass("disabled"):$(g("paste")).removeClass("disabled").parent("li").removeClass("disabled"),check_selected_text()&&!$(g("copy")).hasClass("disabled")?$(g("clipboard-selection")).removeClass("disabled").parent("li").removeClass("disabled"):$(g("clipboard-selection")).addClass("disabled").parent("li").addClass("disabled"),context_menu_toggle_delete_trash("def"),$(".o__f_m-button-delete").hasClass("disabled")?($(g("delete")).addClass("disabled").parent("li").addClass("disabled"),$(g("rename")).addClass("disabled").parent("li").addClass("disabled")):($(g("delete")).parent("li").prev(".divider").removeClass("hidden"),$(g("delete")).removeClass("disabled").parent("li").removeClass("disabled hidden"),$(g("rename")).removeClass("disabled").parent("li").removeClass("disabled")),fm_is_search_results()&&fm_gset_last_row_path(t),f_m__bm__cm(),$($v__fm__container_fluid+" .o__f_m-button-chmod").hasClass("disabled")&&$(".o__f_m-button-chown").hasClass("disabled")?$($v__fm__container_fluid+" .context-properties").addClass("disabled"):$($v__fm__container_fluid+" .context-properties").removeClass("disabled");var y=".Trash"===t.find("td a").first().data("filemin-link")&&(get_user_home()===fm_get_current_path_full("decode")||Object.keys(get_other_users_home_data()).includes(fm_get_current_path_full()));y||fm_path_inside_trash()&&$(g("delete")).parent("li").addClass("hidden").prev(".divider").addClass("hidden"),$(g("delete")).toggleClass("hidden",y),$(g("empty-trash")).toggleClass("hidden",!y),_f__table().dataTable().$("tr.hl-aw",{filter:"applied"}).length?$(g("calculate-selected-size")).parent("li").removeClass("hidden"):$("#__f__c__m a[data-context-calculate-selected-size]").parent("li").addClass("hidden"),$($v__fm__container_fluid+" .o__f_m-button-chmod").hasClass("disabled")?$(g("chmod")).addClass("disabled").parent("li").addClass("disabled"):$(g("chmod")).removeClass("disabled").parent("li").removeClass("disabled"),$($v__fm__container_fluid+" .o__f_m-button-chown").hasClass("disabled")?$(g("chown")).addClass("disabled").parent("li").addClass("disabled"):$(g("chown")).removeClass("disabled").parent("li").removeClass("disabled"),$($v__fm__container_fluid+" .o__f_m-button-chattr").hasClass("disabled")?$(g("chattr")).addClass("disabled").parent("li").addClass("disabled"):$(g("chattr")).removeClass("disabled").parent("li").removeClass("disabled"),$($v__fm__container_fluid+" .o__f_m-button-chcon").hasClass("disabled")?$(g("chcon")).addClass("disabled").parent("li").addClass("disabled"):$(g("chcon")).removeClass("disabled").parent("li").removeClass("disabled"),$($v__fm__container_fluid+" .o__f_m-button-acls").hasClass("disabled")?$(g("acls")).addClass("disabled").parent("li").addClass("disabled"):$(g("acls")).removeClass("disabled").parent("li").removeClass("disabled")},menuSelected:function(e,a,t){$v__fm__global_last_row=e.parents("tr");var _=fm_get_current_path(),n=$v__fm__global_last_row.find("td a").first(),i=fm_process_escaped_link(n.attr("data-filemin-link"),1);actual_path=fm_process_path(n.attr("href")),"1"==a.data("context-goto")&&__f___o_dr($v__fm__global_last_row,fm_get_current_path(),actual_path,!1,1),"1"==a.data("context-open-new-tab")&&__f___nt(actual_path,1),"1"==a.data("context-select-all")&&$($v__fm__container_fluid+' button[onclick="selectAll()"]').trigger("click"),"1"==a.data("context-deselect-all")&&(__f___ds_a(),__r____changed()),"1"==a.data("context-invert-selection")&&$($v__fm__container_fluid+' button[onclick="invertSelection()"]').trigger("click"),"1"==a.data("context-refresh")&&$($v__fm__container_fluid+" button > ."+$__f__rf_s).parent("button").trigger("click"),"1"==a.data("context-newsymlink")&&__f___new_symlink(),"1"==a.data("context-newfile")&&$($v__fm__container_fluid+' a[onclick="createFileDialog()"]').trigger("click"),"1"==a.data("context-newfolder")&&$($v__fm__container_fluid+' a[onclick="createFolderDialog()"]').trigger("click"),"1"==a.data("context-newarchive")&&$($v__fm__container_fluid+' a[onclick="compressDialog()"]').trigger("click"),"1"==a.data("context-upload")&&$($v__fm__container_fluid+' a[onclick="viewReadyForUpload()"]').trigger("click"),"1"==a.data("context-download")&&$($v__fm__container_fluid+' a[onclick="downFromUrlDialog()"]').trigger("click"),"1"==a.data("context-clipboard")&&fm_copy_path_to_clipboard(e),"2"==a.data("context-clipboard-selection")&&theme_copy_to_clipboard(check_selected_text()),"1"==a.data("context-copy")&&$($v__fm__container_fluid+" .o__f_m-button-copy a").trigger("click"),"1"==a.data("context-cut")&&$($v__fm__container_fluid+" .o__f_m-button-cut a").trigger("click"),"1"==a.data("context-paste")&&$($v__fm__container_fluid+" .o__f_m-button-paste a").trigger("click");var r=a;r.is("span")&&(r=r.parent());"1"==r.data("context-delete")&&(fm_deletion_type="1"==r.data("context-delete-trash")||-1,$($v__fm__container_fluid+" .o__f_m-button-delete").trigger("click"),(fm_deletion_to_trash&&!fm_deletion_type||fm_deletion_type&&!fm_deletion_to_trash)&&(~~fm_deletion_type!==~~fm_deletion_to_trash&&localStorage.setItem(v___server_hostname+"-"+v___server_username+"-context-alt",1),r.find(".extra-key-label").remove())),"1"==r.data("context-empty-trash")&&(fm_deletion_empty_trash=1,setTimeout(function(){fm_deletion_empty_trash=0},1),$($v__fm__container_fluid+" .o__f_m-button-delete").trigger("click"));var o=e.parents("tr").find("img").parent("a").parent("td").next("td").find("a").attr("data-filemin-link");if("1"==a.data("context-preview-image")?image_preview(o,0):"2"==a.data("context-preview-image")?image_preview(o,1):"3"==a.data("context-preview-image")&&image_preview(o,0,1),"1"==a.data("context-bookmarks")&&(fm_is_search_results()?__f____a("bookmark",[fm_gset_last_row_path(e.parents("tr"))]):$($v__fm__container_fluid+' a[href^="bookmark.cgi"]').trigger("click")),"1"!=a.data("context-back")){if("1"==a.data("context-search")&&$($v__fm__container_fluid+' a[onclick="searchDialog()"]').trigger("click"),"1"==a.data("context-view")){var s=!$v__fm__global_last_row.find('a[href*="edit_file.cgi"]').length,l="1"==a.data("context-view-reverse"),f="1"==a.data("context-view-head"),c="1"==a.data("context-view-tail");fm_target_spinner_add($v__fm__global_last_row),edit_file(i,decodeURIComponent(fm_get_current_path()),!1,1,s,l,f,c)}if("1"==a.data("context-edit")||"1"==a.attr("context-o__f_m-dependent-htmledit")){var d=e.parents("tr"),m=d.find('a[href^="edit_file.cgi?"]');fm_target_spinner_add(d),"1"==a.attr("context-o__f_m-dependent-htmledit")&&d.data("htmledit",1),d.addClass("m-active"),m.trigger("click")}if("1"==a.data("context-rename")&&e.parents("tr").find('a[onclick^="renameDialog("]').trigger("click"),"1"==a.data("context-download-file")){var u=e.parents("tr").find('td a[href*="download.cgi?"]'),p=select_all_entries("test")?get_current_list_stats()[0]:__f__cnt___selected();1===__f__cnt___selected()&&u.length?window.location.replace(v___server_extensions_path+"/file-manager/download.cgi?download=2&filename="+uri_parse_param2("file",u.attr("href"))+"&path="+fm_get_current_path()+extra_query()):__f__dw__dir(p)}"1"==a.data("context-encrypt")&&$("#encryptDecrypt").modal("show"),"1"==a.data("context-extract")&&e.parents("tr").find('a[href^="extract.cgi?"]').trigger("click"),"1"==a.data("context-extract-encrypted")&&$($v__fm__container_fluid+" #extractEncrypted.modal").modal("show"),"1"==a.data("context-calculate-selected-size")&&__f__get_fs(),"1"!=a.data("context-properties")&&"1"!=a.data("context-getinfo")||fm_get_file_info(_,i,e.parents("tr")),"1"==a.data("context-chmod")&&$($v__fm__container_fluid+' a[onclick="chmodDialog()"]').trigger("click"),"1"==a.data("context-chown")&&$($v__fm__container_fluid+' a[onclick="chownDialog()"]').trigger("click"),"1"==a.data("context-chattr")&&$($v__fm__container_fluid+' a[onclick="chattrDialog()"]').trigger("click"),"1"==a.data("context-chcon")&&$($v__fm__container_fluid+' a[onclick="chconDialog()"]').trigger("click"),"1"==a.data("context-acls")&&$($v__fm__container_fluid+' a[onclick="aclsDialog()"]').trigger("click")}else $($v__fm__container_fluid+' #headln2l div.btn-group > a[href*="'+v___module_file_manager+'"][href*="index.cgi"]:visible').trigger("click")}})}function __f___up__tb_sort(e){if(!$.isEmptyObject(fm_stored_sorting)&&fm_stored_sorting[e]){var a=fm_stored_sorting[e],t=a.sort,_=a.holder;if(_&&t){var n=$("[data-head-"+_+"]").parent("th").index();if(n)return[n,t]}}if("0"!=config_portable_module_filemanager_default_sort){var i=config_portable_module_filemanager_default_sort,r=Test.strContains(i,"--")?1:0;return i=i.replace("--",""),r?[[$("[data-head-"+i+"]").parent("th").index(),"desc"]]:[[$("[data-head-"+i+"]").parent("th").index(),"asc"]]}return[]}function __f___u(e,a,t,_,n,i){var r=a.rows,o=a.pagination,s=a.pagination_limit,l=a.pagination_text,f=a.total;if("object"==typeof n){var c=n[1],d=n[2],m=n[3];n=n[0]}else c=!0;if("config.cgi"!=v___location_file){var u=0,p=null,g=null,h=null,v=null,b=fm_get_current_path(),w="data-table-wrap";fm_stored_listing.previous.set(),void 0===f&&(f=!1),p=void 0!==n&&(void 0===n||!1!==n);var x=$v__fm__container_fluid+" .tab-pane.active";$(x).length||(x=$v__fm__container_fluid+" .tab-pane:first-child"),g=p?$v__fm__container_fluid+' .tab-pane[id="tab-'+n+'"] form table':x+" form table",h=p?$v__fm__container_fluid+' .tab-pane[id="tab-'+n+'"]':x;var y=$(h).attr("id"),k=(v=(v=!!y&&y.replace(/^\D+/g,""))||1,$("body.file-manager").find(g).attr("id")),C=k?parseInt(k.replace(/^\D+/g,"")):"none",T=$(g).find(".hl-aw"),D=T.next().index()>0?T.next().index():$(g).find("tr:visible").last().index();if(!p&&"none"!==C&&$($v__fm__container_fluid+" #DataTables_Table_"+C).dataTable().fnDestroy(),"upd"===e){var S=$(r).find(".fa-font").first().parents("td").index();$(g).addClass("___f_m__q__"),$("body.file-manager").find(g+" tbody").empty().append(r),vars.h.selector.content.get()[0].scrollTop=0,table_proc_size_columns(),!c&&$(h).data("totalValue",m).data("breadcrumb",$($v__fm__container_fluid+" .breadcrumb").clone()),f&&!d&&__f__upd_____tl($(f).text()),page_radios_evolve(),$("._select-unselect_").parent(".awcheckbox").remove(),__f_____ul()}else S=$(g).find(".fa-font").first().parents("td").index();var j,F=function(e){var a=v___module_file_manager;return v___location_prefix&&(a=v___location_directory_unslashed),localStorage["DataTables_DataTables_Table_"+C+"_/"+a+e]},P=F("/")||F("/index.cgi")||F(String());j=!!P&&JSON.parse(P),check_pagination_option();var E=j&&j.length?j.length:config_portable_module_filemanager_records_per_page;s&&(E=s),E||(E=20),3!=S&&4!=S&&(S=!1),$(g).unbind("click.fmx"),$(g).on("click.fmx",'a .fa.fa-pencil-square-o, a[href^="edit_file.cgi"]',function(e){e.preventDefault(),e.stopPropagation(),(e=jQuery.Event("keydown")).which=115,$("body.file-manager").trigger(e)});var I=$(h).data("previousPageNumber");isNaN(I)||parseInt(I-1);window["_f__table"+v]=$(g).dataTable({order:[],aaSorting:[],bDestroy:!0,pageLength:E,infoCallback:function(e,a,t,_,n,i){return function(e,a){var t=$(e.nTableWrapper).find(".dataTables_info"),_=(a||t.text()).match(/[0-9]+(,[0-9]+)*/g);if(t&&t.length&&null!=_&&_[0]&&_[1]&&_[2]){var n=theme_language("datatable_sinfo").replace("_START_",Convert.nice_number(_[0])).replace("_END_",Convert.nice_number(_[1])).replace("_TOTAL_",Convert.nice_number(_[2]));if(a)return n;t.text(n)}}(e,i)},preDrawCallback:function(){var e=$(g);if(1==config_portable_module_filemanager_hide_actions){var a=$($v__fm__container_fluid+" .tab-pane.active form table"),t=a.find(".fa-font"),_=a.find(".fa-i-cursor"),n=t.length?t.parents("td").index():_.parents("td").index();n>1&&($(g+" thead th").eq(n).addClass("hidden"),e.find(".fa-font").length?e.find(".fa-font").parents("td").addClass("hidden"):e.find(".fa-i-cursor").parents("td").addClass("hidden"))}var i=e.parent("div").parent(".row");0===i.prev(".tree-view").length&&(i.before('<div class="tree-view"></div>'),config_portable_module_filemanager_hide_tree_view&&i.prev(".tree-view").addClass("hidden")),config_portable_module_filemanager_auto_per_page&&fm_adjust_auto_rows_length(this,!0)},fnDrawCallback:function(e){u&&(fm_stored_listing.previous.set(),fm_stored_listing.store(fm_get_current_path())),$($v__fm__container_fluid+" .tab-pane .paginate_button.previous > a").html('<i class="fa fa-fw fa-angle-left"></i>').css("border-top-left-radius","0").css("border-bottom-left-radius","0"),$($v__fm__container_fluid+" .tab-pane .paginate_button.next > a").html('<i class="fa fa-fw fa-angle-right"></i>').css("border-top-right-radius","0").css("border-bottom-right-radius","0"),$(g).find(".fa-font").removeClass("fa-font").addClass("fa-i-cursor").css("margin-right","5px").css("margin-left","5px"),$(g).find(".fa-external-link").removeClass("fa-external-link").addClass("fa-extract-archive").css("margin-right","5px").css("margin-left","5px"),$(g).find(".fa-edit").addClass("fa-pencil-square-o").css("margin-right","7px").css("margin-left","7px"),$(g).find(".fa-arrow-right").removeClass("fa-arrow-right").addClass("fa-folder-open-o").parent("a").addClass("o__f_m-follow-file"),e.fnRecordsTotal()<=e._iDisplayLength?$(h+" .dataTables_paginate:not(.spaginates)").hide():$(h+" .dataTables_paginate:not(.spaginates)").show(),$.each($(g+" tbody tr:not('.row-filesize-done') td"),function(){/((\d+(\s+)|\d+\.\d+(\s+)))(TB|GB|MB|KB|Byte|Bytes|ТБ|ГБ|МБ|КБ|Байт)|(Unlimited|Ubegrenset|Nielimitowane|Ilimitado|无限制|Не ограничено|No Limit|Same as admin)/i.test($(this).text())&&$(this).index()>1&&(list_form_table_file_size=$(this).index())}).promise().done(function(){"undefined"!=typeof list_form_table_file_size&&$.each($(g+" tbody tr:not('.row-filesize-done') td"),function(){$(this).parent("tr").find('img[src$=".png"]').length&&$(this).parent("tr").find("td").eq(list_form_table_file_size),($(this).parent("tr").find('img[src$="inode-directory.png"]').length||$(this).parent("tr").find('img[src$="inode-symlink.png"]').length||$(this).parent("tr").find('img[src$="inode-mount-point.png"]').length)&&$(this).parent("tr").find("td").eq(list_form_table_file_size).find("label").text("")}).promise().done(function(){$(g+" thead th").eq(list_form_table_file_size).css("min-width","51px")})}),$(g+" ._select-unselect_, "+g+" #select-unselect").parents("th").css("opacity",0).addClass("pointer-events-none"),$($v__fm__container_fluid+" .breadcrumb").removeClass("searching-a"),__init__dt_ck__e(),$(".__o__f_m-search-results-data:visible").length||(b?f__insert_dir_up():d&&"/"!=d&&"%2F"!=d&&!$(g+" tbody tr.directory_go_up").length&&$(g+" tbody").prepend('<tr class="ui_checked_columns directory_go_up" style="height: 23px;"><td colspan="'+$($v__fm__container_fluid+" .active thead tr th:visible").length+'"><input class="hidden" type="hidden">&nbsp;<i class="fa fa-fw fa-folder-btl"></i>&nbsp;..</td></tr>')),$($v__fm__container_fluid+" .active td.dataTables_empty").length?$($v__fm__container_fluid+" tr.directory_go_up").trigger("mouseover"):$($v__fm__container_fluid+" tr.directory_go_up").removeClass("hidden"),tree_view_draw($(g)),select_all_entries("test")?(selectAll(),select_all_entries()):select_all_entries("test_unconf")&&select_all_entries("remove"),a.flush&&deselectAllRows(),a.flush_reset&&__f___ds_a(),table_resize()},initComplete:function(){c&&__f___up__d("index.cgi?path="+fm_process_path(d||b),n,!1),!c&&__f___upd___tb(d,n),!c&&__f___up__tb_store(),0!=p&&c&&$($v__fm__container_fluid+' a[href="#tab-'+n+'"]').attr("newly-created","1").trigger("click"),config_portable_module_filemanager_auto_per_page||$(h+' select[name^="DataTables_Table"][name$="_length"]').val(E).change(),this.fnSort(__f___up__tb_sort(v)),$(g+" tbody").on("mouseout","tr",function(e){__f___cs()}).on("mouseover","tr",function(e){$v__fm__tr_hover_active&&$(this).addClass("m-active")}),(0===t||1===$(g+" tbody tr").length&&$(g+" tbody tr td.dataTables_empty").length)&&page.render.content.filter.clear(),$(g)&&!$(g).parent().is("["+w+"]")&&($(g).wrap("<div "+w+"></div>"),tree_resize());var e=$(h+" table").parents(".row").next(".row").find(".col-sm-7"),r=$(h+" table").parents(".row").next(".row").find(".col-sm-5").find(".dataTables_info");if(o&&o.length)e.html(o),r.text(l);else if(!o){fm_stored_listing.store();var s=fm_stored_listing.test();s&&(fm_goto_previous||i||_)&&this.fnPageChange(s-1)}var f=fm_goto_previous;fm_goto_previous=0,a.searched&&format_search_breadcrum(),a.flush&&select_all_entries("remove"),setTimeout(function(){f_m__bm__c(),u=1},300),fm_check_goback(),$v__fm__tr_hover_active=0,setTimeout(function(){$v__fm__tr_hover_active=1},400);var m="m-active",x=m+"-o";if("create_folder"===_||"create_file"===_||"rename"===_||"delete"===_||"string"==typeof f){var y=Convert.serialized_to_json(f||i);if(y){var k=m+"-n";if("delete"===_){var C=$(g).find("tr:visible:nth-child("+D+")");setTimeout(function(){$(g).find("tr."+m).removeClass(m),setTimeout(function(){C.addClass(m)},1)},2)}else{var T=Convert.htmlEscape(y.name);if(T){var S=$(g).find('td.col-name > a[data-filemin-link="'+T.replaceAll("\\","\\\\")+'"]').parent("td").parent("tr");if(S&&S.length){var j=$(g).find("tr."+m);j.addClass(x).removeClass(m),S.addClass(m+" "+(f?String():k)),S.one("mousemove mouseover",function(){S.removeClass(k),j.removeClass(x)}),j.one("mousemove",function(){$(this).removeClass(x),S.removeClass(m)});var F=$(g+" tr"),P="mouseover.singlefm";F.one(P,function(e){$(this).is(S)||$(this).addClass(x).removeClass(m),$(this).one("mousemove",function(e){$(this).removeClass(x),S.removeClass(m)}),F.unbind(P)})}"create_file"===_&&edit_file(Convert.htmlUnEscape(T),decodeURIComponent(fm_get_current_path()))}}}}else{var I=$(document.body),z=jQuery.Event("keydown.fm");z.which=36,I.trigger(z),z.which=38,I.trigger(z)}},bInfo:!0,destroy:!0,oLanguage:{sEmptyTable:theme_language("datatable_semptydirectory"),sInfo:l||theme_language("datatable_sinfo"),sInfoEmpty:theme_language("datatable_sinfoempty"),sLengthMenu:theme_language("datatable_slengthmenu"),sLoadingRecords:theme_language("datatable_sloadingrecords"),sProcessing:theme_language("datatable_sprocessing"),sSearch:" ",sZeroRecords:theme_language("datatable_szerorecords")},conditionalPaging:!0,columnDefs:[{orderable:!1,targets:[0,1,S||0]},{width:"32px",targets:0},{width:"64px",targets:1},{width:"90%",targets:2}],fixedColumns:!0,bStateSave:!0,bPaginate:E,aLengthMenu:[[5,10,15,20,25,30,35,40,45,50,55,60,70,80,90,100,250,500],[5,10,15,20,25,30,35,40,45,50,55,60,70,80,90,100,250,500]],dom:"<'row'<'col-sm-6'l><'col-sm-6'fB>><'row'<'col-sm-12'tr>><'row'<'col-sm-5'i><'col-sm-7'p>>",buttons:[{extend:"csvHtml5",charset:"utf-8",exportOptions:{columns:":visible",format:{body:function(e,a,t,_){return e=Convert.htmlRemoveHiddenElements(e),e=Convert.htmlRemoveByClassName(e,"btn"),Convert.htmlStrip(e)}}}}]}).off("click.fmdt").on("click.fmdt","thead th.sorting",function(e){if(void 0!==e.originalEvent){var a="ascending"===$(this).attr("aria-sort")?"asc":"desc",t=$(this).children("span").data();if(!$.isEmptyObject(t)&&Object.keys(t)){var _=Object.keys(t)[0];_&&_.toString().startsWith("head")&&(_=_.toString().toLowerCase().replace(/^head/,""),fm_stored_sorting[v]={sort:a,holder:_})}}}),setTimeout(function(){theme_title_generate()},0),setTimeout(function(){store_last_tab()},2),tree_gset_node(),$($v__fm__container_fluid+' div button[onclick="removeDialog()"]').addClass("disabled o__f_m-button-delete").removeAttr("onclick"),$($v__fm__container_fluid+' a[onclick="chmodDialog()"]').removeAttr("onclick").parent("li").addClass("disabled o__f_m-button-chmod"),$($v__fm__container_fluid+' a[onclick="chownDialog()"]').removeAttr("onclick").parent("li").addClass("disabled o__f_m-button-chown"),$($v__fm__container_fluid+' a[onclick="chattrDialog()"]').removeAttr("onclick").parent("li").addClass("disabled o__f_m-button-chattr"),$($v__fm__container_fluid+' a[onclick="chconDialog()"]').removeAttr("onclick").parent("li").addClass("disabled o__f_m-button-chcon"),$($v__fm__container_fluid+' a[onclick="aclsDialog()"]').removeAttr("onclick").parent("li").addClass("disabled o__f_m-button-acls"),$($v__fm__container_fluid+' a[onclick="compressDialog()"]').removeAttr("onclick").parent("li").addClass("disabled o__f_m-button-compress"),$($v__fm__container_fluid+' a[onclick="copySelected()"]').removeAttr("onclick").parent("li").addClass("disabled o__f_m-button-copy"),$($v__fm__container_fluid+" li.o__f_m-button-copy").addClass("disabled"),$($v__fm__container_fluid+' a[onclick="cutSelected()"]').removeAttr("onclick").parent("li").addClass("disabled o__f_m-button-cut"),$($v__fm__container_fluid+" li.o__f_m-button-cut").addClass("disabled"),localStorage.getItem(v___server_hostname+"-copy")||localStorage.getItem(v___server_hostname+"-cut")?$($v__fm__container_fluid+' a[onclick*="paste.cgi"]').removeAttr("onclick").parent("li").addClass("o__f_m-button-paste"):$($v__fm__container_fluid+' a[onclick*="paste.cgi"]').removeAttr("onclick").parent("li").addClass("disabled o__f_m-button-paste");var z=a&&a.error&&a.error.length;if("extract"===_){var A=theme_language("filemanager_successful_extraction");theme_message_exists(_+"_warning")?theme_message_dismiss(_+"_info"):!z&&plugins.messenger.post('<i class="fa fa-lg fa-fw fa-file-archive-o"></i>'+A,2,"success",_+"_info",1,["bottom","right"])}if("delete"===_){var q="";if(fm_deletion_to_trash&&fm_deletion_to_trash.home||fm_deletion_empty_trash_previous){var O=fm_deletion_to_trash.home||fm_deletion_empty_trash_previous;q=!0===O?".Trash":O&&O.includes(session.server.data("user-home"))?"~/.Trash":Convert.htmlEscape(O)+"/.Trash"}!theme_message_exists(_+"_info")&&plugins.messenger.post('<i class="fa fa-lg fa-fw fa-trash'+(fm_deletion_empty_trash_previous?" fa2 fa2-trash-empty-o":fm_deletion_to_trash?"":"-o")+'"></i>'+theme_language("filemanager_successful_"+(fm_deletion_empty_trash_previous?"emptying_trash":fm_deletion_to_trash?"removal":"deletion")).replace("$1",q),2,"success",_+"_info",1,["bottom","right"])}if("paste"===_&&setTimeout(function(){theme_message_dismiss(_+"_info")},564),"rename"===_&&!theme_message_exists(_+"_success")&&plugins.messenger.post('<i class="fa fa-lg fa-fw fa-i-cursor"></i>'+theme_language("filemanager_successful_rename").replace("%from",Convert.htmlEscape($('#renameForm input[name="file"]').val())).replace("%to",Convert.htmlEscape($('#renameForm input[name="name"]').val())),2,"success",_+"_info",1,["bottom","right"]),"create_folder"===_&&!theme_message_exists(_+"_success")&&plugins.messenger.post('<i class="fa fa-lg fa-fw fa-folder"></i>'+theme_language("filemanager_successful_directory_creation").replace("%value",Convert.htmlEscape($('#createFolderForm input[name="name"]').val())),2,"success",_+"_info",1,["bottom","right"]),"create_file"===_&&!theme_message_exists(_+"_success")&&plugins.messenger.post('<i class="fa fa-lg fa-fw fa-file"></i>'+theme_language("filemanager_successful_file_creation").replace("%value",Convert.htmlEscape($('#createFileForm input[name="name"]').val())),2,"success",_+"_info",1,["bottom","right"]),"encrypt"===_||"decrypt"===_){A=theme_language("filemanager_crypt_"+_+"ed");var U="fa-key-plus";"decrypt"===_&&(U="fa2 fa2-key-minus"),theme_message_exists(_+"_warning")?theme_message_dismiss(_+"_info"):!z&&plugins.messenger.post('<i class="fa fa-lg fa-fw '+U+'"></i>'+A,2,"success",_+"_info",1,["bottom","right"])}_&&_.toString().startsWith("purge_trash_")&&(theme_message_dismiss(_+"_info"),plugins.messenger.post('<i class="fa fa-lg fa-fw fa2 fa2-trash-empty-o"></i>'+theme_language("filemanager_"+_+"_end").replace("$1","<tt>"+(0===get_access_level()?session.server.data("user-home"):"~")+"/.Trash</tt>"),2,"success",_+"_success",1,["bottom","right"]))}}function fm_bookmark_searched(){return fm_is_search_results()&&null!==fm_bookmark_searched_str?fm_bookmark_searched_str:0}function f_m__bm__cm(){var e=fm_bookmark_searched()||fm_get_current_path();e=void 0!==e&&(e.length?e:"/"),$($v__fm__container_fluid+" .btn-group > .at-o__f_m-favorites-dropdown").find('li a[href*="index.cgi?path="]').filter(function(){return fm_process_path($(this).text())===fm_process_path(e)}).length?$("#__f__c__m").find(".fa-star-o").addClass("fa-star").removeClass("fa-star-o"):$("#__f__c__m").find(".fa-star").removeClass("fa-star").addClass("fa-star-o"),setTimeout(function(){$(".file-manager-remove-bookmark").length||$.each($('.dropdown-menu.at-o__f_m-favorites-dropdown > li:not(.data-context-bookmarks) > a:not([href^="bookmark.cgi"])'),function(e,a){$(this).prepend('<i class="fa fa-fw fa-minus-circle pull-right file-manager-remove-bookmark"></i>')});var e=$(".btn-group .dropdown-menu.at-o__f_m-favorites-dropdown > li"),a=e.find('a[href]:not([href^="bookmark.cgi"], [href="#"])');e.find(".no_effect").parent("li").remove(),a.length?$(".bm_e__me").remove():($(".bm_e__me").remove(),e.parent("ul").append('<li class="bm_e__me"><span class="bm_e__me_l">'+theme_language("filemanager__no_bookmarks")+"</span></li>"))},0)}function f_m__bm__c(){var e=fm_bookmark_searched()||fm_get_current_path();e=void 0!==e&&(e.length?e:"/"),$.each($(".btn-group > .at-o__f_m-favorites-dropdown").find('li a[href*="index.cgi?path="]'),function(){if(uri_parse_param2("path",$(this).attr("href"))==e)return $(this).parents(".at-o__f_m-favorites-dropdown").find('a[href^="bookmark.cgi?path="]').html('<i class="fa fa-fw fa-star" aria-hidden="true">&nbsp;&nbsp;</i>'+theme_language("filemanager_unbookmark")),!1;$(this).parents(".at-o__f_m-favorites-dropdown").find('a[href^="bookmark.cgi?path="]').html('<i class="fa fa-fw fa-star-o" aria-hidden="true">&nbsp;&nbsp;</i>'+theme_language("filemanager_bookmark"))}).promise().done(function(){setTimeout(function(){f_m__bm__cm()},100)})}function f_m__bm__u(e){var a=fm_bookmark_searched()||fm_get_current_path();e&&(a=e),a=void 0!==a?a.length?a:"%2F":"";var t=$(".file-manager .btn-group > .at-o__f_m-favorites-dropdown").find('li a[href*="index.cgi?path="]').filter(function(){return fm_process_path(uri_parse_param2("path",$(this).attr("href")))===fm_process_path(a)}),_=!e||e&&fm_get_current_path()===e;return t.length?(_&&t.parents(".at-o__f_m-favorites-dropdown").find('a[href^="bookmark.cgi?path="]').html('<i class="fa fa-fw fa-star-o" aria-hidden="true">&nbsp;&nbsp;</i>'+theme_language("filemanager_bookmark")),t.parent("li").remove()):(!e&&$($v__fm__container_fluid+" .btn-group > .at-o__f_m-favorites-dropdown").find('a[href^="bookmark.cgi?path="]').html('<i class="fa fa-fw fa-star" aria-hidden="true">&nbsp;&nbsp;</i>'+theme_language("filemanager_unbookmark")),$("body.file-manager").find("ul.dropdown-menu.at-o__f_m-favorites-dropdown").append('<li><a href="index.cgi?path='+fm_process_path(a)+'" style="padding-left: 12px;"><i class="fa fa-fw fa-minus-circle pull-right file-manager-remove-bookmark"></i>'+fm_process_path(a,"escape/decode")+"</a></li>")),f_m__bm__cm(),t}function __f___upd___cr(e,a){var t=$("body.file-manager"),_="";t.find(".breadcrumb").empty(),0!=get_access_level()&&1!=get_access_level()||get_jailed_user()?t.find(".breadcrumb").append('<li class="fm___root__"><a href="index.cgi?path="><i class="fa2 fa2-home-outline text-light"></i></a></li>'):t.find(".breadcrumb").append('<li class="fm___root__"><a href="index.cgi?path="><i class="fa fa-folder-root"></i></a></li>'),$.each($(e),function(e,a){if(_+=""!=a?"/"+a:"",""!=a){var n=_.replace(a,""),i=fm_process_path(_);3===get_access_level()&&(n=get_user_home()+n);var r='<i data-path="'+Convert.encodeURIComponentConsistent(n)+'" class="fa fa-fw fa-lg fa-caret-right margined-left-4"></i>';t.find(".breadcrumb").append('<li><a href="index.cgi?path='+i+'">'+Convert.htmlEscape(a)+r+"</a></li>")}}).promise().done(function(){$.isEmptyObject(a)?$($v__fm__container_fluid+" .breadcrumb li:first-child").find(".fa.fa-keyboard-o").length||$($v__fm__container_fluid+" a.popover-path").length||($($v__fm__container_fluid+" .breadcrumb li:first-child").prepend('<a class="fa fa-fw fa-keyboard-o popover-path" style="position: absolute; margin-left: -12px; margin-top: 4px; font-size: 80%;" data-container="body" data-animation="false" data-toggle="popover-path" data-placement="'+(1!=config_portable_module_filemanager_hide_toolbar?"auto right":"auto left")+'" data-html="true" data-trigger="click" data-content=\'<div class="form-horizontal"> <div class="input-group input-group-sm"> <span class="input-group-addon"><i class="fa fa-fw fa-folder-open-o"></i></span><input type="text" spellcheck="false" class="form-control popover-path-input" placeholder="'+theme_language("filemanager_manual_path")+'"> <span class="input-group-btn" style="width:0;"> <button class="btn btn-sm btn-default popover-path-button" type="button"><i class="fa fa-fw fa-chevron-circle-right text-lighter"></i><span class="cspinner hidden" style="margin-top: 2px; margin-left: -17px;"><span class="cspinner-icon small"></span></span></button> </span> </div> </div>\'></a>'),1!=config_portable_module_filemanager_hide_toolbar&&($($v__fm__container_fluid+" .fa.fa-keyboard-o.popover-path").detach().appendTo(".breadcrumb li:last-child"),$($v__fm__container_fluid+" .fa.fa-keyboard-o.popover-path").css("margin-left","2px")),$($v__fm__container_fluid+' [data-toggle="popover-path"]').popover({sanitize:!1})):(t.find(".breadcrumb li a").removeAttr("href").replaceTagName("span"),t.find(".breadcrumb li:last-child span").after($(a[0])),t.find(".breadcrumb li:first-child").replaceWith('<li class="fm___root__ text-light"><span><i class="fa fa-search text-light"></i></span></li>'),$($v__fm__container_fluid+" div.total").html(a[1]))})}function get_active_tab_id(){return parseInt($(".data-content-container .nav.nav-tabs li.active a").attr("href").replace("#tab-",""))}function __f___upd___tb(e,a){e&&e.startsWith("%2F")&&(e=decodeURIComponent(e));var t=e.replace(/\/$/,"").split("/").slice(-1)[0];t=t||"/",a?($($v__fm__container_fluid+' li a[href="#tab-'+a+'"] span[data-tab-path]').text(t).attr("data-original-title",e?Convert.htmlEscape(e):"/"),$("#file-manager-new-instance").removeClass("disabled").find("span.cspinner").parent("span").replaceWith('<i class="fa fa-plus"></i>')):$($v__fm__container_fluid+" li.active a span[data-tab-path]").text(t).attr("data-original-title",e?Convert.htmlEscape(e):"/")}function __f___up__tb_store(){if(!page.handle.content.preloader.show(-1)){var e=[],a=v___server_username;$t_uri_virtualmin&&(a+="_"+$('aside [name="dom"]').val()),$($v__fm__container_fluid+" .nav.nav-tabs li a span[data-original-title]").each(function(a,t){var _=fm_process_path($(t).attr("data-original-title").replace(/\/$/,""),"unescape"),n=_||"%2F";e.push(n)}).promise().done(function(){var t={};t[a]=e;var _=JSON.parse(localStorage.getItem(v___server_hostname+"-settings_thirdparty_filemanager_remembered_tabs"));$.isEmptyObject(_)||delete _[a];var n=$.extend({},t,_);localStorage.setItem(v___server_hostname+"-settings_thirdparty_filemanager_remembered_tabs",JSON.stringify(n))})}}function __f___ld__tb_stored_chk(){var e=JSON.parse(localStorage.getItem(v___server_hostname+"-settings_thirdparty_filemanager_remembered_tabs")),a=v___server_username;return $t_uri_virtualmin&&(a+="_"+$('aside [name="dom"]').val()),!$.isEmptyObject(e)&&e[a]}function __f___ld__tb_stored(){var e=__f___ld__tb_stored_chk(),a=fm_extract_path(v___location.href),t=null,_=[],n=0;$.isArray(e)&&$.each($(e),function(e,i){null===t&&a===i&&(t=e),a!==i&&i&&!_.includes(i)&&(_.push(i),setTimeout(function(){__f___nt(i,!1,!1,!0),n||(n++,__f___up__tb_vis(),setTimeout(function(){if(t>0){var e=".nav.nav-tabs li:nth-child",a=$($v__fm__container_fluid+" "+e+"(1)"),_=$($v__fm__container_fluid+" "+e+"("+(t+1)+")");_.length&&(a=a.detach(),_.after(a)),t=!1}},2*e+11))},2*e+10))})}function __f___up__tb_vis(){1===$($v__fm__container_fluid+" .nav.nav-tabs li").length?$($v__fm__container_fluid+" .nav.nav-tabs li:first-child").addClass("hidden"):$($v__fm__container_fluid+" .nav.nav-tabs li:first-child").removeClass("hidden")}function __f___up__d(e,a,t){var _=fm_process_path(e,"decode/unescape"),n=_.split("/");$("body.file-manager");$($v__fm__container_fluid+' [data-toggle="popover-path"]').popover("hide"),$($v__fm__container_fluid+" .popover-path-button").find("i").removeClass("invisible").parent().find(".cspinner").addClass("hidden"),__f___upd___cr(n,t),__f___upd___tb(_,a),_?$($v__fm__container_fluid+' #headln2l div.btn-group > a[href*="'+v___module_file_manager+'"][href*="index.cgi"]').removeClass("hidden"):$($v__fm__container_fluid+' #headln2l div.btn-group > a[href*="'+v___module_file_manager+'"][href*="index.cgi"]').addClass("hidden"),$.each($($v__fm__container_fluid+' .modal .modal-body form input[name="path"]'),function(){$(this).val(fm_process_path(_))}),$($v__fm__container_fluid+' ul li a[href^="bookmark.cgi?path="]').attr("href","bookmark.cgi?path="+Convert.htmlEscape(_)),f_m__bm__c(),plugins.favorites.detect(),setTimeout(function(){theme_title_generate(),__r____changed(),__f___up__tb_vis(),__f___up__tb_store()},0)}function __f___new_symlink(){$.ajax({type:"POST",url:v___server_extensions_path+"/file-manager/create_symlink.cgi?module="+v___module+__f___um()+extra_query(),data:__f___gd(),dataType:"json",success:function(e){e[0].error&&e[0].error.length&&plugins.messenger.post('<i class="fa fa-lg fa-fw fa-exclamation-triangle"></i>'+error_replace_tags(e[0].error),10,"warning","symlink_error",1,["bottom","right"]),__f___u("upd",e[0],1,fm_get_current_path(),!1)},error:function(e){session.status(e.responseText)}})}function __f___nt(e,a,t,_){var n=e;$this=$("#file-manager-new-instance"),$this.blur(),$($v__fm__container_fluid+" .nav.nav-tabs li").addClass("disabled"),tab___to______create+=1;var i=String(),r=(String(),String()),o=String();t&&(r=(i="active")+" "+" in",$tabs_container=$($v__fm__container_fluid+" .tabs-top"),$tabs=$tabs_container.find(".nav.nav-tabs"),$tabs_content=$tabs_container.find(".tab-content"),ariaExpandedStr="aria-expanded",o=ariaExpandedStr+'="true"',$tabs.find("li").removeClass(i).find("a").removeAttr(ariaExpandedStr),$tabs_content.find(".tab-pane").removeClass(r));var s=$($v__fm__container_fluid+" .tabs-top > .nav.nav-tabs > .ui-sortable-handle.active"),l='<li class="ui-sortable-handle '+i+'"><a href="#tab-'+tab___to______create+'" data-toggle="tab" '+o+'><i class="fa fa-fw fa-close-box pull-right invisible"></i><span data-tab-path data-container="#content .panel-body" data-toggle="tooltip" data-placement="auto top"><span style="margin-top: 2px; margin-left: -3px" class="cspinner"><span class="cspinner-icon smaller"></span></span>&nbsp;</span></a></li>';_?(s=$($v__fm__container_fluid+" .tabs-top > .nav.nav-tabs")).append(l):s.after(l),$($v__fm__container_fluid+" .tabs-top > .tab-content").append('<div class="tab-pane fade'+r+'" id="tab-'+tab___to______create+'">                <form class="ui_form" role="form" action="" method="post" id="list_form_AuthenticThemeTmp'+tab___to______create+'" name="list_form_AuthenticThemeTmp'+tab___to______create+'">                    <table class="table table-striped table-hover table-condensed"><tbody></tbody></table>                    <input class="ui_hidden heighter-34" type="hidden" name="path_AuthenticThemeTmp'+tab___to______create+'" id="path_AuthenticThemeTmp'+tab___to______create+'" value="'+n+'">                </form>            </div>');var f=$($v__fm__container_fluid+" .active table thead").clone();f.removeClass("hidden"),f.prependTo("#list_form_AuthenticThemeTmp"+tab___to______create+" table"),__f____r("get","index.cgi?path="+e,!1,0,[tab___to______create,a]),tab___is______new=!0}function fm_adjust_auto_rows_length(e,a,t){if(e=function(e){if(e&&"function"==typeof e)return e;if(e&&"object"==typeof e&&"function"==typeof e.dataTable)return e.dataTable();var a=_f__table();return!(!a||"object"!=typeof a||"function"!=typeof a.dataTable)&&a.dataTable()}(e)){var _=window.innerHeight,n=$v__fm__container_fluid+" .data-content-container .active",i=$(n+" table > tbody > tr:first-child").get(0);if(i){var r=i.getBoundingClientRect().top,o=$(n+" .dataTables_wrapper .row:last-child").outerHeight(),s=Math.floor((_-r-o-46)/23);if((!s||s<5)&&(s=5),t)return s;e._fnLengthChange(s),!a&&e.fnDraw()}}}function fm_gset_last_row_path(e){var a=e.find("td a[data-filemin-link]").first(),t=a.find('img[src*="inode-directory.png"]').length,_=fm_process_escaped_link(a.attr("data-filemin-link"),1),n="/"+(t?_:_.substring(0,_.lastIndexOf("/"))),i=fm_get_current_path()+fm_process_path(n);return fm_bookmark_searched_str=i,i}function fm_copy_path_to_clipboard(e){if(e&&(!e||e.length)){var a=(!!e.parents("tr").length?e.parents("tr"):e).find("img").parent("a").parent("td").next("td").find("a"),t=fm_get_current_path(),_=fm_process_escaped_link(a.attr("data-filemin-link"),1);theme_copy_to_clipboard((fm_process_path(t,"decode/unescape")+"/"+_).replace(/\/\//g,"/"))}}function fm_check_goback(){var e=$("#headln2l .btn-group").find('a[href*="'+v___module_file_manager+'/index.cgi"]');"%2F"===fm_get_current_path()?e.addClass("hidden"):e.removeClass("hidden")}function fm_is_search_results(){return $($v__fm__container_fluid+" .__o__f_m-search-results-data:visible").length}function fm_safe_path(e){return e&&e.startsWith("%2525252F")&&(e=decodeURIComponent(decodeURIComponent(decodeURIComponent(e)))),e&&e.startsWith("%25252F")&&(e=decodeURIComponent(decodeURIComponent(e))),e&&e.startsWith("%252F")&&(e=decodeURIComponent(e)),e&&e.startsWith("%2F%2F")&&(e=e.replace(/(%2F)+/g,"%2F")),e}function fm_path_inside_trash(){if(config_portable_module_filemanager_move_to_trash){var e=Object.keys(get_other_users_home_data());if(e&&e[0]){var a=fm_process_path(e[0],"decode")+"/.Trash",t=fm_get_current_path_full("decode");if(t&&a&&t.includes(a))return 1}}}function fm_path_check_jailed(e){var a=String();if(e&&!e.startsWith("%2F")&&(a="decode"),e){var t=get_jailed_user(),_=get_jailed_user("home");if(fm_user_data&&fm_user_data.allowed_paths&&1===fm_user_data.allowed_paths.length&&(2===get_access_level()||3===get_access_level()||4===get_access_level())||t){var n=new RegExp("^"+fm_process_path(t?_:get_user_home(),a),"");e=e.replace(n,"")}}return e}function fm_process_escaped_link(e,a){var t=Convert.htmlUnEscape(e);return a?t:Convert.encodeURIComponentConsistent(t)}function fm_process_path(e,a){if(e=fm_extract_path(e),a)if(a.includes("decode")&&(e=decodeURIComponent(e)),a.includes("unescape")){var t=0;e&&e.startsWith("%2F")&&(e=decodeURIComponent(e),t=1),e=Convert.htmlUnEscape(e),t&&(e=Convert.encodeURIComponentConsistent(e))}else a.includes("escape")&&(e=Convert.htmlEscape(e));return e}function fm_get_current_path_from_menu(e){const a=$('aside a[href*="'+v___module_file_manager+'/"]').attr("href");return a&&(a.includes("?path=")||a.includes("&path="))?path=fm_process_path(uri_parse_param2("path",a),e):path="",path}function fm_get_current_path(e){var a=$($v__fm__container_fluid_form+' > input[type="hidden"][name="path"]').val();return a=fm_process_path(a,e)}function fm_get_current_path_full(e){var a=fm_get_current_path("decode");return 2!==get_access_level()&&3!==get_access_level()&&4!==get_access_level()||(a=get_user_home()+a),a&&(a=a.replace(/[\/]+$/,"")),fm_process_path(a,e)}function fm_set_current_path(e){e&&(fm_previous_path_used=fm_get_current_path(),!e||e.startsWith("%2F")||e.startsWith("%252F")||(e=Convert.encodeURIComponentConsistent(e)),e=fm_safe_path(e),$($v__fm__container_fluid+' input[type="hidden"][name="path"]').val(e))}function fm_extract_path(e){var a;return e&&(e.includes("?path=")||e.includes("&path="))?(a=uri_parse_param2("path",e))||(a="%2F"):a=e,!a||a.startsWith("%2F")||a.startsWith("%252F")||(a=Convert.encodeURIComponentConsistent(a)),a=fm_safe_path(a)}function fm_files_mode_ask(e){if(config_portable_module_filemanager_files_mode_ask){var a='[data-bb-handler="success"]',t="fm_files_mode_ask",_=function(a,_){"true"==a.find('input[name="'+t+'"]').val()&&(config_portable_module_filemanager_files_mode_ask=!1,_!=config_portable_module_filemanager_files_safe_mode&&(config_portable_module_filemanager_files_safe_mode=!!_,core.updateModuleData("/mconfig.cgi?module=filemin&section=line0&nprev=Previous","/mconfig_save.cgi",{config_portable_module_filemanager_files_safe_mode})),theme.config.save()),fm_overwrite_files=!_,e.call()},n=snippets.inject_extra_option("checkbox:html",!1,t,theme_language("filemanager_files_mode_ask_remember"),{extraClass:{main:"thick"},getHtml:!0,checked:!1});bootbox.dialog({message:theme_language("filemanager_files_mode_ask_desc"),title:'<i class="fa fa-fw fa-question-circle font-size-80p bootbox-o__f_m-paste-prompt">&nbsp;&nbsp;</i> <strong class="font-size-90p">'+theme_language("filemanager_files_mode_ask_title")+"</strong>",className:"overwrite-mode-ask-modal fade5",buttons:{success:{label:'&nbsp;<i class="fa fa-fw fa-check-circle-o">&nbsp;&nbsp;</i>'+theme_language("filemanager_files_mode_ask_title_no")+"&nbsp;&nbsp;",className:"btn-primary vertical-align-top ",callback:function(){_($(this),!0)}},danger:{label:'&nbsp;<i class="fa fa-fw fa-times-circle-o">&nbsp;&nbsp;</i>'+theme_language("filemanager_files_mode_ask_title_yes")+"&nbsp;&nbsp;",className:"btn-danger vertical-align-top margined-left--2",callback:function(){_($(this),!1)}}},onEscape:function(){}}).init(function(){$(this).find(a).before(n+"&nbsp;")}).on("shown.bs.modal",function(){var e=$(this);setTimeout(function(){e.find(config_portable_module_filemanager_files_safe_mode?a:'[data-bb-handler="danger"]').focus()},0)})}else e.call()}function fm_trash_clear(e){var a="purge_trash_"+e;plugins.messenger.post('<i class="fa fa-lg fa-fw fa2 fa2-trash-empty-o"></i>'+theme_language("filemanager_purge_trash_"+e+"_start").replace("$1","<tt>"+(0===get_access_level()?session.server.data("user-home"):"~")+"/.Trash</tt>")+"<br>"+theme_language("global_please_wait"),0,"info",a+"_info",1,["bottom","right"]),$.ajax({type:"POST",url:v___server_extensions_path+"/file-manager/purge_trash.cgi?module="+v___module+extra_query()+"&trash_all="+("all"===e?1:0),data:__f___gd(),dataType:"json",success:function(e){setTimeout(function(){__f___u("upd",e[0],1,a,!1),tree_update_node()},567)},error:function(e){session.status(e.responseText)}})}function fm_path_manual_popover(){if(!$($v__fm__container_fluid+" .breadcrumb").hasClass("searching-a")){var e=$($v__fm__container_fluid+" #headln2r");Test.scrolledIntoView(e)?$('[data-toggle="popover-path"]').popover("show"):e.scrollIntoView({duration:200,direction:"vertical",complete:function(){$($v__fm__container_fluid+' [data-toggle="popover-path"]').popover("show")}})}}function __f____r(e,a,t,_,n,i){if(f__ck_init_err(1))f__ck_init_err();else{if(void 0===i&&(i=!1),"object"==typeof n){var r=n[1];n=n[0]}else r=!0;var o=fm_extract_path(a);if(fm_store_last_visited_dir(o),void 0===n&&(n=!1),"get"===e){if("undefined"!=typeof getflist&&i&&(getflist.abort(),__f_____ul(!0)),__f__ck_lock()&&r)return;__f_____lo(!0,!0);var s=extra_query(a,!1,"list"),l=$($v__fm__container_fluid+" .tab-pane.active"),f=l.find(".paginate_button.active").text();getflist=$.ajax({xhr:function(){return new window.XMLHttpRequest},type:"POST",url:v___server_extensions_path+"/file-manager/list.cgi?module="+v___module_file_manager+s,data:{path:o},dataType:"json",complete:function(){setTimeout(function(){fm_refreshing_current=0},120),!i&&initial_fm_load&&(getflists_loaded.push(getflist),getflists_loaded.length===getflists.length&&(initial_fm_load=0,__f_____ul(!0)))},success:function(e){e[0]&&e[0].udata&&(e[0].udata.user||e[0].udata.home)&&(fm_user_data=e[0].udata);var t="refreshDir_info";if(theme_message_exists(t)&&(select_all_entries("remove"),theme_message_dismiss(t)),!initial_fm_load&&theme_message_dismiss("getPath_error"),setTimeout(function(){!fm_refreshing_current&&l.data("previousPageNumber",f)},100),e[0].error&&e[0].error.length||e[0].error_fatal&&e[0].error_fatal.length){var i=e[0].error||e[0].error_fatal;return plugins.messenger.post('<i class="fa fa-lg fa-fw fa-exclamation-circle"></i>'+error_replace_tags(Convert.htmlEscape(i.replace(" :",":").replace(" ,",","))),15,"error","getPath_error",1,["bottom","right"]),__f_____ul(),$($v__fm__container_fluid+" .active table .cspinner").remove(),n&&($($v__fm__container_fluid+' a[href="#tab-'+n+'"]').parent("li").remove(),$($v__fm__container_fluid+' .tab-content .tab-pane[id="tab-'+n+'"]').remove()),void localStorage.removeItem(v___server_hostname+"-"+v___server_username+"-fm-last-visited-dir")}$($v__fm__container_fluid+' [data-toggle="popover-path"]').popover("hide");var s=fm_get_current_path(),c=fm_extract_path(a);s!==c&&select_all_entries("remove"),n||fm_set_current_path(c);var d=$(e[0].total).append(__f___tl_v()).html();r&&$($v__fm__container_fluid+" .total").html(d),n?$($v__fm__container_fluid+' .tab-pane[id="tab-'+n+'"]').data("totalValue",d):$($v__fm__container_fluid+" .tab-pane.active").data("totalValue",d),__f___u("upd",e[0],_,!1,[n,r,o,d]),$("._select-unselect_").parent(".awcheckbox").remove(),$("#__f__c__m").css("display","none"),setTimeout(function(){__f___us_a(),"function"==typeof sortable&&sortable($($v__fm__container_fluid+" .tabs-top > ul.nav"))},10)},error:function(e){var a=$(e.responseText);if(a.find("#headln2r").length){var t=a.filter("h3").text();t&&t.length&&(__f_____ul(),plugins.messenger.post('<i class="fa fa-lg fa-fw fa-exclamation-circle"></i>'+theme_language("global_error")+":&nbsp;&nbsp;"+t.replace(" :"," ").replace(" ,",","),15,"error","getPath_error",1,["bottom","right"]))}else session.status(e.responseText)}}),!i&&initial_fm_load&&getflists.push(getflist)}}}function get_other_users_home_data(){var e={};return 0!=get_access_level()||!0!==config_portable_module_filemanager_switch_users||"object"==typeof fm_users_data_dynamic&&$.each(Convert.arrFlip(fm_users_data_dynamic),function(a,t){var _=fm_process_path(a.split(":")[2]);(_=fm_process_path(_,"decode"))&&_.includes("/./")&&(_="/"+_.split("/./")[1]),_=fm_process_path(_,"encode"),e[_]=t}),e}function __f___us_a(){if(0==get_access_level()&&!0===config_portable_module_filemanager_switch_users){var e=fm_get_current_path();e&&e.indexOf($g__v__home_base)>-1&&e!=$g__v__home_base?$.ajax({type:"POST",url:v___server_extensions_path+"/file-manager/fetcher.cgi",data:{module:v___module,list_users:1},dataType:"JSON",success:function(a){$.each(Convert.arrFlip(a),function(t,_){var n=fm_process_path(t.split(":")[2]);if(n&&n.includes("%2F.%2F")){var i=n.split("%2F.%2F");i&&i[0]&&i[1]&&(n="%2F"+i[1])}e=fm_process_path(e,"decode"),e=fm_process_path(e,"encode"),n=fm_process_path(n,"decode"),n=fm_process_path(n,"encode"),(e==n||e.startsWith(n+"%2F"))&&localStorage.setItem(v___server_hostname+"-settings_thirdparty_filemanager_usermode",_),fm_users_data_dynamic=a,__f___us_tl()})},error:function(e){session.status(e.responseText)}}):(__f___us_m_def(),__f___us_tl())}}function fm_get_file_info(e,a,t){var _=e+"/"+a;2!==get_access_level()&&3!==get_access_level()&&4!==get_access_level()||(_=get_user_home()+_),_=decodeURIComponent(_.replace(/\/\//g,"/"));var n=v___location_prefix+"/xhr.cgi",i={type:"file",action:"stat",file:_,module:v___module_file_manager};fm_target_spinner_add(t),$.ajax({type:"POST",url:n,data:i,dataType:"JSON",success:function(e){fm_target_spinner_remove();var a=function(){return $(document.body).find(".fm_fileinfo_data")},t=(e.size[0],e.size[1]),_=e.content;_=(_=(_=(_=Convert.htmlEscape(_)).replace(/(?:\r\n|\r|\n)/g,"<br>").replace(/\/\//g,"/")).replace(/((\b)(?!\d+)IO Block|(?!\d+)\w+\b): /g,"<strong>$1: </strong>")).replace(/\s/g,"&nbsp;");var r="fm_fileinfo_data";window[r]=[];var o="data-a-checksum",s=new RegExp(o+"&#61;&quot;"+"(.*?)&quot;","g"),l=_.match(s),f=t>=1024e3&&t<config_portable_module_filemanager_checksum_limit,c=function(e,t,_){var n=a();if(n&&n.length){var i=e.call(this,t),r=new RegExp(i),o=n.find(".modal-body > div");o.html(o.html().replace(r,_))}},d=function(e,a){a||c(m,e,u(e));let t=i;t.checksum=e,window[r][e]=$.ajax({type:"POST",url:n,data:t,dataType:"JSON",success:function(a){c(u,e,a.checksum)},error:function(e){session.status(e.responseText)}})},m=function(e){return"<button "+o+'="'+e+'" class="btn btn-default btn-xs btn-xxs vertical-align-baseline"><i class="fa fa-refresh"></i></button>'},u=function(e){return"<span "+o+'="'+e+'" class="cspinner margined-left-8"><span class="cspinner-icon dark smallest"></span></span>'};l&&(_=_.replace(s,f?u("$1"):m("$1"))),$(document.body).append('<div class="modal fade fade7 fm_fileinfo_data" tabindex="-1" role="dialog"><div class="modal-dialog modal-lg" role="document"><div class="modal-content"><div class="modal-header"><h4 class="warning"><i class="fa fa-fw fa-info-circle" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;'+theme_language("filemanager_context_properties")+'</h4><button type="button" class="close" data-dismiss="modal" aria-label="'+theme_language("global_close")+'"><span aria-hidden="true">&times;</span></button></div><div class="modal-body"><div>'+_+"</div></div></div></div></div>"),a().on("shown.bs.modal",function(){if(f)$.each(a().find("span["+o+"]"),function(){d($(this).attr(o),1)});else{var e="click.checksumevt";a().off(e),a().on(e,"button["+o+"]",function(e){e.preventDefault(),d($(this).attr(o),0)})}}).on("hidden.bs.modal",function(){a().remove();var e=window[r]||{};Object.entries(e).forEach(function(e){const[a,t]=e;t&&"function"==typeof t.abort&&t.abort.call()})}).modal("show")},error:function(e){session.status(e.responseText)}})}function fm_get_current_home_username(){return localStorage.getItem(v___server_hostname+"-settings_thirdparty_filemanager_usermode")}async function fm_get_current_home_user_details(){var e=fm_get_current_path(),a={};if(e&&e.indexOf($g__v__home_base)>-1&&e!=$g__v__home_base){var t=fm_get_current_home_username();return a=$.ajax({type:"POST",url:v___server_extensions_path+"/file-manager/fetcher.cgi",data:{module:v___module,list_users:1,list_user:t||" "},dataType:"JSON"}),await a}return a}function __f___us_m_def(){localStorage.setItem(v___server_hostname+"-settings_thirdparty_filemanager_usermode","")}function __f___us_tl(){var e=fm_get_current_home_username(),a=theme_language("filemanager_user_switch")+"<br><hr class='hr-dashed hr-no-margin hr-darker'>"+theme_language("filemanager_user_switch_current_user")+": <em>"+(e||v___server_username)+"</em>",t="#file-manager-switch-user";$(t).attr("data-original-title",a),e?$(t).addClass("btn-warning"):$(t).removeClass("btn-warning")}function __f___tl_v(){var e=theme_language("filemanager_selected_entries").replace("%value","<span>0</span>"),a=$('.total_selected[data-all="1"]');return a.length?". "+a[0].outerHTML:'. <span class="total_selected">'+e+'</span> <span class="label label-warning total_size hidden"><span class="total_size_data"></span></span>'}function update_per_page(e){$('[name="per_page"]').val(e)}function update_records_for_server_pagination(e){$('[name="config_portable_module_filemanager_records_for_server_pagination"]').val(parseInt(e)).trigger("input")}function block_events(){vars.events.blocked=!0,setTimeout(function(){vars.events.blocked=!1},5*vars.event.stopped_typing_delay)}function action_messages_dismiss_all(e){theme_message_dismiss(e+"_success"),theme_message_dismiss(e+"_error"),theme_message_dismiss(e+"_info"),theme_message_dismiss(e+"_warning")}function alert_json_errors(e,a,t,_,n){var i=JSON.parse(e),r=t.endsWith("_")?t+a:t,o=theme_language(r)+":<br><ul>";if("object"==typeof i&&i)if(Object.keys(i).length>1||_){var s=0,l=String(),f=theme_language("filemanager_batch_error");for(var c in i)++s<=10?o+="<li>"+c+" - "+i[c]+"</li>":l='<div class="margined-top-3">'+f.replace("%1",'<span class="label label-danger">'+(s-10)+"</span>")+"</div>";o+="</ul>"+l,plugins.messenger.post('<i class="fa fa-lg fa-fw fa-exclamation-triangle"></i>'+o,15,"error",a+"_error",1,["bottom","right"])}else plugins.messenger.post('<i class="fa fa-lg fa-fw fa-exclamation-triangle"></i>'+Convert.json_to_string(i),15,"error",a+"_error",1,["bottom","right"])}function encryptDecryptModalA(e){var a=$("#encryptDecrypt"),t=a.find("[data-title-text]"),_=a.find("[data-title-icon]"),n=a.find("[data-encrypt]"),i=a.find("[data-decrypt]"),r=a.find("[data-label-text]"),o=a.find(".use_master_admin_keys_cnt"),s=a.find("[data-button-text]"),l=n.find('select[name="key"]'),f=a.find("[data-button-reverse]"),c=$("#__f__c__m li.context-o__f_m-dependent-encrypt:not(.divider)"),d=c.find("a"),m=c.find("i"),u="fa-key-plus",p="fa2 fa2-key-minus",g="hidden",h="disabled",v="btn-warning",b=theme_language("global_encrypt"),w=theme_language("global_decrypt"),x=theme_language("filemanager_encrypt_option_delete_afterwards"),y=theme_language("filemanager_decrypt_option_delete_afterwards");e?(m.add(_).removeClass(u).addClass(p),t.add(s).text(w),d.html(c.find("i")[0].outerHTML+"&nbsp;&nbsp;"+w),f.text(b),n.addClass(g),i.removeClass(g),s.addClass(v).removeClass(h),r.text(y),0===get_access_level()&&fm_get_current_home_username()&&o.removeClass("hidden")):(m.add(_).addClass(u).removeClass(p),t.add(s).text(b),d.html(c.find("i")[0].outerHTML+"&nbsp;&nbsp;"+b),f.text(w),n.removeClass(g),i.addClass(g),s.removeClass(v),r.text(x),o.addClass("hidden"),l.val()?s.removeClass(h):s.addClass(h))}function fm_install_deps(e,a,t){var _=a[0],n=a[1],i=a[2],r=a[3];plugins.messenger.post('<i class="fa fa-lg fa-fw fa-package-install fa-1_50x margined-left--2"></i>'+r+"<br>"+theme_language("global_please_wait")+'&nbsp;&nbsp;&nbsp;<span class="cspinner"><span class="cspinner-icon white smallest margined-top-4"></span></span>',0,"info","galleryError",1,["bottom","right"]),$.ajax({type:"POST",url:e,data:!1,dataType:"html",success:function(e){session.status(e)&&(!e||e&&e.includes(_)?plugins.messenger.post('<i class="fa fa-lg fa-fw fa-package-install fa-1_50x margined-left--2"></i>'+i,15,"error","galleryError",1,["bottom","right"]):plugins.messenger.post('<i class="fa fa-lg fa-fw fa-package-install fa-1_50x margined-left--2"></i>'+n,2,"success","galleryError",1,["bottom","right"]))}})}function image_download(e,a){link="download.cgi?file="+fm_process_path(a)+"&path="+fm_process_path(e),window.location.replace(v___location_prefix+"/"+v___module_file_manager+"/"+link)}function image_preview(e,a,t){if("function"==typeof PhotoSwipe){var _=String();if(t&&(_+="&files_selected=1"),a&&(_+="&files_all=1"),e&&(_+="&file_requested="+e),a||t){var n=t?" fa-1_25x fa2 fa2-image-selected":" fa-1_15x fa2 fa2-images";plugins.messenger.post('<i class="fa fa-lg fa-fw '+n+' margined-top--2"></i>'+theme_language("filemanager_preview_images_building")+"<br>"+theme_language("global_please_wait")+'&nbsp;&nbsp;&nbsp;<span class="cspinner"><span class="cspinner-icon white smallest margined-top-4"></span></span>',0,"info","galleryError",1,["bottom","right"])}$.ajax({type:"POST",url:v___server_extensions_path+"/file-manager/list-images.cgi?module="+v___module+_+extra_query()+"&width="+parseInt(.75*window.innerWidth)+"&height="+parseInt(.75*window.innerHeight),data:__f___gd(),dataType:"JSON",success:function(e){if((e=e[0]).error)plugins.messenger.post('<i class="fa fa-lg fa-fw fa-package-install fa-1_50x margined-left--2"></i>'+e.error,30,"warning","galleryError",1,["bottom","right"]);else if(e.warning)plugins.messenger.post('<i class="fa fa-lg fa-fw fa-1_15x fa2 fa2-images margined-top--2"></i>'+e.warning,10,"warning","galleryError",1,["bottom","right"]);else if(e.items){var a='<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">    <div class="pswp__bg"></div>    <div class="pswp__scroll-wrap">        <div class="pswp__container">            <div class="pswp__item"></div>            <div class="pswp__item"></div>            <div class="pswp__item"></div>        </div>        <div class="pswp__ui pswp__ui--hidden">            <div class="pswp__top-bar">                <div class="pswp__counter"></div>                <button class="pswp__button pswp__button--close" title="'+theme_language("global_close")+' (Esc)"></button>                <button class="pswp__button pswp__button--download" title="'+theme_language("filemanager_context_download_file")+'"</button>                <button class="pswp__button pswp__button--fs" title="'+theme_language("global_toggle_fullscreen")+'"></button>                <button class="pswp__button pswp__button--zoom" title="'+theme_language("global_zoom_in_out")+'"></button>                <div class="pswp__preloader">                    <div class="pswp__preloader__icn">                      <div class="pswp__preloader__cut">                        <div class="pswp__preloader__donut"></div>                      </div>                    </div>                </div>            </div>            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">                <div class="pswp__share-tooltip"></div>             </div>            <button class="pswp__button pswp__button--arrow--left" title="'+theme_language("global_prev_arrow_left")+'">            </button>            <button class="pswp__button pswp__button--arrow--right" title="'+theme_language("global_next_arrow_right")+'">            </button>            <div class="pswp__caption">                <div class="pswp__caption__center"></div>            </div>        </div>    </div></div>';document.querySelector("body").insertAdjacentHTML("beforeend",a),pswpElem=document.querySelector(".pswp"),items=e.items,index_requested=e.index_requested,gallery=new PhotoSwipe(pswpElem,PhotoSwipeUI_Default,items,{history:!1,shareEl:!1,fullscreenEl:!1,escKey:!0,downloadEl:!0,closeElClasses:["ui"],index:index_requested}),gallery.listen("destroy",function(){pswpElem.remove()}),theme_message_dismiss("galleryError"),gallery.init()}},error:function(e){session.status(e.responseText)}})}else load.bundle("photoswipe",1,{image_preview:arguments},2)}function ___f__tw(){__f___globals(),__f_____undel(),document.activeElement.blur();var e=config_portable_module_filemanager_hide_tree_view?' class="hidden"':"",a=config_portable_module_filemanager_hide_tree_view?" hidden":"",t=document.body;if($(t).attr("class")&&$(t).attr("class").indexOf(v___module_file_manager)>-1){$__f__rf_s="fa-refresh";if(load.bundle("jquery.jspanel",1),setTimeout(function(){$($v__fm__container_fluid+" #upload-form").removeAttr("onsubmit"),$($v__fm__container_fluid+" #upload-form").append("<p data-pre-upload-container>"+theme_language("upload_initial_info")+"</p>"),$($v__fm__container_fluid+' #upload-form input[name="upfiles"]').removeClass("heighter-28"),$($v__fm__container_fluid+" #readyForUploadDialog .modal-footer").prepend('<button type="button" data-upload-reset class="btn btn-default pull-left"><i class="fa fa-fw fa-times-circle"></i> '+theme_language("global_reset")+"</button>"),$($v__fm__container_fluid+' #readyForUploadDialog button[onclick="uploadFiles()"]').html('<i class="fa fa-fw fa-check-circle"></i>&nbsp;'+theme_language("global_upload")),$($v__fm__container_fluid+' #readyForUploadDialog button[onclick="uploadFiles()"]').after('<span class="dropdown dropup pull-right pull-left"><button type="button" class="btn btn-primary dropdown-toggle " data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="fa fa-0_90x fa-caret-down"></span></button><ul class="dropdown-menu"><li onclick="fm_overwrite_files = this.querySelector(\'input\').checked ? true : false"><span class="awcheckbox awobject awobjectm"><input '+(fm_overwrite_files?"checked ":String())+'id="overwrite_efiles_4" name="overwrite_efiles" type="checkbox" class="iawobject" value="'+fm_overwrite_files+'"><label class="lawobject font-weight-normal" for="overwrite_efiles_4">&nbsp;'+theme_language("filemanager_files_mode_ask_title2")+"&nbsp;&nbsp; </label></span></li></ul></span>"),$($v__fm__container_fluid+" #upload-form").on("dragover dragenter",function(){$(this).addClass("pulse")}).on("dragleave dragend drop",function(){$(this).removeClass("pulse")}),$($v__fm__container_fluid+" #readyForUploadDialog #readyForUploadList").remove(),$($v__fm__container_fluid+" #readyForUploadDialog [data-upload-reset]").after($($v__fm__container_fluid+" #upload-form ~ .awcheckbox").detach().addClass("thick")),$($v__fm__container_fluid+' #readyForUploadDialog [data-id="overwrite_existing"]').parent().hide();var e=$($v__fm__container_fluid+" .o__f_m-button-delete");config_portable_module_filemanager_move_to_trash&&e.addClass("btn-warning").removeClass("btn-danger").attr("title",theme_language("filemanager_context_move_to_trash")).find(".fa").addClass("fa-trash"),config_portable_module_filemanager_move_to_trash&&(e.wrapAll('<div class="btn-group"></div>'),e.after('<span class="dropdown pull-right pull-left purge-trash-dropdown"><button type="button" class="btn btn-default dropdown-toggle o__f_m-button-delete-etrash-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="fa fa-0_90x fa-caret-down"></span></button><ul class="dropdown-menu"><li onclick="fm_trash_clear(\'curr\')"><a href="javascript:;">'+theme_language("filemanager_trash_empty_curr_user"+(0===get_access_level()?"":"_single")).replace("$1","<tt>"+session.server.data("user-home")+"/.Trash</tt>")+"</a></li>"+(0===get_access_level()?'<li onclick="fm_trash_clear(\'all\')"><a href="javascript:;">'+theme_language("filemanager_trash_empty_all_users")+"</a></li>":"")+"</ul></span>")),e.attr("data-container",".breadcrumb + .btn-group.pull-right").attr("data-placement","auto bottom").attr("data-skip","true").tooltip({sanitize:!1,trigger:"hover",delay:{show:0,hide:vars.plugins.tooltip.delay.hide}}),e.next(".dropdown").find(".dropdown-toggle").attr("data-container",".breadcrumb + .btn-group.pull-right").attr("data-placement","auto bottom").attr("data-skip","true").attr("title",theme_language("filemanager_context_empty_trash")).tooltip({sanitize:!1,trigger:"hover",delay:{show:0,hide:vars.plugins.tooltip.delay.hide}})},3),$($v__fm__container_fluid+" .panel-body").append('            <div class="data-content-container">        <div data-tree-view'+e+'>        <div data-resizer></div>          <span class="cspinner centered-initial"><span class="cspinner-icon"></span></span>        </div>        <div class="tree-view-filter hidden-content '+a+'"><input type="text" placeholder="'+theme_language("datatable_filter")+'"></div>        <div class="data-table">            <div class="tabs-top">                <ul class="nav nav-tabs">                    <li class="active ui-sortable-handle"><a href="#tab-1" data-toggle="tab"><i class="fa fa-fw fa-close-box pull-right invisible"></i><span data-tab-path data-container="body" data-toggle="tooltip" data-placement="auto top" data-title="/">/</span></a></li>                </ul>                <div class="tab-content">                    <div class="tab-pane fade in active" id="tab-1">                    </div>                </div>            </div>        </div>      </div>        '),config_portable_module_filemanager_auto_per_page&&$($v__fm__container_fluid+" .panel-body").attr("data-auto-per-page",1),$($v__fm__container_fluid_form).detach().appendTo("#tab-1"),"function"==typeof sortable){var _=$($v__fm__container_fluid+" .tabs-top > ul.nav");sortable(_).on("sortupdate.fm",function(){__f___up__tb_store()})}config_portable_module_filemanager_remember_tabs&&__f___ld__tb_stored_chk()&&setTimeout(function(){__f___ld__tb_stored()},10),$.ajax({type:"POST",url:v___server_extensions_path+"/file-manager/fetcher.cgi",data:{module:v___module,home_base:1},dataType:"JSON",success:function(e){$g__v__home_base=jQuery.isEmptyObject(e)?v___server_userhome:fm_process_path(e.home_base)},error:function(e){session.status(e.responseText)}});var n=setInterval(function(){"undefined"!=typeof fm_user_data&&fm_user_data.user&&(0!=get_access_level()||get_jailed_user()||!1!==config_portable_module_filemanager_switch_users||($('#headln2r .btn-group a[href*="config.cgi"]').before('<a id="file-manager-switch-user" data-container="body" data-toggle="tooltip" data-html="true" class="btn btn-link '+(__f___um()?"btn-warning ":"")+'text-lighter pull-left"><i class="fa fa-user-switch"></i></a>'),__f___us_tl(),$(t).attr("data-user-switch",1)),clearInterval(n))},100),r=$("#headln2r .btn-group"),o="path-to-shell",s=core.moduleAvailable("xterm"),l=plugins.shell.available(),f=s?"fa2 fa2-terminal":"fa fa-terminal";(s||l)&&(r.prepend("<a "+theme_inject_tooltip(theme_language("path_to_console"+(s?"":"2")),"#headln2r",!1,!1,!1,"(")+' class="btn btn-link text-lighter pull-left '+o+'"><i class="'+f+'" aria-hidden="true"></i></a>'),$($v__fm__container_fluid+" ."+o).on("click.fm",function(e){if(e.preventDefault(),v___module===v___module_file_manager){var a=fm_get_current_path();if(3===get_access_level()&&(a=fm_process_path(get_user_home())+a),1==session.server.data("terminal")){var t=fm_process_path(a,"decode/unescape");t=t.replace(/[-[\]{}()*+?.,\\^$|#\s'"]/g,"\\$&"),plugins.terminal.open("cd "+t)}else 1==session.server.data("shell")&&(plugins.shell.set(a),plugins.shell.open())}})),r.prepend('<a id="file-manager-new-instance" '+theme_inject_tooltip(theme_language("filemanager_new_tab"),"#headln2r",!1,!1,!1,"(")+' class="btn btn-link text-lighter pull-left"><i class="fa fa-plus"></i></a>'),r.prepend('<a data-tree-toggle data-container="body" data-toggle="tooltip" data-title="'+theme_language("filemanager_tree_view_toggle")+'" class="btn btn-link text-lighter pull-left"><i class="fa fa-tree-view fa-rotate-90"></i></a>');var c,d=theme_language("global_module_preferences")+" "+theme_shortcuts_generate("conf");if(r.find("i.fa.fa-cog").parent("a").attr("data-placement","auto right").attr("data-original-title",d),$("body").on("input.fm",".dataTables_length select",function(e){fm_stored_listing.delete()}),$(t).on("click.fm",".tab-pane.active .ui_checked_columns > .ui_checked_checkbox:nth-child(1) + td > a",function(e){e.preventDefault(),e.stopPropagation(),e.offsetX<=-2&&e.offsetX>=-11&&!$(e.target).is("img")&&$(this).trigger("contextmenu")}),$(t).on("contextmenu.fm",function(){c=!0}),$(t).on("click.fm",function(){c=!1}).on("mouseleave.fm",".popover:not(.file-manager-help):not(.jsPanel-file-info):not(.popover-path-data)",function(e){var a=$(this);e.preventDefault(),e.stopPropagation(),c?$(t).one("click.fm",function(){a.popover("hide")}):a.popover("hide")}),$($v__fm__container_fluid+" div.total").append(__f___tl_v()),$($v__fm__container_fluid+" .tab-pane.active").data("totalValue",$("div.total").html()),$("body.file-manager #content").append('<ul id="__f__c__m" class="dropdown-menu" role="menu" style="display:none">                <li data-block data-go_up-target><a tabindex="-1" href="#" data-context-back="1"><i class="fa fa-fw fa-arrow-left"></i></a></li>                <li data-block data-go_up-target><a tabindex="-1" href="#" data-context-refresh="1"><i class="fa fa-fw fa-refresh"></i></a></li>                <li data-block data-go_up-target><a tabindex="-1" href="#" data-context-bookmarks="1"><i class="fa fa-fw fa-star"></i></a></li>                <li data-block data-go_up-target><a tabindex="-1" href="#" data-context-search="1"><i class="fa fa-fw fa-search"></i></a></li>                <li class="divider"></li>                                    <li class="context-o__f_m-dependent-goto hidden"><a tabindex="-1" href="#" data-context-goto="1"><i class="fa fa-fw fa-folder-open-o"></i>&nbsp;&nbsp;'+theme_language("filemanager_context_goto")+'</a></li>                    <li class="divider context-o__f_m-dependent-goto"></li>                    <li class="context-o__f_m-dependent-open-new-tab hidden"><a tabindex="-1" href="#" data-context-open-new-tab="1"><i class="fa fa-fw fa-tab"></i>&nbsp;&nbsp;'+theme_language("filemanager_context_open_new_tab")+'</a></li>                    <li class="divider context-o__f_m-dependent-open-new-tab hidden"></li>                    <li class="dropdown-submenu prelocked" role="menu">                        <a tabindex="-1" href="#" data-context-select-all="1"><i class="fa fa-fw fa-check-square-o"></i>&nbsp;&nbsp;'+theme_language("filemanager_context_select_all")+'</a>                        <ul class="dropdown-menu" role="menu">                            <li><a tabindex="-1" href="#" data-context-deselect-all="1"><i class="fa fa-fw fa-square-o"></i>&nbsp;&nbsp;'+theme_language("filemanager_context_deselect_all")+'</a></li>                        </ul>                    </li>                    <li><a tabindex="-1" href="#" data-context-invert-selection="1"><i class="fa fa-fw fa-share-square-o"></i>&nbsp;&nbsp;'+theme_language("filemanager_context_select_invert")+'</a></li>                    <li data-go_up-target class="divider"></li>                    <li data-go_up-target class="dropdown-submenu" role="menu">                        <a tabindex="-1" href="#" data-prevent-default>&nbsp;&nbsp;'+theme_language("filemanager_context_new")+'</a>                        <ul class="dropdown-menu" role="menu">                    <li><a tabindex="-1" href="#" data-context-newsymlink="1"><i class="fa fa-fw fa-smm fa-file-symlink margined-right--1 margined-left--1"></i>&nbsp;&nbsp;&nbsp;'+theme_language("filemanager_context_symlink")+'</a></li>                            <li data-go_up-target><a tabindex="-1" href="#" data-context-newfile="1"><i class="fa fa-fw fa-file-o"></i>&nbsp;&nbsp;&nbsp;'+theme_language("filemanager_context_newfile")+'</a></li>                            <li data-go_up-target><a tabindex="-1" href="#" data-context-newfolder="1"><i class="fa fa-fw fa-folder-o"></i>&nbsp;&nbsp;&nbsp;'+theme_language("filemanager_context_newfoder")+'</a></li>                            <li><a tabindex="-1" href="#" data-context-newarchive="1"><i class="fa fa-fw fa-file-archive-o"></i>&nbsp;&nbsp;&nbsp;'+theme_language("filemanager_context_newarchive")+'</a></li>                            <li data-go_up-target class="dropdown-submenu" role="menu">                                <a tabindex="-1" href="#" data-prevent-default><i class="fa fa-fw fa-exchange"></i>&nbsp;&nbsp;'+theme_language("filemanager_context_transfer")+'</a>                                <ul class="dropdown-menu" role="menu">                                    <li data-go_up-target><a tabindex="-1" href="#" data-context-upload="1"><i class="fa fa-fw fa-upload"></i>&nbsp;&nbsp;&nbsp;'+theme_language("filemanager_context_upload")+'</a></li>                                    <li data-go_up-target><a tabindex="-1" href="#" data-context-download="1"><i class="fa fa-fw fa-download"></i>&nbsp;&nbsp;&nbsp;'+theme_language("filemanager_context_download")+'</a></li>                                </ul>                            </li>                        </ul>                    </li>                    <li data-context-always-keep class="divider"></li>                    <li class="dropdown-submenu prelocked" role="menu">                        <a tabindex="-1" href="#" data-context-copy="1"><i class="fa fa-fw fa-files-o"></i>&nbsp;&nbsp;'+theme_language("filemanager_context_copy")+'</a>                        <ul class="dropdown-menu" role="menu">                            <li><a tabindex="-1" href="#" data-context-clipboard="1"><i class="fa fa-fw fa-clone"></i>&nbsp;&nbsp;'+theme_language("filemanager_context_clipboard")+'</a></li>                            <li><a tabindex="-1" href="#" data-context-clipboard-selection="2"><i class="fa fa-fw fa-sm fa2 fa2-copy-selection"></i>&nbsp;&nbsp;'+theme_language("filemanager_context_clipboard_selection")+'</a></li>                        </ul>                    </li>                    <li><a tabindex="-1" href="#" data-context-cut="1"><i class="fa fa-fw fa-scissors"></i>&nbsp;&nbsp;'+theme_language("filemanager_context_cut")+'</a></li>                    <li data-context-always-keep><a tabindex="-1" href="#" data-context-paste="1"><i class="fa fa-fw fa-clipboard"></i>&nbsp;&nbsp;'+theme_language("filemanager_context_paste")+'</a></li>                    <li class="divider"></li>                    <li><a tabindex="-1" href="#" data-context-delete="1" data-context-delete-trash="0"><i class="fa fa-fw fa-trash-o"></i>&nbsp;&nbsp;<span>'+theme_language("filemanager_context_delete")+"</span>"+(localStorage.getItem(v___server_hostname+"-"+v___server_username+"-context-alt")?"":ui_inject_alt_key_label())+'</a></li>                    <li><a tabindex="-1" href="#" data-context-empty-trash="1"><i class="fa fa-fw fa2 fa2-trash-empty-o"></i>&nbsp;&nbsp;<span>'+theme_language("filemanager_context_empty_trash")+'</span></a></li>                                        <li class="divider context-o__f_m-dependent-preview"></li>                    <li class="dropdown-submenu prelocked context-o__f_m-dependent-preview" role="menu">                        <a tabindex="-1" href="#" data-context-preview-image="1"><i class="fa fa-fw fa-image"></i>&nbsp;&nbsp;'+theme_language("global_preview_img")+'</a>                        <ul class="dropdown-menu" role="menu">                            <li><a tabindex="-1" href="#" data-context-preview-image="3"><i class="fa fa-fw fa2 fa2-image-selected"></i>&nbsp;&nbsp;'+theme_language("global_preview_img_sel")+'</a></li>                            <li><a tabindex="-1" href="#" data-context-preview-image="2"><i class="fa fa-fw fa2 fa2-images"></i>&nbsp;&nbsp;'+theme_language("global_preview_img_all")+'</a></li>                        </ul>                    </li>                                        <li class="divider context-o__f_m-dependent-view"></li>                    <li class="dropdown-submenu context-o__f_m-dependent-view prelocked" role="menu">                        <a tabindex="-1" href="#" data-context-view="1" data-context-view-head="1">&nbsp;&nbsp;'+theme_language("filemanager_context_view")+'</a>                        <ul class="dropdown-menu" role="menu">                            <li><a tabindex="-1" href="#" data-context-view="1" data-context-view-reverse="1" data-context-view-head="1"><i class="fa fa2 fa-fw fa2-align-bottom fa-rotate-180"><i class="fa fa2 fa2-swap-vertical"></i></i>&nbsp;&nbsp;'+theme_language("filemanager_view_head_and_reverse")+'</a></li>                            <li><a tabindex="-1" href="#" data-context-view="1" data-context-view-tail="1"><i class="fa fa-fw fa2 fa2 fa2-align-bottom"></i>&nbsp;&nbsp;'+theme_language("filemanager_view_tail")+'</a></li>                            <li><a tabindex="-1" href="#" data-context-view="1" data-context-view-reverse="1" data-context-view-tail="1"><i class="fa fa2 fa-fw fa2-align-bottom"><i class="fa fa2 fa2-swap-vertical fa-flip-horizontal"></i></i>&nbsp;&nbsp;'+theme_language("filemanager_view_tail_and_reverse")+'</a></li>                            <li><a tabindex="-1" href="#" data-context-view="1"><i class="fa fa-fw fa2 fa2-align-vertical-middle"></i>&nbsp;&nbsp;'+theme_language("filemanager_view_head_and_tail")+'</a></li>                        </ul>                    </li>                    <li class="divider"></li>                    <li class="dropdown-submenu context-o__f_m-dependent-edit prelocked" role="menu">                        <a tabindex="-1" href="#" data-context-edit="1">&nbsp;&nbsp;'+theme_language("filemanager_context_edit")+'</a>                        <ul class="dropdown-menu" role="menu" context-o__f_m-dependent-htmledit="1">                            <li><a tabindex="-1" href="#" context-o__f_m-dependent-htmledit="1"><i class="fa fa-fw fa-html"></i>&nbsp;&nbsp;'+theme_language("filemanager_edit_html")+'</a></li>                        </ul>                    </li>                    <li><a tabindex="-1" href="#" data-context-rename="1">&nbsp;&nbsp;'+theme_language("filemanager_context_rename")+'</a></li>                    <li class="context-o__f_m-dependent-download"><a tabindex="-1" href="#" data-context-download-file="1">&nbsp;&nbsp;'+theme_language("filemanager_context_download_file")+'</a></li>                                        <li class="divider context-o__f_m-dependent-encrypt"></li>                    <li class="context-o__f_m-dependent-encrypt"><a tabindex="-1" href="#" data-context-encrypt="1"><i class="fa fa-fw fa-key-plus"></i>&nbsp;&nbsp;'+theme_language("global_encrypt")+'</a></li>                    <li class="divider context-o__f_m-dependent-extract"></li>                    <li class="context-o__f_m-dependent-extract dropdown-submenu prelocked" role="menu">                        <a tabindex="-1" href="#" data-context-extract="1"><i class="fa fa-fw fa-extract-archive"></i>&nbsp;&nbsp;'+theme_language("filemanager_context_extract")+'</a>                        <ul class="dropdown-menu" role="menu">                            <li><a tabindex="-1" href="#" data-context-extract-encrypted="1"><i class="fa fa-fw fa2 fa2-users-cog"></i>&nbsp;&nbsp;'+theme_language("filemanager_context_extract_encrypted")+'</a></li>                        </ul>                    </li>                    <li class="divider"></li>                    <li class="dropdown-submenu context-properties prelocked" role="menu">                        <a tabindex="-1" href="#" data-context-properties="1">&nbsp;&nbsp;'+theme_language("filemanager_context_properties")+'</a>                        <ul class="dropdown-menu dropdown-submenu-properties" role="menu">                            <li><a tabindex="-1" href="#" data-context-calculate-selected-size="1"><i class="fa fa-fw fa-calculator"></i>&nbsp;&nbsp;'+theme_language("filemanager_context_calculate_selected_size")+'</a></li>                            <li><a tabindex="-1" href="#" data-context-chmod="1"><i class="fa fa-fw fa-cogs"></i>&nbsp;&nbsp;'+theme_language("filemanager_context_chmod")+'</a></li>                            <li><a tabindex="-1" href="#" data-context-chown="1"><i class="fa fa-fw fa-users"></i>&nbsp;&nbsp;'+theme_language("filemanager_context_chown")+'</a></li>                            <li><a tabindex="-1" href="#" data-context-chattr="1"><i class="fa fa-fw fa-tags"></i>&nbsp;&nbsp;'+theme_language("filemanager_context_chattr")+'</a></li>                            <li><a tabindex="-1" href="#" data-context-chcon="1"><i class="fa fa-fw fa-shield"></i>&nbsp;&nbsp;'+theme_language("filemanager_context_chcon")+'</a></li>                            <li><a tabindex="-1" href="#" data-context-acls="1"><i class="fa2 fa-1_15x fa-fw fa2-account-key margined-left--3"></i>&nbsp;&nbsp;'+theme_language("filemanager_context_acls")+'</a></li>                            <li><a tabindex="-1" href="#" data-context-getinfo="1"><i class="fa fa-fw fa-info-circle"></i>&nbsp;&nbsp;'+theme_language("filemanager_context_prop_show_all")+"</a></li>                        </ul>                    </li>                </ul>"),$(t).on("click.fm","#__f__c__m li i.fa",function(e){$(this).parents("a").trigger("click")}).on("hidden.bs.modal",$v__fm__container_fluid,function(){$(".modal-backdrop").remove()}).on("click.fm",function(e){$(".tooltip").each(function(){$(this).is(e.target)||0!==$(this).has(e.target).length||0!==$(".tooltip").has(e.target).length||$(this).tooltip("hide")})}).on("click.fm",$v__fm__container_fluid+" .breadcrumb .fa-caret-right",function(e){e.preventDefault(),e.stopPropagation();var a=$($v__fm__container_fluid+" .breadcrumb span[data-tree]"),t=$($v__fm__container_fluid+" .breadcrumb .fa-caret-down"),_=$(this),n=_.attr("data-path"),i=n||"%2F";_.parent("a").attr("href");$dirCurrent=_.parent("a").text(),a.remove(),t.addClass("fa-caret-right").removeClass("fa-caret-down"),_.parent("a").next("span[data-tree]").length||(_.addClass("invisible").after('<span class="cspinner"><span class="cspinner-icon smallest"></span></span>'),$(this).removeClass("fa-caret-right").addClass("fa-caret-down"),_.parent("a").after('<span class="hidden" data-tree=""></div>'),$.ajax({type:"POST",url:v___location_prefix+"/xhr.cgi?xhr-get_list=1&xhr-get_list_path="+i+"&xhr-get_list_cmodule="+v___module_file_manager,data:!1,dataType:"JSON",success:function(e){i=fm_path_check_jailed(i),$.each($(e),function(e,a){var t=Convert.htmlEscape(a);_.parent("a").next("span[data-tree]").append('<a href="index.cgi?path='+fm_process_path(i)+"%2F"+Convert.encodeURIComponentConsistent(a)+'"><i class="fa fa-fw '+($dirCurrent==a?"fa-folder-open-o":"fa-folder-o")+'">&nbsp;&nbsp;</i>'+($dirCurrent==a?" <strong>"+t+"</strong>":" "+t)+"</a>")}).promise().done(function(){_.removeClass("invisible").next(".cspinner").remove(),_.parent("a").removeClass("text-black"),_.parent("a").next("span[data-tree]").removeClass("hidden");var e=_.parent("a").next("span[data-tree]"),a=$("span[data-tree] i.fa-folder-open-o").parent("a");void 0!==a.offset()&&void 0!==e.offset()&&e.animate({scrollTop:a.offset().top-e.offset().top+e.scrollTop()},0)})},error:function(e){session.status(e.responseText)}}))}).on("mouseenter.fm",$v__fm__container_fluid+" .breadcrumb .fa-caret-right",function(e){$(this).parent("a").addClass("text-black")}).on("mouseleave.fm",$v__fm__container_fluid+" .breadcrumb .fa-caret-right",function(e){$(this).parent("a").removeClass("text-black")}).on("click.fm",function(e){var a=$($v__fm__container_fluid+" .breadcrumb a + span[data-tree]"),t=$($v__fm__container_fluid+" .breadcrumb .fa-caret-down");a.length&&(a.remove(),t.addClass("fa-caret-right").removeClass("fa-caret-down"))}),$.each($($v__fm__container_fluid+" .modal .modal-content .modal-footer"),function(e,a){$(this).wrapInner('<div class="btn-group"></div>')}),$($v__fm__container_fluid+" .btn-group.pull-right").find(".fa-check-square").removeClass("fa-check-square").addClass("fa-share-square-o"),$($v__fm__container_fluid+" #headln2r").find('a[href*="config.cgi"]').attr("href",v___location_prefix+"/mconfig.cgi?module="+v___module_file_manager),$($v__fm__container_fluid+" #headln2l .help_popup").css("padding","6px 12px"),$($v__fm__container_fluid+" #headln2l .btn-group > a.btn:first-child > i").attr("data-container",".data-content-container").attr("data-placement","right").attr("data-title",theme_language("global_dir_up")).attr("data-toggle","tooltip").tooltip("fixTitle"),$($v__fm__container_fluid+' ul > li > a[href^="bookmark.cgi?path="]').parents("ul").addClass("at-o__f_m-favorites-dropdown").find(".fa-bookmark-o").removeClass("fa-bookmark-o").addClass("fa-fw fa-star-o"),$($v__fm__container_fluid+' div button[onclick="removeDialog()"]').addClass("disabled o__f_m-button-delete").removeAttr("onclick"),$($v__fm__container_fluid+' a[onclick="chmodDialog()"]').removeAttr("onclick").parent("li").addClass("disabled o__f_m-button-chmod"),$($v__fm__container_fluid+' a[onclick="chownDialog()"]').removeAttr("onclick").parent("li").addClass("disabled o__f_m-button-chown"),$($v__fm__container_fluid+' a[onclick="chattrDialog()"]').removeAttr("onclick").parent("li").addClass("disabled o__f_m-button-chattr"),$($v__fm__container_fluid+' a[onclick="chconDialog()"]').removeAttr("onclick").parent("li").addClass("disabled o__f_m-button-chcon"),$($v__fm__container_fluid+' a[onclick="aclsDialog()"]').removeAttr("onclick").parent("li").addClass("disabled o__f_m-button-acls"),$($v__fm__container_fluid+' a[onclick="compressDialog()"]').removeAttr("onclick").parent("li").addClass("disabled o__f_m-button-compress"),$($v__fm__container_fluid+' a[onclick="copySelected()"]').removeAttr("onclick").parent("li").addClass("disabled o__f_m-button-copy"),$($v__fm__container_fluid+' a[onclick="cutSelected()"]').removeAttr("onclick").parent("li").addClass("disabled o__f_m-button-cut"),$($v__fm__container_fluid+' #chmodDialog input[id="perms"]').val(""),localStorage.getItem(v___server_hostname+"-copy")||localStorage.getItem(v___server_hostname+"-cut")?$($v__fm__container_fluid+' a[onclick*="paste.cgi"]').removeAttr("onclick").parent("li").addClass("o__f_m-button-paste"):$($v__fm__container_fluid+' a[onclick*="paste.cgi"]').removeAttr("onclick").parent("li").addClass("disabled o__f_m-button-paste"),$($v__fm__container_fluid+' form[name="chmod"] input[name="t_total"]').attr("type","number"),theme_server_data_available_selinux||($($v__fm__container_fluid+" li.o__f_m-button-chcon").addClass("hidden"),$($v__fm__container_fluid+" + #__f__c__m a[data-context-chcon]").parent("li").addClass("hidden"),$($v__fm__container_fluid+" + #__f__c__m .dropdown-submenu-properties").css("top","-74px")),theme_server_data_available_acls||($($v__fm__container_fluid+" li.o__f_m-button-acls").addClass("hidden"),$($v__fm__container_fluid+" + #__f__c__m a[data-context-acls]").parent("li").addClass("hidden"),$($v__fm__container_fluid+" + #__f__c__m .dropdown-submenu-properties").css("top","-74px")),$(t).on("click.fm",$v__fm__container_fluid+' button + .dropdown-menu.at-o__f_m-favorites-dropdown > li > a:not([href^="bookmark.cgi"])',function(){$(this).parents("ul").trigger("mouseleave")}),$.each($($v__fm__container_fluid+" .btn-group.pull-right .btn-group"),function(){$(this).find("button > .caret").css("margin-left","3px"),$(this).find("button + ul.dropdown-menu > li > a").css("padding-left","12px"),$(this).find("button + ul.dropdown-menu > li > a > i").append("&nbsp;&nbsp;"),$(this).find("ul").addClass("pull-right").find(".fa-paste").removeClass("fa-paste").addClass("fa-fw fa-clipboard").text("").after("&nbsp;&nbsp;"),$(this).find("ul").addClass("pull-right").find(".fa-search").addClass("fa-fw").text("").after("&nbsp;")}).promise().done(function(){f_m__bm__c()}),$(t).on("click.fm",$v__fm__container_fluid+" .file-manager-remove-bookmark",function(e){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation();var a=fm_extract_path($(this).parent("a").attr("href"));$(this).parent("a").parent("li");$.ajax({type:"POST",url:v___server_extensions_path+"/file-manager/bookmark.cgi?module="+v___module_file_manager,data:{path:a},dataType:"text",success:function(e){session.status(e)&&(f_m__bm__u(a),plugins.messenger.post('<i class="fa fa-lg fa-fw fa-star-o"></i>'+theme_language("filemanager_unbookmark_success").replace("%value",a?fm_process_path(a,"escape/decode"):"/"),5,"warning","bookmarkAddRemove",1,["bottom","right"]))},error:function(e){}})}).on("mousemove.fm",function(e){$(this).data("mousePageX",e.pageX).data("mousePageY",e.pageY)}).on("MacIntel"!==window.navigator.platform||browser.detect.safari()?"click.fm":"mouseup.fm",".___f_m__q__:visible .ui_checked_columns",function(e){if(e.ctrlKey){if($(e.target).is('input[name="name"].iawobject'))return;e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),$(this).find("td:first-child").trigger("contextmenu")}}),$(".breadcrumb").after('<button class="btn btn-inverse path-manual"><i class="fa fa-folder-open-o"></i></button>'),$(".breadcrumb ~ .path-manual").attr("data-title",theme_language("filemanager_path_manual")).attr("data-toggle","tooltip"),$(".breadcrumb ~ .path-manual").on("click.fm",function(e){e.preventDefault(),fm_path_manual_popover()}),$($v__fm__container_fluid+" .panel-body > .modal").on("hidden.bs.modal",function(){document.activeElement.blur()}),0!==get_access_level()&&1!==get_access_level()&&$(t).find($v__fm__container_fluid+" .breadcrumb li:first-child a").html('<i class="fa2 fa2-home-outline text-light">&nbsp;</i>'),$(t).find($v__fm__container_fluid+" .breadcrumb li:first-child").addClass("fm___root__"),__f___u(!1,!1,0,0),$($v__fm__container_fluid+' button[onclick="selectAll()"], '+$v__fm__container_fluid+' button[onclick="invertSelection()"]').click(function(){setTimeout(function(){__r____changed()},0);var e=$(this).attr("onclick");e&&e.includes("selectAll")&&select_all_entries()}),$(t).on("click.fm",$v__fm__container_fluid+' #headln2l div.btn-group > a[href*="'+v___module_file_manager+'"][href*="index.cgi"]',function(e){e.preventDefault(),e.stopPropagation(),__f___b_dr(e)}).on("click.fm",$v__fm__container_fluid+" .breadcrumb li > a:not(.fa-keyboard-o), .breadcrumb li > a + span[data-tree] > a, .dropdown-menu.at-o__f_m-favorites-dropdown > li:not(.data-context-bookmarks) > a:not(.no_effect), .active table label > a.o__f_m-follow-file",function(e){e.preventDefault(),e.stopPropagation();var a="index.cgi?path=",t=0,_=$(e.target).find(".file-manager-add-bookmark, .file-manager-remove-bookmark").length;$(this).attr("href")&&-1===$(this).attr("href").indexOf("/"+v___module_file_manager)&&(a=$(this).attr("href")),"index.cgi?path=/"===a&&(a="index.cgi?path=");var n=a.indexOf("bookmark.cgi?")>-1;if(a&&n)t=1;else{if($(this).parent().is("span[data-tree]")&&(a=a.replace("//","/"),3===get_access_level())){var i=get_user_home();a=a.replace(i,"")}$(this).parents(".at-o__f_m-favorites-dropdown").length&&$(this).closest(".dropdown-menu").prev().dropdown("toggle"),__f____r("get",a,!1,t,!1,void 0!==e.originalEvent),!_&&fm_root_dir_spinner_add()}}).on("click.fm",$v__fm__container_fluid+' li.o__f_m-button-copy:not(".disabled") a',function(e){e.preventDefault(),e.stopPropagation(),plugins.messenger.post('<i class="fa fa-lg fa-fw fa-clone"></i>'+theme_language("filemanager_copying_selected")+"<br>"+theme_language("global_please_wait"),0,"info","copy_info",1,["bottom","right"]),__f____a("copy",!1)}).on("click.fm",$v__fm__container_fluid+' li.o__f_m-button-cut:not(".disabled") a',function(e){e.preventDefault(),e.stopPropagation(),plugins.messenger.post('<i class="fa fa-lg fa-fw fa-scissors"></i>'+theme_language("filemanager_cutting_selected")+"<br>"+theme_language("global_please_wait"),0,"warning","cut_warning",1,["bottom","right"]),__f____a("cut",!1)}).on("click.fm",$v__fm__container_fluid+' li.o__f_m-button-paste:not(".disabled") a',function(e){e.preventDefault(),e.stopPropagation(),plugins.messenger.post('<i class="fa fa-lg fa-fw fa-clipboard"></i>'+theme_language("filemanager_pasting_selected")+"<br>"+theme_language("global_please_wait"),0,"info","paste_info",1,["bottom","right"]),__f____a("paste",!1)}).on("click.fm",$v__fm__container_fluid+' a[href^="extract.cgi"]',function(e){e.preventDefault(),e.stopPropagation(),fm_files_mode_ask(function(){plugins.messenger.post('<i class="fa fa-lg fa-fw fa-file-archive-o"></i>'+theme_language("filemanager_unpacking_archive")+"<br>"+theme_language("global_please_wait"),0,"info","extract_info",1,["bottom","right"]),__f____a("extract")})}),!0===vars.h.selector.content.get().data("AppleMobileDev")){var m=".popover, .tooltip, .jsPanel, #jsPanel-replacement-container, aside, .mobile-menu-toggler, #right-side-tabs, .right-side-tabs-toggler",u="pointer-events-none bg-filter-backdrop";$($v__fm__container_fluid+" .modal").on("shown.bs.modal",function(){$($v__fm__container_fluid).append($("body > .modal-backdrop").css("position","absolute").detach()),$(this).css("z-index",999999),theme.veiled(!0,m,u)}).on("hidden.bs.modal",function(){$(this).css("z-index",String()),theme.veiled(!1,m,u)})}$(t).find($v__fm__container_fluid+' #removeDialog button[type="button"][onclick="removeSelected()"]').removeAttr("onclick").addClass("_at_filemanager_delete_submit"),$(t).on("click.fm",$v__fm__container_fluid+" #removeDialog button._at_filemanager_delete_submit",function(e){e.preventDefault(),e.stopPropagation(),$(this).hasClass("_empty-trash")&&(fm_deletion_empty_trash=1,setTimeout(function(){fm_deletion_empty_trash=0},1)),plugins.messenger.post('<i class="fa fa-lg fa-fw fa-trash'+(fm_deletion_empty_trash?" fa2 fa2-trash-empty-o":fm_deletion_to_trash?"":"-o")+'"></i>'+theme_language("filemanager_"+(fm_deletion_empty_trash?"emptying_trash":fm_deletion_to_trash?"removing":"deleting")+"_selected")+"<br>"+theme_language("global_please_wait"),0,"info","delete_info",1,["bottom","right"]),__f____a("delete"),theme_modal_dismiss()}),$($v__fm__container_fluid+" #removeDialog").on("show.bs.modal",function(){var e=0,a=1===fm_deletion_empty_trash;(1===~~fm_deletion_type||!fm_deletion_type&&config_portable_module_filemanager_move_to_trash)&&(e=1),fm_deletion_to_trash=e,fm_deletion_type=config_portable_module_filemanager_move_to_trash;var t=$(this).find("#items-to-remove"),_=$(this).find("h4"),n=theme_language("filemanager_context_"+(a?"empty_trash":e?"move_to_trash":"permanently_delete")),i=theme_language(a?"filemanager_empty_trash_button":e?"global_remove":"filemanager_context_delete"),r=a?"fa2 fa2-trash-empty-o":e?"fa-trash":"fa-trash-o",o=a?"btn-danger":e?"btn-warning":"btn-danger",s=$(this).find("._at_filemanager_delete_submit");if(t.empty(),select_all_entries("test")){get_current_list_stats()[0];var l='<span class="text-warning">'+theme_language("filemanager_mass_selected_for_delete").replace("%1","<tt>"+fm_get_current_path("escape/decode")+"</tt>")+"</span>";t.html(l)}else $.each(_f__gr("checked"),function(){if(config_portable_module_filemanager_move_to_trash&&".Trash"===$(this).val())return!0;t.append(Convert.htmlEscape($(this).val())+"<br>")});_.empty().append('<i class="fa fa-fw '+r+'" aria-hidden="true"></i>&nbsp;&nbsp;'+Convert.strUpFirst(n)),s.text(i).removeClass("btn-warning btn-danger").addClass(o),$(this).find(".modal-body").empty().append(t),$(this).find(".modal-body").toggleClass("hidden-force",a),s.toggleClass("_empty-trash",a)}),$(t).find($v__fm__container_fluid+' #renameDialog button[type="button"][onclick="renameSelected()"]').removeAttr("onclick").addClass("_at_filemanager_rename_submit"),$(t).on("click.fm",$v__fm__container_fluid+" #renameDialog button._at_filemanager_rename_submit",function(e){e.preventDefault(),e.stopPropagation(),plugins.messenger.post('<i class="fa fa-lg fa-fw fa-i-cursor"></i>'+theme_language("filemanager_renaming_selected")+"<br>"+theme_language("global_please_wait"),0,"info","rename_info",1,["bottom","right"]),__f____a("rename",!1)}).on("submit.fm",$v__fm__container_fluid+" #renameDialog",function(e){e.preventDefault(),e.stopPropagation(),$($v__fm__container_fluid+" #renameDialog button._at_filemanager_rename_submit").trigger("click")}),$($v__fm__container_fluid+" #renameDialog").on("shown.bs.modal",function(){var e=$(this).find('input[type="text"]');e.focus(),e.select()}),$($v__fm__container_fluid+" #renameDialog").on("show.bs.modal",function(e){$(this).find('input[type="text"]'),$(this).find("button._at_filemanager_rename_submit")}),$($v__fm__container_fluid+' #renameDialog input[type="text"]').on("keyup.fm change.fm click.fm input.fm",function(e){var a=$($v__fm__container_fluid+" #renameDialog").find("button._at_filemanager_rename_submit");$(this).val()?a.prop("disabled",!1):a.prop("disabled",!0)}),$(t).find($v__fm__container_fluid+' #createFolderDialog button[type="button"][onclick="createFolder()"]').removeAttr("onclick").addClass("_at_filemanager_create_folder_submit"),$(t).on("click.fm",$v__fm__container_fluid+" #createFolderDialog button._at_filemanager_create_folder_submit",function(e){e.preventDefault(),e.stopPropagation(),plugins.messenger.post('<i class="fa fa-lg fa-fw fa-folder"></i>'+theme_language("filemanager_creating_directory")+" <tt>"+Convert.htmlEscape($('#createFolderForm input[name="name"]').val())+"</tt>.<br>"+theme_language("global_please_wait"),0,"info","create_folder_info",1,["bottom","right"]),__f____a("create_folder",!1)}).on("submit.fm",$v__fm__container_fluid+" #createFolderForm",function(e){e.preventDefault(),e.stopPropagation(),$($v__fm__container_fluid+" #createFolderDialog button._at_filemanager_create_folder_submit").trigger("click")}),$($v__fm__container_fluid+" #createFolderDialog").on("shown.bs.modal",function(){$(this).find('input[type="text"]').focus()}),$($v__fm__container_fluid+" #createFolderDialog").on("show.bs.modal",function(){var e=$(this).find('input[type="text"]'),a=$(this).find("button._at_filemanager_create_folder_submit");e.val(""),!e.val()&&a.prop("disabled",!0)}),$($v__fm__container_fluid+' #createFolderDialog input[type="text"]').on("keyup.fm change.fm click.fm input.fm",function(e){var a=$($v__fm__container_fluid+" #createFolderDialog").find("button._at_filemanager_create_folder_submit");$(this).val()?a.prop("disabled",!1):a.prop("disabled",!0)}),$(t).find($v__fm__container_fluid+' #createFileDialog button[type="button"][onclick="createFile()"]').removeAttr("onclick").addClass("_at_filemanager_create_file_submit"),$(t).on("click.fm",$v__fm__container_fluid+" #createFileDialog button._at_filemanager_create_file_submit",function(e){e.preventDefault(),e.stopPropagation(),plugins.messenger.post('<i class="fa fa-lg fa-fw fa-file"></i>'+theme_language("filemanager_creating_file")+" <tt>"+Convert.htmlEscape($('#createFileForm input[name="name"]').val())+"</tt>.<br>"+theme_language("global_please_wait"),0,"info","create_file_info",1,["bottom","right"]),__f____a("create_file",!1)}).on("submit.fm",$v__fm__container_fluid+" #createFileForm",function(e){e.preventDefault(),e.stopPropagation(),$($v__fm__container_fluid+" #createFileDialog button._at_filemanager_create_file_submit").trigger("click")}),$($v__fm__container_fluid+" #createFileDialog").on("shown.bs.modal",function(){$(this).find('input[type="text"]').focus()}),$($v__fm__container_fluid+" #createFileDialog").on("show.bs.modal",function(){var e=$(this).find('input[type="text"]'),a=$(this).find("button._at_filemanager_create_file_submit");e.val(""),!e.val()&&a.prop("disabled",!0)}),$($v__fm__container_fluid+' #createFileDialog input[type="text"]').on("keyup.fm change.fm click.fm input.fm",function(e){var a=$($v__fm__container_fluid+" #createFileDialog").find("button._at_filemanager_create_file_submit");$(this).val()?a.prop("disabled",!1):a.prop("disabled",!0)}),$(t).find($v__fm__container_fluid+' #downFromUrlDialog button[type="button"][onclick="downFromUrl()"]').removeAttr("onclick").addClass("o__f_m-submitter-url_download"),$(t).on("click.fm",$v__fm__container_fluid+" #downFromUrlDialog button.o__f_m-submitter-url_download",function(e){e.preventDefault(),e.stopPropagation(),plugins.messenger.post('<i class="fa fa-lg fa-fw fa-download"></i>'+theme_language("filemanager_downloading_from")+" <strong>"+URI(Convert.htmlEscape($('#downFromUrlForm input[name="link"]').val())).hostname()+"</strong>.<br>"+theme_language("global_please_wait"),0,"info","url_download_info",1,["bottom","right"]),__f____a("url_download",!1)}).on("submit.fm",$v__fm__container_fluid+" #downFromUrlForm",function(e){e.preventDefault(),e.stopPropagation(),$($v__fm__container_fluid+" #downFromUrlDialog button.o__f_m-submitter-url_download").trigger("click")}),$($v__fm__container_fluid+" #downFromUrlDialog").on("shown.bs.modal",function(){$(this).find('input[name="link"]').focus()}),$($v__fm__container_fluid+" #downFromUrlDialog").on("show.bs.modal",function(){var e=$(this).find('input[name="link"]'),a=$(this).find("button.o__f_m-submitter-url_download");!e.val()&&a.prop("disabled",!0)}),$($v__fm__container_fluid+' #downFromUrlDialog input[name="link"]').on("keyup.fm change.fm click.fm input.fm",function(e){var a=$($v__fm__container_fluid+" #downFromUrlDialog").find("button.o__f_m-submitter-url_download");$(this).val()?a.prop("disabled",!1):a.prop("disabled",!0)});var p="disabled",g=p+" pointer-events-none",h=$v__fm__container_fluid+" #readyForUploadDialog",v=h+" [data-upload-reset]",b=v+" + .awcheckbox.thick",w="[data-pre-upload-container]",x=function(e){var a=e.find("input").is(":checked"),t=$(h).find(w),_=t.find("[data-pre-upload-text]");(_.length?_:t).html(theme_language("upload_initial_info"+(a?"_dir":""))),D()},y=function(e,a,t){var _="fa-upload-cloud";return"succ"===a?_="fa-check-circle":"err"===a&&(_="fa-exclamation-triangle"),'<i class="fa fa-1_15x fa-fw '+_+" margined-top--4"+(t=t?" "+t:"")+'"></i>&nbsp;&nbsp;&nbsp;<span data-pre-upload-text'+(t?' class="'+t+'"':"")+">"+(e=theme_language(e)||e)+"</span>"},k=function(e){var a=$v__fm__container_fluid+" #upload-form";return e?a:$(a)},C=function(e){var a='[type="file"]';return e?k("sel")+" "+a:k().find(a)},T=function(){return $(h).find('button[onclick="uploadFiles()"]')},D=function(){T().addClass(g).attr(p,p).find(".cspinner").replaceWith('<i class="fa fa-fw fa-check-circle"></i>')},S=function(e,a){var t,_=C()[0].hasAttribute("webkitdirectory")?"dir":null,n=k().find(w).addClass("link-text-a"),i=function(e){e?D():T().removeClass(g).removeAttr(p)},r=e&&e.files.length>0?e.files.length:"",o=function(e){return theme_language("global_file"+(1===e?"":"s")+"_selected")},s=!!(e&&e.files.length>0)&&o(e.files.length),l=y("upload_initial_info"+(_?"_dir":"")),f=($(b).find("input")[0].checked,e&&e.files&&e.files[0]?e.files[0]:"");f?(t=f,new Promise(function(e,a){if(""!==t.type)return e(t);const _=new FileReader;_.onloadend=()=>{if(_.error&&"NotFoundError"===_.error.name)return a(_.error.name);e(t)},_.readAsBinaryString(t)})).then(function(){i(0);var a=r&&_?theme_language("theme_xhred_upload_one_dir_with")+" "+r+" "+o(e.files.length):r+" "+s;n.html(s?y(a,"succ"):l)}).catch(function(){i(1),k().get(0).reset();var e=_?"upload_err_dir_mode":"upload_err_files_mode";n.html(y(e,"err","text-warning"))}):(i(1),n.html(l))};function j(){theme_message_dismiss("error_no_zip"),$.ajax({type:"POST",url:v___location_prefix+"/xhr.cgi?xhr-get_command_exists=1&xhr-get_command_exists_name=zip",data:!1,dataType:"text",success:function(e){if(session.status(e))if(e)$($v__fm__container_fluid+' select[name="method"]').prop("disabled",!1),$($v__fm__container_fluid+' select[name="method"] option[value="zip"]').prop("disabled",!1);else{$($v__fm__container_fluid+' select[name="method"]').val("tar").trigger("change"),$($v__fm__container_fluid+' select[name="method"] option[value="zip"]').prop("disabled",!0);var a=theme_language("global_no_such_command").replace("$1","zip");plugins.messenger.post('<i class="fa fa-lg fa-fw fa-exclamation-triangle"></i>'+theme_language("global_error")+": "+a,15,"error","error_no_zip",1,["bottom","right"]),$($v__fm__container_fluid+' select[name="method"]').find("option:not(:disabled)").length&&$($v__fm__container_fluid+' select[name="method"]').prop("disabled",!0)}},error:function(e){}})}function F(){theme_message_dismiss("error_no_tar"),$.ajax({type:"POST",url:v___location_prefix+"/xhr.cgi?xhr-get_command_exists=1&xhr-get_command_exists_name=tar",data:!1,dataType:"text",success:function(e){if(session.status(e))if(e)$($v__fm__container_fluid+' select[name="method"]').prop("disabled",!1),$($v__fm__container_fluid+' select[name="method"] option[value="zip"]').prop("disabled",!1);else{$($v__fm__container_fluid+' select[name="method"]').val("zip").trigger("change"),$($v__fm__container_fluid+' select[name="method"] option[value="tar"]').prop("disabled",!0);var a=theme_language("global_no_such_command").replace("$1","tar");plugins.messenger.post('<i class="fa fa-lg fa-fw fa-exclamation-triangle"></i>'+theme_language("global_error")+": "+a,15,"error","error_no_tar",1,["bottom","right"]),$($v__fm__container_fluid+' select[name="method"]').find("option:not(:disabled)").length&&$($v__fm__container_fluid+' select[name="method"]').prop("disabled",!0)}},error:function(){}})}$(h).on("show.bs.modal",function(){var e=uri_parse_param2("id",k().attr("action"));k().attr("action","upload.cgi?path="+fm_process_path($("#upload-form").find('input[name="path"]').val())+"&id="+e),$(this).find('input[name="overwrite_efiles"]')[0].checked=fm_overwrite_files,k().get(0).reset(),S(),$(this).find(".file-input-name").remove(),D()}).on("shown.bs.modal",function(){for(var e=1;e>=0;e--)x($(b))}),$(t).on("input.fm",b,function(e){void 0!==e.originalEvent&&($(v).trigger("click"),x($(this)))}).on("click.fm",v,function(){k().get(0).reset(),S()}).on("change.fm",C("sel"),function(e){S(this)}).on("submit.fm",$v__fm__container_fluid+" #upload-form",function(e){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation();var a=parseInt(1e18*Math.random()),t=fm_get_current_path(),_=$(this),n=1,i=0;function r(e,a){var t=_.parent("div").prev(".modal-header").find('[data-dismiss-id="'+a+'"][data-dismiss="modal"]:visible');if(e)return t.length;t.trigger("click")}function o(e){t===e&&($____loader_block__manual=1,$($v__fm__container_fluid+" ."+$__f__rf_s).trigger("click"),$____loader_block__manual=0)}function s(e,a,t){i||(r(1)?(r(0,t),setTimeout(function(){o(e)},300)):o(e),i++)}T().addClass(g).find(".fa").replaceWith(theme_spinner_small(!1,"white","width:12px; height:12px; margin-right: 3px; margin-left: 3px;")),_.parent("div").prev(".modal-header").find('[data-dismiss="modal"]:visible').attr("data-dismiss-id",a);var l="extract_uploaded",f=k().parent().next().find('[data-id="'+l+'"]').is(":checked")?"&"+l+"=1":"",c=fm_overwrite_files?"&overwrite_existing=1":"";fm_overwrite_files_mode_reset(),window["progress_id_ref_"+a]=$.ajax({type:"POST",url:v___location_prefix+"/"+v___module_file_manager+"/upload.cgi?path="+t+"&id="+a+f+c,processData:!1,contentType:!1,data:new FormData(_[0]),complete:function(e){const t=xhr_response_text_to_html(e).find("ul.err-body"),_='<i class="fa fa-lg fa-fw fa-upload"></i>';if(t.length){const e="<br><ul class='inner-error'>"+t.html()+"</ul>";plugins.messenger.post(_+theme_language("filemanager_upload_status_err")+e,15,"error","upload_error",1,["bottom","right"])}else plugins.messenger.post(_+theme_language("filemanager_upload_status_ok"),2,"success","upload_success",1,["bottom","right"]);s(fm_get_current_path(),0,a),r(0,a)},error:function(e){s(fm_get_current_path(),0,a),r(0,a),$("[data-progress-id="+a+"] .bottom_progress_cancel").trigger("click")}}),theme_message_dismiss("upload_error");var d,m=0!==get_access_level()&&1!==get_access_level()||get_jailed_user()?get_jailed_user()?get_jailed_user("uid"):session.server.data("user-id"):"";0===get_access_level()&&fm_user_data.subprivileged&&(m=session.server.data("user-id")),window["progress_id_ref_"+a+"_tracker"]=$.ajax({xhr:function(){var e=new window.XMLHttpRequest,t=0;return e.addEventListener("progress",function(e){var _=e.target.responseText,i=regex.matches(_,/.file\.value\s+=\s+"(.*)";/g,0,1),s=regex.matches(_,/.size\.value\s+=\s+"(.*)";/g,0,1),l=regex.matches(_,/.pc\.value\s+=\s+"(.*)";/g,0,1);if(s){if((l=l||t?parseInt((l.match(/|/g)||[]).length/50*100):0)||t++,l>100&&(l=100),progress_percent.control(a,"success",l,[i,s,l]),d||(d=i),d!=i)d=i,o(fm_get_current_path());n&&(r(0,a),n=0)}if(!session.status(_))return window["progress_id_ref_"+a].abort(),void window["progress_id_ref_"+a+"_tracker"].abort()},!1),e},type:"GET",url:v___location_prefix+"/uptracker.cgi?id="+a+"&uid="+m,complete:function(){s(fm_get_current_path(),0,a),r(0,a)}})}),$(t).find($v__fm__container_fluid+' #searchDialog button[type="button"][onclick="search()"]').removeAttr("onclick").addClass("_at_filemanager_search_submit"),$(t).on("click.fm",$v__fm__container_fluid+" #searchDialog button._at_filemanager_search_submit",function(e){e.preventDefault(),e.stopPropagation(),__f____a("search",!1)}).on("submit.fm",$v__fm__container_fluid+" #searchForm",function(e){e.preventDefault(),e.stopPropagation(),$($v__fm__container_fluid+" #searchDialog button._at_filemanager_search_submit").trigger("click")}),$($v__fm__container_fluid+" #searchDialog").on("shown.bs.modal",function(){var e=$(this).find('input[name="query"]');setTimeout(function(){e[0].focus()},100)}).on("show.bs.modal",function(){$($v__fm__container_fluid+' #searchDialog input[name="query"]').trigger("keyup"),$($v__fm__container_fluid+' #searchDialog .fm-search-path input[type="text"]').val(Convert.uriDecodeComponent(fm_get_current_path()).replace(/[\/]+/g,"/")),$($v__fm__container_fluid+' input[name="grepreplace"]').prop("disabled",!0).val(""),$($v__fm__container_fluid+" ._at_filemanager_search_submit").text(theme_language("global_find")).removeClass("btn-warning").addClass("btn-primary")}).on("keyup.fm",'input[name="query"]',function(){var e=$($v__fm__container_fluid+' input[name="exclude"], '+$v__fm__container_fluid+' input[name="grepstring"], '+$v__fm__container_fluid+' input[name="grepreplace"], '+$v__fm__container_fluid+' select[name="limit_type"], '+$v__fm__container_fluid+' input[name="limit_size"], '+$v__fm__container_fluid+' input[name="limit_user"], '+$v__fm__container_fluid+' input[name="limit_group"], '+$v__fm__container_fluid+' input[name="caseins"], '+$v__fm__container_fluid+' input[name="regex"], '+$v__fm__container_fluid+' input[name="follow"]');$.trim($(this).val()).length?e.removeAttr("disabled"):e.prop("disabled",!0),$($v__fm__container_fluid+' #searchDialog input[name="grepstring"]').trigger("keyup")}).on("keyup.fm",'input[name="grepstring"]',function(){$.trim($(this).val()).length?$($v__fm__container_fluid+' input[name="grepreplace"]').removeAttr("disabled"):$($v__fm__container_fluid+' input[name="grepreplace"]').prop("disabled",!0)}).on("keyup.fm",'input[name="grepreplace"]',function(){$.trim($(this).val()).length?$($v__fm__container_fluid+" ._at_filemanager_search_submit").text(theme_language("global_replace")).removeClass("btn-primary").addClass("btn-warning"):$($v__fm__container_fluid+" ._at_filemanager_search_submit").text(theme_language("global_find")).removeClass("btn-warning").addClass("btn-primary")}),$($v__fm__container_fluid+" #searchDialog").on("show.bs.modal",function(){var e=$(this).find('input[type="text"]'),a=$(this).find("button._at_filemanager_search_submit");!$.trim(e.val()).length&&a.prop("disabled",!0)}),$(t).on("click.fm",$v__fm__container_fluid+" .__o__f_m-search-results-data",function(){var e=fm_get_current_path();__f____r("get","index.cgi?path="+(e?fm_process_path(e):"")+"&flush_reset=1",!1,0),theme_message_dismiss("search_preMe"),theme_message_dismiss("search_error")}),$($v__fm__container_fluid+' #searchDialog input[type="text"]').on("keyup.fm change.fm click.fm input.fm",function(e){var a=$($v__fm__container_fluid+" #searchDialog").find("button._at_filemanager_search_submit");$.trim($(this).val()).length?a.prop("disabled",!1):a.prop("disabled",!0)}),$(t).on("click.fm",$v__fm__container_fluid+' a[href^="bookmark.cgi"]',function(e){e.preventDefault(),e.stopPropagation();var a=$(this).attr("href");"bookmark.cgi?path="===a&&(a+="/"),fm_bookmark_searched_str=null,__f____a("bookmark",a)}),$($v__fm__container_fluid+' #chmodDialog button[onclick="chmodSelected()"]').removeAttr("onclick").addClass("o__f_m-submitter-chmod"),$(t).on("click.fm",$v__fm__container_fluid+" #chmodDialog button.o__f_m-submitter-chmod",function(e){e.preventDefault(),e.stopPropagation(),plugins.messenger.post('<i class="fa fa-lg fa-fw fa-user"></i>'+theme_language("filemanager_setting_permissions").replace("%value",Convert.htmlEscape($("#perms").val()))+"<br>"+theme_language("global_please_wait"),0,"info","chmod_info",1,["bottom","right"]),__f____a("chmod",[$("#perms").val(),$('#chmodForm select[name="applyto"] option:selected').val()])}),$($v__fm__container_fluid+" #chmodDialog").on("shown.bs.modal",function(){var e=$($v__fm__container_fluid+' #chmodDialog input[id="perms"]'),a=$($v__fm__container_fluid+" th span[data-head-permissions]").parent().index();if(a>1){var t=$v__fm__global_last_row.find("td:nth-child("+(a+1)+")").text();1===__f__cnt___selected()&&e.val(t).trigger("keyup")}}),$($v__fm__container_fluid+" #chmodDialog").on("hidden.bs.modal",function(){$($v__fm__container_fluid+' #chmodDialog input[id="perms"]').val("").keyup()}),$($v__fm__container_fluid+' #chownDialog button[onclick="chownSelected()"]').removeAttr("onclick").addClass("o__f_m-submitter-chown"),$(t).on("click.fm",$v__fm__container_fluid+" #chownDialog button.o__f_m-submitter-chown",function(e){e.preventDefault(),e.stopPropagation(),plugins.messenger.post('<i class="fa fa-lg fa-fw fa-users"></i>'+theme_language("filemanager_changing_ownership").replace("%value",Convert.htmlEscape($('#chownForm input[name="owner"]').val())+":"+Convert.htmlEscape($('#chownForm input[name="group"]').val()))+"<br>"+theme_language("global_please_wait"),0,"info","chown_info",1,["bottom","right"]),__f____a("chown",[$('#chownForm input[name="owner"]').val(),$('#chownForm input[name="group"]').val(),$('#chownForm input[name="recursive"]').prop("checked")])}),$($v__fm__container_fluid+" #chownDialog").on("shown.bs.modal",function(){var e=$($v__fm__container_fluid+' #chownDialog input[name="owner"]'),a=$($v__fm__container_fluid+' #chownDialog input[name="group"]'),t=$v__fm__global_last_row.find("td.col-ownership > label > span").text();if(t){var _=t.split(":");_[0]&&e.val(_[0]),_[1]&&a.val(_[1])}}),$($v__fm__container_fluid+" #chownDialog").on("show.bs.modal",function(){$(this).find("button.o__f_m-submitter-chown").prop("disabled",!0)}),$($v__fm__container_fluid+' #chownDialog input[name="owner"], '+$v__fm__container_fluid+' #chownDialog input[name="group"]').on("keyup.fm change.fm click.fm input.fm",function(e){var a=$($v__fm__container_fluid+" #chownDialog").find("button.o__f_m-submitter-chown");$($v__fm__container_fluid+' #chownDialog input[name="owner"]').val()&&$($v__fm__container_fluid+' #chownDialog input[name="group"]').val()?a.prop("disabled",!1):a.prop("disabled",!0)}),$($v__fm__container_fluid+' #chownDialog input[name="owner"], '+$v__fm__container_fluid+' #chownDialog input[name="group"]').on("keyup.fm",function(e){e.preventDefault(),13==e.which&&$($v__fm__container_fluid+" #chownDialog button.o__f_m-submitter-chown").trigger("click")}),$($v__fm__container_fluid+" #chownDialog").on("show.bs.modal",function(){$($v__fm__container_fluid+' #chownDialog input[name="owner"], '+$v__fm__container_fluid+' #chownDialog input[name="group"]').val(""),$($v__fm__container_fluid+' #chownDialog input[name="recursive"]').removeAttr("checked")}),$($v__fm__container_fluid+' #chattrDialog button[onclick="chattrSelected()"]').removeAttr("onclick").addClass("o__f_m-submitter-chattr"),$(t).on("click.fm",$v__fm__container_fluid+" #chattrDialog button.o__f_m-submitter-chattr",function(e){e.preventDefault(),e.stopPropagation(),plugins.messenger.post('<i class="fa fa-lg fa-fw fa-tags"></i>'+theme_language("filemanager_changing_attributes").replace("%value",Convert.htmlEscape($('#chattrForm input[name="label"]').val()))+"<br>"+theme_language("global_please_wait"),0,"info","chattr_info",1,["bottom","right"]),__f____a("chattr",[$('#chattrForm input[name="label"]').val(),$('#chattrForm input[name="recursive"]').prop("checked")])}),$($v__fm__container_fluid+" #chattrDialog").on("show.bs.modal",function(){$(this).find("button.o__f_m-submitter-chattr").prop("disabled",!0)}),$($v__fm__container_fluid+' #chattrDialog input[name="label"]').on("keyup.fm change.fm click.fm input.fm",function(e){var a=$($v__fm__container_fluid+" #chattrDialog").find("button.o__f_m-submitter-chattr");$($v__fm__container_fluid+' #chattrDialog input[name="label"]').val()?a.prop("disabled",!1):a.prop("disabled",!0)}),$($v__fm__container_fluid+' #chattrDialog input[name="label"]').on("keyup.fm",function(e){e.preventDefault(),13==e.which&&$($v__fm__container_fluid+" #chattrDialog button.o__f_m-submitter-chattr").trigger("click")}),$($v__fm__container_fluid+" #chattrDialog").on("show.bs.modal",function(){$($v__fm__container_fluid+' #chattrDialog input[name="label"]').val(""),$($v__fm__container_fluid+' #chattrForm input[name="recursive"]').removeAttr("checked")}),$($v__fm__container_fluid+' #chconDialog button[onclick="chconSelected()"]').removeAttr("onclick").addClass("o__f_m-submitter-chcon"),$(t).on("click.fm",$v__fm__container_fluid+" #chconDialog button.o__f_m-submitter-chcon",function(e){e.preventDefault(),e.stopPropagation(),plugins.messenger.post('<i class="fa fa-lg fa-fw fa-tags"></i>'+theme_language("filemanager_changing_secontext").replace("%value",Convert.htmlEscape($('#chconForm input[name="label"]').val()))+"<br>"+theme_language("global_please_wait"),0,"info","chcon_info",1,["bottom","right"]),__f____a("chcon",[$($v__fm__container_fluid+' #chconForm input[name="label"]').val(),$($v__fm__container_fluid+' #chconForm input[name="recursive"]').prop("checked")])}),$($v__fm__container_fluid+" #chconDialog").on("shown.bs.modal",function(){var e=$($v__fm__container_fluid+' #chconDialog input[name="label"]'),a=$v__fm__global_last_row.find("td.col-selinux").text();a&&e.val(a)}),$($v__fm__container_fluid+" #chconDialog").on("show.bs.modal",function(){$(this).find("button.o__f_m-submitter-chcon").prop("disabled",!0);var e={};$.unique($($v__fm__container_fluid+" tr td span[data-secontext]").map(function(){e[$(this).text()]=$(this).text()}).get());var a=$.map(e,function(e,a){if("undefined"!=a)return{value:e,url:a,data:{category:0}}});"function"==typeof $().autocomplete&&$($v__fm__container_fluid+' #chconDialog input[name="label"]').autocomplete({lookup:a,containerClass:"autocomplete-suggestions highlighted",showNoSuggestionNotice:!0,noSuggestionNotice:theme_language("global_no_results_found")})}),$($v__fm__container_fluid+' #chconDialog input[name="label"]').on("keyup.fm change.fm click.fm input.fm",function(e){var a=$($v__fm__container_fluid+" #chconDialog").find("button.o__f_m-submitter-chcon");$('#chconDialog input[name="label"]').val()?a.prop("disabled",!1):a.prop("disabled",!0)}),$($v__fm__container_fluid+' #chconDialog input[name="label"]').on("keydown.fm",function(e){13!=e.which||$(".autocomplete-suggestions:visible").length||$($v__fm__container_fluid+" #chconDialog button.o__f_m-submitter-chcon").trigger("click")}),$($v__fm__container_fluid+" #chconDialog").on("show.bs.modal",function(){$($v__fm__container_fluid+' #chconDialog input[name="label"]').val(""),$($v__fm__container_fluid+' #chconForm input[name="recursive"]').removeAttr("checked")}),$($v__fm__container_fluid+' #aclsDialog button[onclick="aclsSelected()"]').removeAttr("onclick").addClass("o__f_m-submitter-acls"),$(t).on("click.fm",$v__fm__container_fluid+" #aclsDialog button.o__f_m-submitter-acls",function(e){e.preventDefault(),e.stopPropagation(),plugins.messenger.post('<i class="fa2 fa-1_15x fa-fw fa2-account-key"></i>'+theme_language("filemanager_changing_acls")+"<br>"+theme_language("global_please_wait"),0,"info","acls_info",1,["bottom","right"]),__f____a("acls",[$($v__fm__container_fluid+" #aclsForm").serialize()])}),$($v__fm__container_fluid+" #aclsDialog").on("shown.bs.modal",function(){setTimeout(function(){$($v__fm__container_fluid+' #aclsDialog [name="action"]').focus()},2)}),$($v__fm__container_fluid+' #compressDialog button[onclick="compressSelected()"]').removeAttr("onclick").addClass("o__f_m-submitter-compress").prop("disabled",!0),$(t).on("click.fm",$v__fm__container_fluid+" #compressDialog button.o__f_m-submitter-compress",function(e){e.preventDefault(),e.stopPropagation(),plugins.messenger.post('<i class="fa fa-lg fa-fw fa-file-archive-o"></i>'+theme_language("filemanager_compressing_selected")+"<br>"+theme_language("global_please_wait"),0,"info","compress_info",0,["bottom","right"]);var a=$("#compressSelectedForm");__f____a("compress",[Convert.htmlEscape(a.find('input[name="filename"]').val()),a.find('select[name="method"] option:selected').val(),a.find('input[name="arcmove"]').is(":checked"),a.find('input[name="arcencr"]').is(":checked"),a.find('input[name="arcencr_val"]').val(),a.find('select[name="arkkey"] option:selected').val(),a.find('input[name="arcencr_pass"]').val(),a.find('select[name="arkkey"]').data("gpgpath")])}),$($v__fm__container_fluid+' #compressDialog input[name="filename"]').on("keyup.fm change.fm click.fm input.fm",function(){var e=$("#compressDialog").find("button.o__f_m-submitter-compress");$(this).val()&&$($v__fm__container_fluid+' select[name="method"]').find("option:not(:disabled)").length?e.prop("disabled",!1):e.prop("disabled",!0)}),$(t).on("submit.fm",$v__fm__container_fluid+" #compressSelectedForm",function(e){e.preventDefault(),e.stopPropagation(),$($v__fm__container_fluid+" #compressDialog button.o__f_m-submitter-compress").trigger("click")}),$($v__fm__container_fluid+" #compressDialog").on("show.bs.modal",function(){$($v__fm__container_fluid+' #compressDialog input[name="filename"]').val(""),$(this).find('input[name="overwrite_efiles"]')[0].checked=fm_overwrite_files;var e=$($v__fm__container_fluid+' #compressDialog input[name="arcencr"]');$($v__fm__container_fluid+' #compressDialog input[name="arcmove"]')[0].checked=!1,e.is(":checked")&&e.trigger("change")}).on("shown.bs.modal",function(){var e=$($v__fm__container_fluid+' select[name="method"]').attr("disabled");$($v__fm__container_fluid+' select[name="method"] option[value="zip"]').prop("disabled",!1),(e||"zip"==$($v__fm__container_fluid+' select[name="method"]').val())&&j(),(e||"tar"==$($v__fm__container_fluid+' select[name="method"]').val())&&F()}),$($v__fm__container_fluid+' select[name="method"]').change(function(e){"zip"==$(this).val()&&j(),"tar"==$(this).val()&&F();var a=$(this).parents(".modal").find('[name="arcencr"]');a[0].checked=!1,a.trigger("change")}),$(t).on("click.fm",$v__fm__container_fluid+" .dropdown-menu > li.disabled",function(e){e.preventDefault(),e.stopPropagation()}),"index.cgi"!==v___location_file||URI(v___location).hasQuery("path")||$($v__fm__container_fluid+" #headln2l").find('a[href*="'+v___module_file_manager+'"][href*="index.cgi"]').addClass("hidden"),$($v__fm__container_fluid+" .btn-group.pull-right > button:eq(2)").removeAttr("onclick"),$(t).on("click.fm",$v__fm__container_fluid+" .btn-group.pull-right > button:eq(2)",function(e){fm_get_current_path();__f__refresh__dir_and_tree()}),setTimeout(function(){1!=config_portable_module_filemanager_hovered_toolbar&&$($v__fm__container_fluid+" .btn-group.pull-right > .btn-group > button").hover(function(e){e.preventDefault(),e.stopPropagation()})},100),$(t).on("click.fm",$v__fm__container_fluid+" .btn-group.pull-right > button:eq(0), "+$v__fm__container_fluid+" .btn-group.pull-right > button:eq(1), "+$v__fm__container_fluid+" input",function(){0!==$($v__fm__container_fluid+" .active table tbody input:checked").length?setTimeout(__f___ub,100):setTimeout(__f___lb,100)}),$($v__fm__container_fluid+" .o__f_m-button-chmod a").html('<i class="fa fa-fw fa-cogs" aria-hidden="true"></i>&nbsp;&nbsp;'+theme_language("filemanager_context_chmod")),$($v__fm__container_fluid+" #chmodDialog .modal-header h4").html('<i class="fa fa-fw fa-cogs" aria-hidden="true"></i>&nbsp;&nbsp;'+theme_language("filemanager_context_chmod")),$($v__fm__container_fluid+" .o__f_m-button-chown a").html('<i class="fa fa-fw fa-users" aria-hidden="true"></i>&nbsp;&nbsp;'+theme_language("filemanager_context_chown")),$($v__fm__container_fluid+" #chownDialog .modal-header h4").html('<i class="fa fa-fw fa-users" aria-hidden="true"></i>&nbsp;&nbsp;'+theme_language("filemanager_context_chown")),$($v__fm__container_fluid+" .o__f_m-button-chattr a").html('<i class="fa fa-fw fa-tags" aria-hidden="true"></i>&nbsp;&nbsp;'+theme_language("filemanager_context_chattr")),$($v__fm__container_fluid+" #chattrDialog .modal-header h4").html('<i class="fa fa-fw fa-tags" aria-hidden="true"></i>&nbsp;&nbsp;'+theme_language("filemanager_context_chattr")),$($v__fm__container_fluid+" .o__f_m-button-chcon a").html('<i class="fa fa-fw fa-shield" aria-hidden="true"></i>&nbsp;&nbsp;'+theme_language("filemanager_context_chcon")),$($v__fm__container_fluid+" #chconDialog .modal-header h4").html('<i class="fa fa-fw fa-shield" aria-hidden="true"></i>&nbsp;&nbsp;'+theme_language("filemanager_context_chcon")),$($v__fm__container_fluid+" .o__f_m-button-acls a").html('<i class="fa2 fa-1_15x fa-fw fa2-account-key margined-left--3" aria-hidden="true"></i>&nbsp;&nbsp;'+theme_language("filemanager_context_acls")),$($v__fm__container_fluid+" #aclsDialog .modal-header h4").html('<i class="fa2 fa-1_15x fa-fw fa2-account-key margined-left--3" aria-hidden="true"></i>&nbsp;&nbsp;'+theme_language("filemanager_context_acls")),$($v__fm__container_fluid+" .o__f_m-button-compress a").html('<i class="fa fa-fw fa-file-archive-o" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;'+theme_language("filemanager_context_newarchive")),$($v__fm__container_fluid+" #compressDialog .modal-header h4").html('<i class="fa fa-fw fa-file-archive-o" aria-hidden="true"></i>&nbsp;&nbsp;'+theme_language("filemanager_context_newarchive")),$($v__fm__container_fluid+" #searchDialog .modal-header h4").html('<i class="fa fa-fw fa-search" aria-hidden="true"></i>&nbsp;&nbsp;'+theme_language("filemanager_context_search")),$($v__fm__container_fluid+" .o__f_m-button-copy a").html('<i class="fa fa-fw fa-files-o" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;'+theme_language("filemanager_context_copy")),$($v__fm__container_fluid+" .o__f_m-button-cut a").html('<i class="fa fa-fw fa-scissors" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;'+theme_language("filemanager_context_cut")),$($v__fm__container_fluid+' .btn-group .btn-group a[onclick="createFileDialog()"]').html('<i class="fa fa-fw fa-file-o" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;'+theme_language("filemanager_context_newfile")),$($v__fm__container_fluid+" #createFileDialog .modal-header h4").html('<i class="fa fa-fw fa-file-o" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;'+theme_language("filemanager_context_newfile")),$($v__fm__container_fluid+' .btn-group .btn-group a[onclick="createFolderDialog()"]').parent("li").addClass("_createFolderDialog_"),$($v__fm__container_fluid+' .btn-group .btn-group a[onclick="createFolderDialog()"]').html('<i class="fa fa-fw fa-folder-o" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;'+theme_language("filemanager_context_newfoder")),$($v__fm__container_fluid+" #createFolderDialog .modal-header h4").html('<i class="fa fa-fw fa-folder-o" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;'+theme_language("filemanager_context_newfoder")),$($v__fm__container_fluid+' .btn-group .btn-group a[onclick="viewReadyForUpload()"]').html('<i class="fa fa-fw fa-upload" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;'+theme_language("filemanager_context_upload")),$($v__fm__container_fluid+" #readyForUploadDialog .modal-header h4").html('<i class="fa fa-fw fa-upload" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;'+theme_language("filemanager_context_upload")),$($v__fm__container_fluid+' .btn-group .btn-group a[onclick="downFromUrlDialog()"]').html('<i class="fa fa-fw fa-download" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;'+theme_language("filemanager_context_download")),$($v__fm__container_fluid+" #downFromUrlDialog .modal-header h4").html('<i class="fa fa-fw fa-download" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;'+theme_language("filemanager_context_download")),$($v__fm__container_fluid+" #renameDialog .modal-header h4").prepend('<i class="fa fa-fw fa-i-cursor" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;'),$($v__fm__container_fluid+' .btn-group .btn-group a[onclick="downFromUrlDialog()"] i').removeClass("fa-globe").addClass("fa-download"),$($v__fm__container_fluid+" #removeDialog .modal-header h4").html('<i class="fa fa-fw fa-trash-o" aria-hidden="true"></i>&nbsp;&nbsp;'+theme_language("filemanager_context_delete_selected")),$($v__fm__container_fluid+" .o__f_m-button-compress").detach().insertAfter("._createFolderDialog_");var P="form-control heighter-28",E="invisible",I="hidden",z='<br><br><div class="form-inline"><div class="form-group"><span class="awcheckbox awobject awobjectm"><input id="arcmove" name="arcmove" type="checkbox" class="iawobject" value="3"><label class="lawobject font-weight-normal" for="arcmove">'+theme_language("filemanager_archive_move_to")+'&nbsp;&nbsp;&nbsp;</label></span><span class="awcheckbox awobject awobjectm encrypt"><input id="arcencr" name="arcencr" type="checkbox" class="iawobject" value="4"><label class="lawobject font-weight-normal" for="arcencr">'+theme_language("global_encrypt")+'</label></span><input placeholder="'+theme_language("login_pass")+'" name="arcencr_val" type="password" class="form-control heighter-28" size="15"><br><span onclick="fm_overwrite_files = this.querySelector(\'input\').checked ? true : false" class="awcheckbox awobject awobjectm"><input '+(fm_overwrite_files?"checked ":String())+'id="overwrite_efiles_3" name="overwrite_efiles" type="checkbox" class="iawobject" value="'+fm_overwrite_files+'"><label class="lawobject font-weight-normal" for="overwrite_efiles_3">'+theme_language("filemanager_files_mode_ask_title2")+'&nbsp;&nbsp; </label></span><span onclick="fm_follow_symlinks = this.querySelector(\'input\').checked ? true : false" class="awcheckbox awobject awobjectm"><input '+(fm_follow_symlinks?"checked ":String())+'id="follow_esymlinks_3" name="follow_esymlinks" type="checkbox" class="iawobject" value="'+fm_follow_symlinks+'"><label class="lawobject font-weight-normal" for="follow_esymlinks_3">'+theme_language("filemanager_search_follow_symlinks")+"&nbsp;&nbsp; </label></span></div></div>";$($v__fm__container_fluid+" #compressDialog").find('select[name="method"]').addClass(P).after(z);var A="arkkey",q=$v__fm__container_fluid+' input[name="arcencr_val"]',O="loader-"+A,U=theme_spinner_small(I+" vertical-align-inherit "+O," dark smallest"),R='<select class="'+E+" "+E+'-force" name="'+A+'"></select>',K=$v__fm__container_fluid+' select[name="method"]',N=$v__fm__container_fluid+" ."+O,L=$v__fm__container_fluid+' select[name="'+A+'"]',W="arcencr_pass",M=(theme_language("login_passphrase"),$v__fm__container_fluid+' input[name="'+W+'"]');$(q).passwordComplexityMeter(),$input_arcencr_wrap=$(q).parents(".t-password-complexity-meter-wrapper-cont"),$input_arcencr_wrap.addClass(E),$input_arcencr_wrap.before(U+R),$($v__fm__container_fluid+" #arcencr").on("change",function(e){var a=$(L);this.checked?"tar"===$(K).val()?($(N).removeClass(I),$input_arcencr_wrap.addClass(E).addClass(I),a.add(M).removeClass(E+" "+I),J()):($input_arcencr_wrap.removeClass(E).removeClass(I),a.add(M).addClass(E+" "+I)):($input_arcencr_wrap.addClass(E).removeClass(I),a.add(M).addClass(E+" "+I))});var J=function(e){var a="arkkey",t='<select name="'+a+'"></select>',_="loader-"+a,n=$($v__fm__container_fluid+' select[name="'+a+'"]'),i=$v__fm__container_fluid+' input[name="'+W+'"]';n.css("width",0).addClass(E),$($v__fm__container_fluid+" ."+_).removeClass(I),$.ajax({type:"POST",url:v___location_prefix+"/xhr.cgi?xhr-get_gpg_keys=1&xhr-get_gpg_keys_all="+(event_hold_modifer_pressed()?1:0)+__f___um()+"&xhr-get_gpg_keys_cmodule="+v___module_file_manager,data:!1,dataType:"json",success:function(a){$($v__fm__container_fluid+" ."+_).addClass(I);var r=a.public,o=a.gpgpath;if($new_ark_key_sel=$(t).addClass(P).data("gpgpath",o),are_there_keys=0,$.each(r,function(e,a){$new_ark_key_sel.append('<option value="'+e+'">'+a+"</option>"),are_there_keys++}),are_there_keys)$new_ark_key_sel.prepend('<option class="text-muted" value="" disabled selected>'+theme_language("filemanager_gpg_select_the_key")+"</option>");else{var s=fm_get_current_home_username();s||(s=session.server.data("user")),get_jailed_user()&&(s=get_jailed_user("user")),$new_ark_key_sel.prepend('<option  class="text-muted" value="" disabled selected>'+theme_language("filemanager_archive_gpg_no_keys")+" ["+s+"]</option>")}var l=n.parents(".modal-body");modal_body_outerWidth=parseInt(l.outerWidth()),$parents_form_inline=l.find(".form-inline"),$cbs=$parents_form_inline.find(".awcheckbox"),$move_to_arch_cb=$cbs[0],$encr_cb=$cbs[1],move_to_arch_cb_outerWidth=parseInt($($move_to_arch_cb).outerWidth()),encr_cb_outerWidth=parseInt($($encr_cb).outerWidth());var f=parseInt(modal_body_outerWidth-move_to_arch_cb_outerWidth-encr_cb_outerWidth-48);e&&(f/=2),$(i).css("width",f),$new_ark_key_sel.css("width",f);var c=n.val();$new_ark_key_sel.find('option[value="'+c+'"]').length&&$new_ark_key_sel.val(n.val()),n.replaceWith($new_ark_key_sel)},error:function(e){session.status(e.responseText)}})},Q='<li class="o__f_m-button-symlink disabled"><a class="no_effect" style="padding-left: 12px;"><i class="fa fa-fw fa-sms fa-file-symlink margined-right--1 margined-left--1" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;'+theme_language("filemanager_context_symlink")+"</a></li>";$($v__fm__container_fluid+" .btn-group ._createFolderDialog_").parent("ul").prepend(Q),$($v__fm__container_fluid+" .btn-group .o__f_m-button-symlink").on("click",function(){__f___new_symlink()}),config_portable_module_filemanager_hide_toolbar&&($($v__fm__container_fluid+" .btn-group.pull-right").addClass("hidden"),$($v__fm__container_fluid+" .breadcrumb.pull-left").removeClass("pull-left").addClass("pull-right").css("margin-bottom","-20px"),$($v__fm__container_fluid+" .o__f_m-main-spinner").css({"margin-top":"40px","margin-left":"170px"}));_='.breadcrumb:visible [data-toggle="popover-path"]';var B="popover-path-input";$(t).on("inserted.bs.popover",_,function(){var e=$(".popover-path-input").parents(".popover");e.addClass("popover-path-data"),e.find(".input-group > .input-group-addon:first-child").on("click",function(a){a.preventDefault(),e.popover("hide")})}).on("shown.bs.popover",_,function(){$("."+B).val(fm_process_path(fm_get_current_path(),"decode")),$("."+B).focus(),$("."+B).keydown(function(e){if(13===(e.keyCode?e.keyCode:e.which)){e.preventDefault(),e.stopPropagation(),block_events();$('[data-toggle="popover-path"]');var a=$(".breadcrumb > li:first-child");a.append('<a class="hidden-force '+B+'-value" href="index.cgi?path='+fm_process_path($(this).val())+'"></a>'),$(".popover-path-button").find("i").addClass("invisible").parent().find(".cspinner").removeClass("hidden"),a.find("."+B+"-value").trigger("click").remove(),$('[data-toggle="popover-path"]').popover("hide")}}),$(".popover-path-data").css({opacity:1})});_=$v__fm__container_fluid+' [data-toggle="popover-path"]';$(t).on("hide.bs.popover",_,function(){$($v__fm__container_fluid+" .popover-path-data").css("opacity",0)}).on("click.fm",".popover-path-button",function(){var e=jQuery.Event("keydown");e.which=13,$(" ."+B).trigger(e)}).on("contextmenu.fm",$v__fm__container_fluid+" .breadcrumb",function(e){e.preventDefault(),$(".__o__f_m-search-results-data:visible").length||$($v__fm__container_fluid+' [data-toggle="popover-path"]').popover("show")}),$($v__fm__container_fluid+" #nothingSelected").remove(),$($v__fm__container_fluid+" .active ul.pagination li:first-child").trigger("click")}page.render.content.filter.init(),$($v__fm__container_fluid+' .modal-content input:not([type="radio"], '+$v__fm__container_fluid+' [type="checkbox"], '+$v__fm__container_fluid+' [type="hidden"])').addClass("heighter-28"),setTimeout(function(){page.render.content.filter.clear()},10),$(t).on("click.fm",$v__fm__container_fluid+" .active .ui_checked_columns",function(e){var a=e.keyCode?e.keyCode:e.which;if(!check_selected_text()&&1===a){if(vars.events.keypressed.shift||!$(e.target).is("td.ui_checked_checkbox")||!$(e.target).find("input:checkbox").length){var t=$(e.target).parents("tr");if(!$(e.target).is(":checkbox")&&!$(e.target).is(".lawobject")){var _=fm_get_current_path();if(goup=t.hasClass("directory_go_up"),link=t.find('td a[href*="index.cgi?path="]').first().attr("href"),link_escaped=t.find("td a[data-filemin-link]").attr("data-filemin-link"),download=t.find('td a[href*="download.cgi?"]').attr("href"),td_tag=$(e.target).is("td"),goup&&__f___b_dr(e),download&&!td_tag)return e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),void $(e.target).parents("tr").find('td.ui_checked_checkbox input[type="checkbox"]').trigger("click");if(e.preventDefault(),!(!fm_is_search_results()&&link||fm_is_search_results()&&t.find('td.col-name:visible[data-xfile="0"]').first().length))return td_tag?(e.stopPropagation(),e.stopImmediatePropagation(),void $(e.target).parents("tr").find('td.ui_checked_checkbox input[type="checkbox"]').trigger("click")):void 0;__f___o_dr($(this),_,link,void 0!==e.originalEvent)}}}}),$(t).on("keydown.fm",function(e){var a=e.keyCode?e.keyCode:e.which,_="mac"===platform.detect(),n=_?e.metaKey:e.ctrlKey,r=_?e.ctrlKey:e.metaKey;if(!($("aside input").is(":focus")||plugins.shell.status()||$("input.popover-path-input").is(":focus")||$(".ui-fancytree").is(":focus")||$($v__fm__container_fluid+" input.dataTable-mirror").is(":focus")&&13!=a&&40!=a||$($v__fm__container_fluid+' textarea[name="bookmarks"]').is(":focus")||$(".bootbox.modal").length||$(".user_motd_data.in").length||document.querySelector(".pswp"))){var s=$($v__fm__container_fluid_modal_in).length||$(".fm_fileinfo_data.modal.in").length,l=$($v__fm__container_fluid+" .popover").is(":visible"),f=$($v__fm__container_fluid+" input.popover-path-input").is(":focus"),c=$(":focus").parents(".jsPanel").is(".jsPanel"),d=!$("input").is(":focus")&&!$("select").is(":focus")&&!$("textarea").is(":focus"),m=$("#__f__c__m"),u="table tbody tr",p="m-active",g="m-not-active",h="directory_go_up",v="td:first-child input",b='input[name="passphrase"]';if(13===a&&$(e.target).is(b))return e.preventDefault(),void $(b).parents("#encryptDecrypt").find(".o__f_m-submitter-decrypt_encrypt").trigger("click");if(event_hold_modifer_pressed()&&context_menu_toggle_delete_trash(),m.is(":visible")&&27==a)m.css("display","none");else if(!m.is(":visible")){var w=$(".select2-dropdown:visible").length||$(":focus").is(".jsPanel")||c||s?0:1,x=$(".cke_dialog_background_cover:visible").length||$(".tree-view-filter input").is(":focus");if("r"!=String.fromCharCode(a).toLowerCase()||!n||e.shiftKey||e.altKey||r){if(!(f||l||x)&&w||(13==a||n||e.shiftKey)&&!x){if(w&&(32==a&&e.altKey&&(e.preventDefault(),e.stopPropagation(),e.shiftKey?$($v__fm__container_fluid+" .nav.nav-tabs").find("li.active").find("a").find("i").trigger("click"):$("#file-manager-new-instance:not(.disabled_no_styling)").trigger("click")),(49==a||50==a||51==a||52==a||53==a||54==a||55==a||56==a||57==a)&&e.altKey)){var y=a-48;return e.preventDefault(),e.stopPropagation(),void $.each($($v__fm__container_fluid+" .nav.nav-tabs").find("li"),function(e,a){e+1!=y||$(this).find("a").trigger("click")})}if((120==a||121==a)&&!n&&!e.shiftKey&&w){if(120==a)return void $($v__fm__container_fluid+' a[onclick="downFromUrlDialog()"]').trigger("click");if(121==a)return void $($v__fm__container_fluid+' a[onclick="viewReadyForUpload()"]').trigger("click")}if("k"==String.fromCharCode(a).toLowerCase()&&e.shiftKey&&e.altKey&&!r&&!n&&w)return e.preventDefault(),e.stopPropagation(),void $($v__fm__container_fluid+" ."+o).trigger("click");if(!f&&"l"==String.fromCharCode(a).toLowerCase()&&!e.shiftKey&&!e.altKey&&!r&&n&&w)return e.preventDefault(),e.stopPropagation(),void fm_path_manual_popover();if($v__fm__global_last_row_active=$($v__fm__container_fluid_form+" "+u+"."+p),93==a&&w)return e.preventDefault(),e.stopPropagation(),$($v__fm__container_fluid_form+" "+u+"."+p).length||$($v__fm__container_fluid_form+" "+u+":first-child:not(."+h+")").addClass(p),void $($v__fm__container_fluid_form+" "+u+"."+p).find(v).trigger("contextmenu");if(!c)if(13!==a||e.altKey||1!==$($v__fm__container_fluid_form+" "+u+"."+p).length||s){if(s||!n||"c"!=String.fromCharCode(a).toLowerCase()&&"v"!=String.fromCharCode(a).toLowerCase()&&"x"!=String.fromCharCode(a).toLowerCase()||0!==$($v__fm__container_fluid_form+" "+u+" td:first-child").find("input:checked").length||1!==$($v__fm__container_fluid_form+" "+u+"."+p).length||!n||"c"!=String.fromCharCode(a).toLowerCase()&&"v"!=String.fromCharCode(a).toLowerCase()&&"x"!=String.fromCharCode(a).toLowerCase()||$($v__fm__container_fluid_form+" "+u+"."+p).find(v).trigger("click"),13===a&&!e.altKey&&s){e.preventDefault(),e.stopPropagation();var k=".modal-footer button.",C="click",T="_at_filemanager_",D="o__f_m-submitter-";$($v__fm__container_fluid_modal_in+" "+k+T+"delete_submit").length?$($v__fm__container_fluid_modal_in+" "+k+T+"delete_submit").trigger(C):$($v__fm__container_fluid_modal_in+" "+k+D+"chmod").length?$($v__fm__container_fluid_modal_in+" "+k+D+"chmod").trigger(C):$($v__fm__container_fluid_modal_in+" "+k+T+"create_folder_submit").length?$($v__fm__container_fluid_modal_in+" "+k+T+"create_folder_submit").trigger(C):$($v__fm__container_fluid_modal_in+" "+k+T+"create_file_submit").length?$($v__fm__container_fluid_modal_in+" "+k+T+"create_file_submit").trigger(C):$($v__fm__container_fluid_modal_in+" "+k+D+"compress").length?$($v__fm__container_fluid_modal_in+" "+k+D+"compress").trigger(C):$($v__fm__container_fluid_modal_in+" "+k+T+"rename_submit").length?$($v__fm__container_fluid_modal_in+" "+k+T+"rename_submit").trigger(C):$($v__fm__container_fluid_modal_in+" "+k+T+"search_submit").length&&$($v__fm__container_fluid_modal_in+" "+k+T+"search_submit").trigger(C)}if(13===a&&!e.altKey&&1===$($v__fm__container_fluid_form+" "+u+":not(."+h+")").length&&!x&&w){J=$($v__fm__container_fluid+" .active form "+u+' td a[href*="index.cgi?path="]').first(),Q=fm_get_current_path();return M=J.last().attr("data-filemin-link"),void __f___o_dr(J,Q,J.attr("href"))}if((13!==a||e.altKey)&&(32!=a||e.shiftKey||$($v__fm__container_fluid_form+" "+u+"."+p).length)){if(!(116!=a||e.altKey||e.shiftKey||n||r))return e.preventDefault(),e.stopPropagation(),void __f__refresh__dir_and_tree();if(46!=a&&113!=a&&114!=a&&115!=a&&116!=a&&117!=a&&119!=a||__f__cnt___selected()||$($v__fm__container_fluid+" .ui_checked_columns input:checked").length||s||l||$($v__fm__container_fluid+" input").is(":focus")||$($v__fm__container_fluid_form+" "+u+"."+p).length||!(!e.shiftKey||116==a&&e.shiftKey||115==a&&!e.shiftKey)){var S=$($v__fm__container_fluid_form+" "+u+"."+p),j=S.index(),F=parseInt($($v__fm__container_fluid_form+" "+u).length)-1,P=$v__fm__container_fluid_form+" "+u;if(!(n||e.altKey||r||m.is(":visible"))){if(!e.shiftKey||38!==a&&40!==a||S.find(v).trigger("click"),e.shiftKey&&16===a||S.removeClass(p+" "+p+"-n "+p+"-o"),"undefined"!=typeof ___contextmenu__triggered___)return;var E=$($v__fm__container_fluid+" .dataTable-mirror");d||38!==a&&40!==a||E.is(":focus")&&(S.removeClass(p+" "+p+"-n "+p+"-o"),E.blur()),!s&&d&&(38===a&&j--,40===a&&j++,33===a&&(e.preventDefault(),e.stopPropagation(),j-=5),34===a&&(e.preventDefault(),e.stopPropagation(),j+=5),36==a&&(e.preventDefault(),e.stopPropagation(),j=0),35==a&&(e.preventDefault(),e.stopPropagation(),j=F),j<0?j=0:j>F&&(j=F),38!==a&&40!==a||$(P).addClass(g),S=!$(P).find(".dataTables_empty").length&&$(P).eq(j).addClass(p+" "+g))}var I=$(P+"."+p);if($v__fm__global_last_row=I,27==a)return e.preventDefault(),e.stopPropagation(),void $($v__fm__container_fluid_modal_in+' button[data-dismiss="modal"]').trigger("click");if(13===a&&!e.altKey&&!s)return e.preventDefault(),e.stopPropagation(),$($v__fm__container_fluid+" .dataTables_filter label input").blur(),void $($v__fm__container_fluid_form+" "+u+"."+p).find("td:first-child").trigger("click");if(8==a&&w&&!$($v__fm__container_fluid+" .o__f_m-main-spinner").is(":visible")&&!$($v__fm__container_fluid+" input").is(":focus")&&!$($v__fm__container_fluid+" textarea").is(":focus")&&!s)return e.preventDefault(),e.stopPropagation(),void __f___b_dr(e);if("m"==String.fromCharCode(a).toLowerCase()&&n&&!s)return e.preventDefault(),e.stopPropagation(),void $("#file-manager-switch-user").trigger("click");if(32==a&&!n&&!s){e.preventDefault(),e.stopPropagation();var z=$($v__fm__container_fluid_form+" table tbody:visible tr."+p),A=jQuery.Event("keydown");A.which=40;var q=z.find(v),O=q.is(":checked");return q[0]&&(q[0].checked=!O,q.trigger("change")),$(t).trigger(A),void(config_portable_module_filemanager_calculate_size&&setTimeout(__f__get_fs,100))}if((w&&106==a||e.shiftKey&&56==a)&&!s)return e.preventDefault(),e.stopPropagation(),void $($v__fm__container_fluid+' button[onclick="invertSelection()"]').trigger("click");if((107==a||e.shiftKey&&187==a||"a"==String.fromCharCode(a).toLowerCase()&&w&&n&&!e.shiftKey&&!e.altKey&&!r)&&!s)return e.preventDefault(),e.stopPropagation(),select_all_entries("test_unconf")&&$('[data-select-all-entries="affirmative"] [data-yes="1"]')[0].click(),void $($v__fm__container_fluid+' button[onclick="selectAll()"]').trigger("click");if((109==a||e.shiftKey&&189==a||"a"==String.fromCharCode(a).toLowerCase()&&w&&n&&e.shiftKey&&!e.altKey&&!r)&&!s){e.preventDefault(),e.stopPropagation();var U=document.querySelectorAll(".container-fluid .ui_checked_columns");for(i=0;i<U.length;i++){U[i].getElementsByTagName("input")[0].checked&&rowClick(U[i])}return __f___lb(),void __r____changed()}if(!(46!=a&&119!=a||$($v__fm__container_fluid+" input").is(":focus")||s))return e.preventDefault(),e.stopPropagation(),$($v__fm__container_fluid+" .o__f_m-button-delete.disabled").length&&$($v__fm__container_fluid_form+" "+u+"."+p).find(v).trigger("click"),$($v__fm__container_fluid+" .o__f_m-button-delete").trigger("click"),void __f___cs();if(113==a&&!e.shiftKey&&!s)return e.preventDefault(),e.stopPropagation(),$($v__fm__container_fluid+" .o__f_m-button-chmod.disabled").length&&$($v__fm__container_fluid_form+" "+u+"."+p).find(v).trigger("click"),$($v__fm__container_fluid+" .o__f_m-button-chmod a").trigger("click"),void __f___cs();if(113==a&&e.shiftKey)s||(e.preventDefault(),e.stopPropagation(),$($v__fm__container_fluid+" .o__f_m-button-chown.disabled").length&&$($v__fm__container_fluid_form+" "+u+"."+p).find(v).trigger("click"),$($v__fm__container_fluid+" .o__f_m-button-chown a").trigger("click"),__f___cs());else if(114===a&&e.shiftKey){if(!s)return e.preventDefault(),e.stopPropagation(),$($v__fm__container_fluid+" .o__f_m-button-chattr.disabled").length&&$($v__fm__container_fluid_form+" "+u+"."+p).find(v).trigger("click"),$($v__fm__container_fluid+" .o__f_m-button-chattr a").trigger("click"),void __f___cs()}else if((13===a&&e.altKey||(r||n)&&73===a)&&!s){e.preventDefault(),e.stopPropagation();var R=$($v__fm__container_fluid_form+" "+u+"."+p);return void((M=fm_process_escaped_link($v__fm__global_last_row.find("td a").first().attr("data-filemin-link"),1))&&fm_get_file_info(fm_get_current_path(),M,R))}if(116==a&&e.altKey&&!s)return e.preventDefault(),e.stopPropagation(),$($v__fm__container_fluid+" .o__f_m-button-compress.disabled").length&&$($v__fm__container_fluid_form+" "+u+"."+p).find(v).trigger("click"),$($v__fm__container_fluid+" .o__f_m-button-compress a").trigger("click"),void __f___cs();if(117==a&&e.altKey&&!s)return e.preventDefault(),e.stopPropagation(),$($v__fm__container_fluid+" .o__f_m-button-compress.disabled").length&&$($v__fm__container_fluid_form+" "+u+"."+p).find(v).trigger("click"),void $($v__fm__container_fluid+" #extractEncrypted.modal").modal("show");if(118==a&&!e.shiftKey&&!n&&!s)return e.preventDefault(),e.stopPropagation(),$($v__fm__container_fluid+' a[onclick = "createFolderDialog()"]').trigger("click"),void __f___cs();if(117==a&&!s&&$($v__fm__container_fluid_form+" "+u+"."+p).find("i.fa-i-cursor").parent("a").length)return e.preventDefault(),e.stopPropagation(),$($v__fm__container_fluid_form+" "+u+"."+p).find("i.fa-i-cursor").parent("a").trigger("click"),void __f___cs();if(114!=a||e.shiftKey||s)if(115!=a||e.shiftKey||s){if(d&&!s&&!e.shiftKey&&!e.ctrlKey&&!e.metaKey&&!e.altKey&&32!=a&&113!=a&&114!=a&&106!=a&&107!=a&&116!=a&&109!=a&&46!=a&&119!=a&&118!=a&&115!=a){if($($v__fm__container_fluid+" .tab-pane.active .paginate_button.next").parents("ul.pagination").hasClass("pointer-events-none"))return;if(39===a)return $($v__fm__container_fluid+" .tab-pane.active .paginate_button.next").trigger("click"),$($v__fm__container_fluid_form+" "+u+"."+p).removeClass(p),void $($v__fm__container_fluid_form+" "+u).addClass(g);if(37===a)$($v__fm__container_fluid+" .tab-pane.active .paginate_button.previous").trigger("click"),$($v__fm__container_fluid_form+" "+u+"."+p).removeClass(p),$($v__fm__container_fluid_form+" "+u).addClass(g);else{var K=String.fromCharCode(a);!K||!/[a-zA-Z0-9]/.test(K)||n||e.altKey||r||$($v__fm__container_fluid+" .dataTables_filter label input").trigger("keyup").focus()}}if(83===a&&n){e.preventDefault(),e.stopPropagation();var N=$($v__fm__container_fluid_form+" "+u+"."+p).find(v);return!N.is(":checked")&&N.trigger("click"),void(__f__cnt___selected()&&__f__get_fs())}if((!e.shiftKey||!n)&&w&&!s&&!l&&!f&&!$($v__fm__container_fluid+" .btn-filter-top-right input").is(":focus")&&(115==a||116==a||118==a||"c"==String.fromCharCode(a).toLowerCase()||"v"==String.fromCharCode(a).toLowerCase()||"x"==String.fromCharCode(a).toLowerCase())){if(!("c"==String.fromCharCode(e.which).toLowerCase()&&n||"v"==String.fromCharCode(e.which).toLowerCase()&&n||"x"==String.fromCharCode(e.which).toLowerCase()&&n||115==a&&e.shiftKey||116==a&&e.shiftKey||118==a&&e.shiftKey||19==e.which))return!0;if("c"==String.fromCharCode(a).toLowerCase()&&check_selected_text())return;return e.preventDefault(),115!=a||s?118!=a||s?"c"!=String.fromCharCode(a).toLowerCase()||s||$(".popover").is(":visible")||f?"v"!=String.fromCharCode(a).toLowerCase()||s||l||f?"x"!=String.fromCharCode(a).toLowerCase()||s||l||f?void 0:(e.stopPropagation(),void($($v__fm__container_fluid+" .o__f_m-button-cut.disabled").length?plugins.messenger.post('<i class="fa fa-lg fa-fw fa-exclamation-triangle"></i>'+theme_language("filemanager_no_selection_to_cut"),.75,"warning","nothingSelected",1,["bottom","right"]):($($v__fm__container_fluid+" .o__f_m-button-cut a").trigger("click"),__f___cs()))):(e.stopPropagation(),void($($v__fm__container_fluid+" .o__f_m-button-paste.disabled").length?plugins.messenger.post('<i class="fa fa-lg fa-fw fa-clipboard"></i>'+theme_language("filemanager_empty_clipboard"),.75,"warning","emptyClipboard",1,["bottom","right"]):($($v__fm__container_fluid+" .o__f_m-button-paste a").trigger("click"),__f___cs()))):e.altKey?void fm_copy_path_to_clipboard($($v__fm__container_fluid_form+" "+u+"."+p)):(e.stopPropagation(),void($($v__fm__container_fluid+" .o__f_m-button-copy.disabled").length?plugins.messenger.post('<i class="fa fa-lg fa-fw fa-exclamation-triangle"></i>'+theme_language("filemanager_no_selection_to_copy"),.75,"warning","nothingSelected",1,["bottom","right"]):($($v__fm__container_fluid+" .o__f_m-button-copy a").trigger("click"),__f___cs()))):(e.stopPropagation(),$($v__fm__container_fluid+' a[onclick = "searchDialog()"]').trigger("click"),void __f___cs()):(e.stopPropagation(),$($v__fm__container_fluid+' a[onclick = "createFileDialog()"]').trigger("click"),void __f___cs())}}else{$($v__fm__container_fluid_form+" "+u+"."+p).find("i.fa-pencil-square-o").parent("a").length&&(e.preventDefault(),edit_file(),fm_target_spinner_add($($v__fm__container_fluid_form+" "+u+"."+p)))}else{e.preventDefault(),e.stopPropagation();var L=(R=$($v__fm__container_fluid_form+" "+u+"."+p)).find('td[data-xfile="1"]').length,W=!R.find('a[href*="edit_file.cgi"]').length,M=fm_process_escaped_link($v__fm__global_last_row.find("td a").first().attr("data-filemin-link"),1);L&&M&&(fm_target_spinner_add(R),edit_file(M,decodeURIComponent(fm_get_current_path()),!1,1,W,0,1))}}else{if(e.preventDefault(),e.stopPropagation(),quirks.active_element()&&$(quirks.active_element()).is('a[href^="edit_file.cgi"]'))return;plugins.messenger.post('<i class="fa fa-lg fa-fw fa-exclamation-circle"></i>'+theme_language("filemanager_nothing_is_selected"),.75,"warning","noSelection_warning",1,["bottom","right"])}}}else if($($v__fm__container_fluid_form+" "+u+"."+p).hasClass(h))__f___b_dr(e);else{var J=$($v__fm__container_fluid+" .active form "+u+"."+p+' td a[href*="index.cgi?path="]').first(),Q=fm_get_current_path();M=J.last().attr("data-filemin-link"),__f___o_dr(J,Q,J.attr("href"),void 0!==e.originalEvent)}}}else{if(e.preventDefault(),!w||x)return;__f__refresh__dir_and_tree()}}}}).on("keyup.fm",function(){context_menu_toggle_delete_trash("def")}).on("click.fm",$v__fm__container_fluid+" a.action-link > .fa",function(e){if(e.preventDefault(),$(this).hasClass("fa-extract-archive")){var a=$(this).parents("tr").find("td.ui_checked_checkbox input");!a.is(":checked")&&a.trigger("click")}else $(this).hasClass("fa-i-cursor")&&e.stopPropagation()}).on("click.fm",$v__fm__container_fluid+" #file-manager-switch-user:not(.disabled_no_styling)",function(e){var a=$(this);a.addClass("disabled_no_styling"),$.ajax({type:"POST",url:v___server_extensions_path+"/file-manager/fetcher.cgi",data:{module:v___module,list_users:1},dataType:"JSON",success:function(e){var _=fm_get_current_home_username(),n='<option value="" class="text-success"'+(_&&""!=_?"":" selected")+"><em>"+v___server_username+"</em></option>";$.each(e,function(e,a){n+='<option value="'+e+'"'+(_==e?" selected":"")+">"+e+'<span class="text-danger"> ['+a.split(":")[0]+"]</span></option>"});var i=$(t),r='            <div class="modal fade9 modal-list-users" tabindex="-1" role="dialog">              <div class="modal-dialog modal-md">                <div class="modal-content">                  <div class="modal-header background-warning background--bordered">                    <button type="button" class="close" data-dismiss="modal" aria-label="'+theme_language("global_close")+'"><span aria-hidden="true">&times;</span></button>                    <h4 class="modal-title"><i class="fa fa-fw fa-user-switch">&nbsp;&nbsp;</i> '+theme_language("filemanager_user_switch").replace(/\(.*?\)/g,"").replace(/\s+$/,"")+'</h4>                  </div>                  <div class="modal-body">                    <p>'+theme_language("filemanager_user_switch_description")+'</p>                <label class="select-styled fstreched"><select data-no-appearance>                  '+n+"                </select></label>                <hr>                <p>"+theme_language("filemanager_user_switch_description_back")+"</p>                  </div>                </div>              </div>            </div>        ";i.append(r);var o="body",s=".modal-list-users";$(o+" "+s).on("show.bs.modal",function(){$(o+" "+s).find("select").on("change.fm",function(){var e=$(this).val();localStorage.setItem(v___server_hostname+"-settings_thirdparty_filemanager_usermode",e),!1===config_portable_module_filemanager_switch_users&&__f___us_tl(),$(o+" "+s).modal("hide")})}),$(o+" "+s).on("shown.bs.modal",function(){setTimeout(function(){$(o+" "+s).focus(),$(o+" "+s).find("select").trigger("focus")},360)}),$(o+" "+s).on("hidden.bs.modal",function(){$(this).remove(),a.removeClass("disabled_no_styling")}),$(o+" "+s).modal("show")},error:function(e){session.status(e.responseText)}})}).on("click.fm",$v__fm__container_fluid+" [data-tree-toggle]",function(e){$(".row + .tree-view, .data-content-container > [data-tree-view], .data-content-container > [data-tree-view] + .tree-view-filter").toggleClass("hidden"),config_portable_module_filemanager_hide_tree_view=!config_portable_module_filemanager_hide_tree_view,theme.config.save(),_f__table()&&_f__table().DataTable().draw(!1),config_portable_module_filemanager_hide_tree_view||($____loader_block__manual=1,tree_view_get(),$____loader_block__manual=0),tree_resize()}).on("click.fm",$v__fm__container_fluid+" #file-manager-new-instance:not(.disabled_no_styling)",function(e){e.preventDefault(),__f___nt(fm_get_current_path(),!0,!1,void 0!==e.originalEvent)}).on("click.fm",$v__fm__container_fluid+" .nav.nav-tabs li.ui-sortable-handle.disabled",function(e){return e.preventDefault,e.stopPropagation,!1}).on("mouseenter.fm mousemove.fm",$v__fm__container_fluid+" .nav.nav-tabs li",function(){$(this).find("a > i").removeClass("invisible")}).on("mouseleave.fm",$v__fm__container_fluid+" .nav.nav-tabs li",function(){$(this).find("a > i").addClass("invisible")}).on("mousemove.fm",'[data-context-extract="1"], [data-context-preview-image="1"], [data-context-copy="1"], [data-context-select-all="1"], [data-context-view="1"], [data-context-edit="1"], [data-context-properties="1"]',function(e){var a=$(this).parent(),t=$("#__f__c__m").offset().left,_=a.width();parseInt(e.pageX-t-_)>-24?(a.removeClass("locked"),this.allowed=!a.hasClass("right")):(void 0===this.allowed||this.allowed)&&a.addClass("locked")}).on("mouseleave.fm",'[data-context-copy="1"], [data-context-select-all="1"]',function(){this.allowed="undefined"}).on("contextmenu.fm",$v__fm__container_fluid+" .directory_go_up:visible",function(){$(this).addClass("m-active").trigger("contextmenu")}).on("click.fm",$v__fm__container_fluid+" .nav.nav-tabs li:not(.disabled) i",function(e){if(e.preventDefault,!($($v__fm__container_fluid+" .nav.nav-tabs li:not(.ui-sortable-placeholder)").length<=1)){var a=$(this),t=a.parent("a").parent("li"),_=parseInt(a.parent("a").attr("href").replace(/^\D+/g,""));return t.hasClass("active")?(tab___to______delete=_,a.parent("a").parent("li").prev("li:not(.active)").length?a.parent("a").parent("li").prev("li:not(.active)").find("a").trigger("click"):a.parent("a").parent("li").next("li:not(.active)").length&&a.parent("a").parent("li").next("li:not(.active)").find("a").trigger("click")):($($v__fm__container_fluid+' a[href="#tab-'+_+'"]').parent("li").remove(),$($v__fm__container_fluid+' .tab-content .tab-pane[id="tab-'+_+'"]').remove(),__f___up__tb_vis(),__f___up__tb_store(),setTimeout(function(){"function"==typeof sortable&&sortable($($v__fm__container_fluid+" .tabs-top > ul.nav"))},100)),!1}});_=$v__fm__container_fluid+' a[data-toggle="tab"]';$(t).on("hide.bs.tab",_,function(e){var a=$(e.target).attr("href").replace(/^\D+/g,"");$($v__fm__container_fluid+" .__o__f_m-search-results").length&&$($v__fm__container_fluid+' .tab-content .tab-pane[id="tab-'+a+'"]').data("searchQuery",$($v__fm__container_fluid+" .__o__f_m-search-results")).data("searchQueryTotal",$($v__fm__container_fluid+" .total").html())}).on("show.bs.tab",_,function(e){$($v__fm__container_fluid+" .nav.nav-tabs li").addClass("disabled")}).on("shown.bs.tab",_,function(e){select_all_entries("remove"),setTimeout(function(){$($v__fm__container_fluid+" .nav.nav-tabs li").removeClass("disabled")},400);var a=$(e.target).attr("href"),t=a.replace(/^\D+/g,""),_=$(e.relatedTarget).attr("href"),n="_AuthenticThemeTmp"+_.replace(/^\D+/g,"");store_last_tab($(e.target)),$(_).find("form").attr({id:"list_form"+n,name:"list_form"+n}),$(_).find(".ui_checked_columns").removeClass("ui_checked_columns").addClass("_ui_checked_columns_tmp"),$.each($(_).find("form *[id]"),function(){var e=$(this).attr("id"),a=$(this).attr("name"),t=e+n,_=!!a&&a+n;-1===e.indexOf("DataTable")&&($(this).attr({id:t}),a&&$(this).attr({name:_}))}).promise().done(function(){var _="_AuthenticThemeTmp"+t;$(a).find("._ui_checked_columns_tmp").addClass("ui_checked_columns").removeClass("_ui_checked_columns_tmp"),$(a).find("form").attr({id:"list_form",name:"list_form"}),$.each($(a).find("form *[id]"),function(){var e=$(this).attr("id"),a=$(this).attr("name"),t=e.replace(_,""),n=!!a&&a.replace(_,"");e.indexOf(_)>-1&&($(this).attr({id:t}),a&&$(this).attr({name:n}))}).promise().done(function(){var _=$('.tab-content .tab-pane[id="tab-'+t+'"] .table:visible'),n=$(a).find("form input#path").val(),i=$('.tab-content .tab-pane[id="tab-'+t+'"]').data("searchQuery");if(fm_store_last_visited_dir(n),f__insert_dir_up(),__f__c__m(),"1"==$(e.target).attr("newly-created"))$(e.target).removeAttr("newly-created");else{var r=$('.tab-content .tab-pane[id="tab-'+t+'"]').data("searchQueryTotal"),o=[];i&&(o.push(i),o.push(r),$('.tab-content .tab-pane[id="tab-'+t+'"]').removeData("searchQuery").removeData("searchQueryTotal")),__f___up__d("index.cgi?path="+fm_process_path(n),!1,o)}if(!i){var s=$(".tab-pane.active").data("totalValue");!i&&$($v__fm__container_fluid+" .total").html(s)}var l=_f__table();if("undefined"!=typeof tab___is______new?(l.DataTable().draw(),delete tab___is______new):__init__dt_ck__e(),"undefined"!=typeof tab___to______delete){var f=tab___to______delete;delete tab___to______delete,$('a[href="#tab-'+f+'"]').parent("li").remove(),$('.tab-content .tab-pane[id="tab-'+f+'"]').remove()}__f___us_a(),tree_view_draw(_),tree_gset_node(),format_search_breadcrum(1)&&format_search_breadcrum(),tree_resize(0,1),fm_check_goback(),vars.h.selector.content.get()[0].scrollTop=0})})}),$($v__fm__container_fluid+" #searchForm label:first-child").text(theme_language("filemanager_search_file_mask")),$($v__fm__container_fluid+" #searchForm .form-group").after('        <div class="form-group">            <label>'+theme_language("filemanager_exclude_dirs")+'</label>            <input id="exclude" name="exclude" type="text" class="form-control heighter-28" placeholder="'+theme_language("filemanager_exclude_dirs_desc")+'">        </div>        <div class="form-inline fm-search-match-replace">            <div class="form-group">                <label>'+theme_language("filemanager_search_match")+'</label>                <br>                <input id="grepstring" name="grepstring" type="text" class="form-control heighter-28">            </div>            <div class="form-group">                <label>'+theme_language("filemanager_search_replace")+'</label>                <br>                <input id="grepreplace" name="grepreplace" type="text" class="form-control heighter-28">            </div>        </div>    ');var H=$("#searchForm").find("span.awcheckbox"),V=$("#searchForm").find('input[name="query"]'),X=V.parent(".form-group");H.prev("br").remove(),H.detach().appendTo($("#searchForm .form-inline")),V.val()||V.val("*"),X.before('<div class="form-inline fm-search-path">            <div class="form-group w-100p">                <label>'+theme_language("filemanager_search_info_search_dir")+'</label>                <br>                <input type="text" class="form-control heighter-28" value="'+Convert.quoteEscape(Convert.uriDecodeComponent(fm_get_current_path()))+'">            </div>        </div>'),X.addClass("w-67p").wrapAll('<div class="form-inline fm-query-container"></div>').parent().append('<div class="form-group w-33p">                <label>'+theme_language("filemanager_search_limit_type")+'</label>                <br>                <select name="limit_type" class="form-control heighter-28"><option selected></option><option value="1">'+theme_language("global_file")+'</option><option value="2">'+theme_language("global_directory")+'</option><option value="3">'+theme_language("global_symbolic")+"</option></select>            </div>"),$($v__fm__container_fluid+" #searchForm .form-inline").last().prev().before('<div class="form-inline fm-search-extra">            <div class="form-group w-33p">                <label>'+theme_language("filemanager_search_limit_size")+'</label>                <br>                <input id="limit_size" name="limit_size" type="text" class="form-control heighter-28" placeholder="'+theme_language("filemanager_search_limit_size_desc")+'">            </div>            <div class="form-group w-33p">                <label>'+theme_language("filemanager_search_limit_user")+'</label>                <br>                <input id="limit_user" name="limit_user" type="text" class="form-control heighter-28">            </div>            <div class="form-group w-33p">                <label>'+theme_language("filemanager_search_limit_group")+'</label>                <br>                <input id="limit_group" name="limit_group" type="text" class="form-control heighter-28">            </div>        </div>'),$($v__fm__container_fluid+" #searchForm .awcheckbox").after('<span class="awcheckbox awobject awobjectm"><input id="regex" name="regex" type="checkbox" class="iawobject"><label class="lawobject" for="regex">'+theme_language("filemanager_search_regex")+'&nbsp;&nbsp; </label></span><span class="awcheckbox awobject awobjectm"><input id="follow_symlinks" name="follow" type="checkbox" class="iawobject"><label class="lawobject" for="follow_symlinks">'+theme_language("filemanager_search_follow_symlinks")+"&nbsp;&nbsp; </label></span>"),plugins.navigation.detect("/filemin/index.cgi?path=/",1),setTimeout(function(){__f__refresh__dir_and_tree(),$____loader_block__=0},$.support.spa?0:100),"config.cgi"!==v___location_file&&"mconfig.cgi"!==v___location_file&&f__chk_loading(),$($v__fm__container_fluid).on("click.fm",".spaginates .paginate_button.previous:not(.disabled)",function(e){$(this).parent().find(".active").prev(".paginate_button").find("a").trigger("click")}),$($v__fm__container_fluid).on("click.fm",".spaginates .paginate_button.next:not(.disabled)",function(e){$(this).parent().find(".active").next(".paginate_button").find("a").trigger("click")}),$($v__fm__container_fluid).on("click.fm",".spaginates .spaginated",function(e){e.preventDefault(),e.stopPropagation(),get_link(this.href),$(this).parents(".spaginates").after(theme_spinner_small(!1,"semi-dark","width:12px; height:12px; margin-right: 3px; margin-left: 3px;"))}),$($v__fm__container_fluid).on("change.fm",".active .dataTables_length select",function(e){e.preventDefault(),e.stopPropagation(),void 0!==e.originalEvent&&($($v__fm__container_fluid).find(".active .spaginates .spaginated").first().trigger("click"),setTimeout(table_resize))}),$($v__fm__container_fluid).find(".modal.fade").removeClass("fade").addClass("fade6").attr("tabindex",-1),$($v__fm__container_fluid+" .modal").on("shown.bs.modal",function(){var e=$(this).find('input[type="text"]:visible, input[type="url"]:visible, input[type="number"]:visible, input[type="file"]:visible').first()[0];setTimeout(function(){e&&(e.focus(),$(e).select()),$('input[type="hidden"][class*="_o__f_m-tmp-"]').remove()},0)}),$($v__fm__container_fluid+" #compressDialog.modal").after('<div id="extractEncrypted" class="modal fade6" tabindex="-1"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal">×</button><h4 class="warning"><i class="fa fa-fw fa fa2 fa2-users-cog" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;'+theme_language("filemanager_context_extract_encrypted")+'</h4></div><div class="modal-body"><form id="extractEncryptedForm" action="extract.cgi" method="post"><div class="form-group"><label>'+theme_language("filemanager_extract_encrypted_password_or_passphrase")+'</label><input autofocus name="password" type="password" class="form-control heighter-28" data-placement="top"><small>'+theme_language("filemanager_extract_encrypted_password_or_passphrase_desc")+'</small></div><div class="form-group"><span class="awcheckbox awobject awobjectm"><input id="delete_afterwards" name="delete_afterwards" type="checkbox" class="iawobject" value="3"><label class="lawobject font-weight-normal" for="delete_afterwards">'+theme_language("filemanager_extract_option_delete_afterwards")+'&nbsp;&nbsp; </label></span><br><span onclick="fm_overwrite_files = this.querySelector(\'input\').checked ? true : false" class="awcheckbox awobject awobjectm"><input '+(fm_overwrite_files?"checked ":String())+'id="overwrite_efiles" name="overwrite_efiles" type="checkbox" class="iawobject" value="'+fm_overwrite_files+'"><label class="lawobject font-weight-normal" for="overwrite_efiles">'+theme_language("filemanager_files_mode_ask_title2")+'&nbsp;&nbsp; </label></span></div></form></div><div class="modal-footer"><div class="btn-group"><button type="button" class="btn btn-success o__f_m-submitter-decrypt_archive">'+theme_language("filemanager_context_extract")+'</button><button type="button" class="btn btn-default" data-dismiss="modal">'+theme_language("global_cancel")+"</button></div></div></div></div></div>");var G=$("#extractEncrypted"),Y="o__f_m-submitter-decrypt_archive";G.on("click.fm","."+Y,function(e){e.preventDefault(),e.stopPropagation();var a=$(this).parents(".modal.in"),t=a.find('input[name="password"]'),_=t.val(),n=a.find('input[name="delete_afterwards"]').is(":checked");plugins.messenger.post('<i class="fa fa-lg fa-fw fa-file-archive-o"></i>'+theme_language("filemanager_unpacking_archive")+"<br>"+theme_language("global_please_wait"),0,"info","extract_info",1,["bottom","right"]),t.val(String()),__f____a("extract",[_,n]),a.modal("hide")}).on("keyup",'input[name="password"]',function(e){(e.preventDefault(),13===(e.keyCode?e.keyCode:e.which))&&$(this).parents(".modal.in").find("."+Y).trigger("click")}),G.on("shown.bs.modal",function(e){e.preventDefault();var a=$(this);setTimeout(function(){a.find("input")[0].focus()},61),$(this).find('input[name="delete_afterwards"]')[0].checked=!1}),G.on("show.bs.modal",function(){$(this).find('input[name="overwrite_efiles"]')[0].checked=fm_overwrite_files}),$($v__fm__container_fluid+" #compressDialog.modal").after('<div id="encryptDecrypt" class="modal fade6" tabindex="-1"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal">×</button><h4 class="warning"><i data-title-icon class="fa fa-fw fa fa-key-plus" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;<span data-title-text>'+theme_language("global_encrypt")+'</span></h4></div><div class="modal-body"><form id="encryptDecryptForm" action="gpg.cgi" method="post"><div class="form-group" data-encrypt><label>'+theme_language("filemanager_encrypt_gpg_key")+'</label><select name="key" class="form-control heighter-28"><option disabled selected></option></select></div><div class="form-group" data-decrypt><label>'+theme_language("login_passphrase")+'</label><input name="passphrase" type="password" class="form-control heighter-28" data-placement="top"><small>'+theme_language("login_passphrase_desc")+'</small></div><div class="form-group"><span class="awcheckbox awobject awobjectm margined-right-13"><input id="delete_afterwards_encrypt" name="delete_afterwards_encrypt" type="checkbox" class="iawobject" value="3"><label class="lawobject font-weight-normal" for="delete_afterwards_encrypt" data-label-text>'+theme_language("filemanager_encrypt_option_delete_afterwards")+'&nbsp;&nbsp; </label></span><span class="awcheckbox awobject awobjectm use_master_admin_keys_cnt margined-left-0 hidden"><input id="use_master_admin_keys" name="use_master_admin_keys" type="checkbox" class="iawobject" value="keys_master"><label class="lawobject font-weight-normal" for="use_master_admin_keys">'+theme_language("filemanager_decrypt_option_use_master_admin_keys")+'&nbsp;&nbsp; </label></span><br><span onclick="fm_overwrite_files = this.querySelector(\'input\').checked ? true : false" class="awcheckbox awobject awobjectm"><input '+(fm_overwrite_files?"checked ":String())+'id="overwrite_efiles_2" name="overwrite_efiles" type="checkbox" class="iawobject" value="'+fm_overwrite_files+'"><label class="lawobject font-weight-normal" for="overwrite_efiles_2">'+theme_language("filemanager_files_mode_ask_title2")+'&nbsp;&nbsp; </label></span></div></form></div><div class="modal-footer"><div class="btn-group pull-left"><button type="button" class="btn btn-default pull-left" data-button-reverse>'+theme_language("global_decrypt")+'</button></div><div class="btn-group"><button type="button" class="btn btn-success o__f_m-submitter-decrypt_encrypt" data-button-text>'+theme_language("global_encrypt")+'</button><button type="button" class="btn btn-default" data-dismiss="modal">'+theme_language("global_cancel")+"</button></div></div></div></div></div>"),setTimeout(encryptDecryptModalA,300);var Z=$("#encryptDecrypt");if(Z.find('select[name="key"]').on("change.fm",function(){var e=$(this).parents(".modal").find("[data-button-text]"),a="disabled";$(this).val()?e.removeClass(a):e.addClass(a)}),Z.on("click.fm","[data-button-reverse], [data-button-text]:not(.disabled)",function(e){var a=$(this).parents(".modal"),t=a.find(".modal-header .fa2-key-minus").length?1:0,_=t?"decrypt":"encrypt",n="?action="+_+"&module="+v___module+extra_query();if($(e.target).is(".o__f_m-submitter-decrypt_encrypt")){var i=a.find('[name="delete_afterwards_encrypt"]').is(":checked")?1:0,r=a.find('[name="use_master_admin_keys"]:visible').is(":checked")?1:0,o=a.find('[name="passphrase"]').val(),s=a.find('[name="key"]').val(),l=$.trim(a.find('select[name="key"]:visible [value="'+s+'"]').attr("data-key-user")),f=String();i&&(n+="&delete="+i),"decrypt"!==_?s&&(n+="&key="+s):o&&(f="&passphrase="+o);var c=fm_get_current_home_username();n+=r||l&&c&&l!=c?"&keyuser="+(l||session.server.data("user"))+"&homeuser="+c:__f___um(),action_messages_dismiss_all(_);var d="fa-key-plus";"decrypt"===_&&(d="fa2 fa2-key-minus"),plugins.messenger.post('<i class="fa fa-lg fa-fw '+d+'"></i>'+theme_language("filemanager_crypt_"+_)+"<br>"+theme_language("global_please_wait"),0,"info",_+"_info",1,["bottom","right"]),$.ajax({type:"POST",url:v___server_extensions_path+"/file-manager/gpg.cgi"+n,data:__f___gd()+f,dataType:"json",success:function(e){if(e[0].error&&e[0].error.length)return setTimeout(function(){theme_message_dismiss(_+"_info")},566),void alert_json_errors(e[0].error,_,"filemanager_errors_");setTimeout(function(){__f___u("upd",e[0],1,_,!1),tree_update_node()},567)},error:function(e){session.status(e.responseText)}}),$(this).parents(".modal").modal("hide")}else encryptDecryptModalA(!t)}),Z.on("hide.bs.modal",function(){$(this).find('input[name="delete_afterwards_encrypt"]')[0].checked=!1,$(this).find('input[name="passphrase"]').val(String()),block_events()}),Z.on("show.bs.modal",function(){var e=$(this).find('select[name="key"]'),a=e.val();$(this).find('input[name="overwrite_efiles"]')[0].checked=fm_overwrite_files,$.ajax({type:"POST",url:v___location_prefix+"/xhr.cgi?xhr-get_gpg_keys=1&xhr-get_gpg_keys_all="+(event_hold_modifer_pressed()?1:0)+__f___um()+"&xhr-get_gpg_keys_cmodule="+v___module_file_manager,data:!1,dataType:"json",success:function(t){e.empty();var _=t.public,n=0;if($.each(_,function(a,t){var _=t.match(/\S+\s+\(\S+\s\[(\S+)\]\s\[\S+\s+\S+\]\)/),i=_&&_[0]&&_[1]?_[1]:"";e.append('<option data-key-user="'+i+'" data-key-order="'+i+a+'" value="'+a+'">'+t+"</option>"),n++}),n){var i=e.find("option");i.sort(function(e,a){return $(e).attr("data-key-order")>$(a).attr("data-key-order")?1:-1}),e.empty().append(i).prepend('<option class="text-muted" value="" disabled selected>'+theme_language("filemanager_gpg_select_the_key")+"</option>")}else{var r=fm_get_current_home_username();r||(r=session.server.data("user")),get_jailed_user()&&(r=get_jailed_user("user")),e.prepend('<option class="text-muted" value="" disabled selected>'+theme_language("filemanager_archive_gpg_no_keys")+" ["+r+"]</option>")}e.find('option[value="'+a+'"]').length&&e.val(a)},error:function(e){session.status(e.responseText)}})}),Z.on("shown.bs.modal",function(){var e=$(this);setTimeout(function(){e.find('input[name="passphrase"]')[0].focus()},61)}),$(".bnt-primary, .bnt-default").removeClass(".bnt-primary, .bnt-default").addClass("btn-default"),"config.cgi"!==v___location_file&&"mconfig.cgi"!==v___location_file){if(f__ck_init_err(1))return void f__ck_init_err();__f___up__tb_vis(),setTimeout(function(){page.handle.content.preloader.hide()},300),tree_view_get()}}setTimeout(function(){!$.support.spa&&___f__tw(),$(window).off("resize.fm"),$(window).on("resize.fm",function(e){if("config.cgi"!==v___location_file&&v___module===v___module_file_manager){var a=_f__table();a&&a.length&&a.DataTable().draw(),tree_resize()}})},$.support.spa?0:200),$.each(localStorage,function(e,a){/^(DataTables_DataTables_Table_[\d]*_\/file)/.test(e)&&localStorage.removeItem(e)});